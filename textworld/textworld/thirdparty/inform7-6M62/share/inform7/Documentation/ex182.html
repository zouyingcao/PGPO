<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>12.9. Check, carry out, report</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง12.9. Check, carry out, report</p>
<p>The normal behaviour of an action is specified by its three associated rulebooks - check, carry out and report. In the case of our &quot;photographing&quot; example, these rulebooks will be:</p>
<!-- START CODE "c868" -->
<a id="c868"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Check photographing</span>. Here, for instance, we need to verify that the player has the camera. If any of our checks fail, we should say why and stop the action. If they succeed, we say nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c869" -->
<a id="c869"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Carry out photographing</span>. At this stage no further checking is needed (or allowed): the action now definitively takes place. At this point we might, for instance, deduct one from the number of exposures left on the film in the camera, or award the player points for capturing something interesting for posterity. But we should say nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c870" -->
<a id="c870"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Report photographing</span>. At this stage no further activity is needed (or allowed): whatever effect the action had, it has happened and is now over. All we can do is to say what has taken place.
</p></blockquote>
<!-- END CODE -->
<p>So far we have not really gone into the business of what rulebooks are, and we don't do so here either - suffice to say that we can now create whatever rules we need:</p>
<!-- START CODE "c871" -->
<a id="c871"></a><blockquote class="code"><p class="quoted">
A check photographing rule:
<br />&#160;&#160;&#160;&#160;if the camera is not carried:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can hardly photograph without a camera, now can you?&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>In fact, writing &quot;a check photographing rule&quot; is over-formal. We can more simply label our rules like so:</p>
<!-- START CODE "c872" -->
<a id="c872"></a><blockquote class="code"><p class="quoted">
Check photographing:
<br />&#160;&#160;&#160;&#160;if we have photographed the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You've already snapped [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c873" -->
<a id="c873"></a><blockquote class="code"><p class="quoted">
Report photographing: say &quot;Click!&quot;
</p></blockquote>
<!-- END CODE -->
<p>For the sake of brevity, photography has no interesting consequence (no points to be won, no film to use up), so there are no carry out rules here. Note the way we used the word &quot;instead&quot; once again to stop actions in their tracks.</p>
<p>We can continue to add rules at any point, and a classic thing that happens when testing a new work is that the designer realises there is a case which has not been thought of:</p>
<!-- START CODE "c874" -->
<a id="c874"></a><blockquote class="code"><p class="quoted">
Check photographing:
<br />&#160;&#160;&#160;&#160;if the noun is the camera:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;That would require some sort of contraption with mirrors.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_12_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_12_1.html" class="standardlink">Start of Chapter 12: Advanced Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12_8.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_12_8.html" class="standardlink">Back to ยง12.8. Irregular English verbs</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12_10.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_12_10.html" class="standardlink">Onward to ยง12.10. Action variables</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e182"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_12_9.html#e182" class="eglink"><b>194</b></a></div>
<div class="egpanel" id="example182">
<p>This will be explored more in subsequent examples, but one of the things we can do with carry out rules is extend the function of existing commands so that they do more, or have special effects in specific situations. For instance, suppose we want to have a class of electric light:</p>
<!-- START CODE "c10576" -->
<a id="c10576"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Dark Ages Revisited[=0x0022=][=0x000A=][=0x000A=]An electric light is a kind of device. Carry out switching on an electric light: now the noun is lit. Carry out switching off an electric light: now the noun is unlit.[=0x000A=][=0x000A=][This will not affect the behavior of any other devices when switched; it will also not change the way in which switching lights on and off is reported. The player will still see [=0x0022=]You switch the sodium lamp on.[=0x0022=] or the like. In this case that is probably what we want. If we wanted a special way of describing turning on electric lights as opposed to all other devices, we could also add an after rule for the electric light class. Adding this rule to the carry out train does guarantee, though, that in no case will we manage to make the lamp lit without actually making it switched on (or vice versa).][=0x000A=][=0x000A=]The Stooped Corridor is a room. [=0x0022=]A low, square-cut corridor, running north to south, stooping you over.[=0x0022=][=0x000A=][=0x000A=]The sodium lamp is an electric light in the Stooped Corridor. [=0x0022=][if switched on]The sodium lamp squats on the ground, burning away.[otherwise]The sodium lamp squats heavily on the ground.[end if][=0x0022=]. The description is [=0x0022=]It is a heavy-duty archaeologist[=0x0027=]s lamp, [if switched off]currently off.[otherwise]blazing with brilliant yellow light.[end if][=0x0022=][=0x000A=][=0x000A=]Instead of burning the sodium lamp, try switching on the lamp.[=0x000A=][=0x000A=][So far so easy. Since we[=0x0027=]ve built the description of its light or darkness into the lamp[=0x0027=]s description, though, we may want to get rid of the [=0x0022=]...is switched on[=0x0022=] line that automatically follows when we look at something. For this we do need to borrow from a later chapter:][=0x000A=][=0x000A=]The examine devices rule is not listed in the carry out examining rules.[=0x000A=][=0x000A=]Test me with [=0x0022=]x lamp / switch lamp on / look / x lamp[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Dark Ages Revisited&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10577" -->
<a id="c10577"></a><blockquote class="code"><p class="quoted">
An electric light is a kind of device. Carry out switching on an electric light: now the noun is lit. Carry out switching off an electric light: now the noun is unlit.
</p></blockquote>
<!-- END CODE -->
<p>This will not affect the behavior of any other devices when switched; it will also not change the way in which switching lights on and off is reported. The player will still see &quot;You switch the sodium lamp on.&quot; or the like. In this case that is probably what we want. If we wanted a special way of describing turning on electric lights as opposed to all other devices, we could also add an after rule for the electric light class. Adding this rule to the carry out train does guarantee, though, that in no case will we manage to make the lamp lit without actually making it switched on (or vice versa).</p>
<!-- START CODE "c10578" -->
<a id="c10578"></a><blockquote class="code"><p class="quoted">
The Stooped Corridor is a room. &quot;A low, square-cut corridor, running north to south, stooping you over.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10579" -->
<a id="c10579"></a><blockquote class="code"><p class="quoted">
The sodium lamp is an electric light in the Stooped Corridor. &quot;[if switched on]The sodium lamp squats on the ground, burning away.[otherwise]The sodium lamp squats heavily on the ground.[end if]&quot;. The description is &quot;It is a heavy-duty archaeologist's lamp, [if switched off]currently off.[otherwise]blazing with brilliant yellow light.[end if]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10580" -->
<a id="c10580"></a><blockquote class="code"><p class="quoted">
Instead of burning the sodium lamp, try switching on the lamp.
</p></blockquote>
<!-- END CODE -->
<p>So far so easy. Since we've built the description of its light or darkness into the lamp's description, though, we may want to get rid of the &quot;...is switched on&quot; line that automatically follows when we look at something. For this we do need to borrow from a later chapter:</p>
<!-- START CODE "c10581" -->
<a id="c10581"></a><blockquote class="code"><p class="quoted">
The examine devices rule is not listed in the carry out examining rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10582" -->
<a id="c10582"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x lamp / switch lamp on / look / x lamp&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_12_9.html#e182" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">The Dark Ages Revisited</span></b></a><br />An electric light kind of device which becomes lit when switched on and dark when switched off.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example182">
<p>This will be explored more in subsequent examples, but one of the things we can do with carry out rules is extend the function of existing commands so that they do more, or have special effects in specific situations. For instance, suppose we want to have a class of electric light:</p>
<!-- START CODE "c10583" -->
<a id="c10583"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Dark Ages Revisited[=0x0022=][=0x000A=][=0x000A=]An electric light is a kind of device. Carry out switching on an electric light: now the noun is lit. Carry out switching off an electric light: now the noun is unlit.[=0x000A=][=0x000A=][This will not affect the behavior of any other devices when switched; it will also not change the way in which switching lights on and off is reported. The player will still see [=0x0022=]You switch the sodium lamp on.[=0x0022=] or the like. In this case that is probably what we want. If we wanted a special way of describing turning on electric lights as opposed to all other devices, we could also add an after rule for the electric light class. Adding this rule to the carry out train does guarantee, though, that in no case will we manage to make the lamp lit without actually making it switched on (or vice versa).][=0x000A=][=0x000A=]The Stooped Corridor is a room. [=0x0022=]A low, square-cut corridor, running north to south, stooping you over.[=0x0022=][=0x000A=][=0x000A=]The sodium lamp is an electric light in the Stooped Corridor. [=0x0022=][if switched on]The sodium lamp squats on the ground, burning away.[otherwise]The sodium lamp squats heavily on the ground.[end if][=0x0022=]. The description is [=0x0022=]It is a heavy-duty archaeologist[=0x0027=]s lamp, [if switched off]currently off.[otherwise]blazing with brilliant yellow light.[end if][=0x0022=][=0x000A=][=0x000A=]Instead of burning the sodium lamp, try switching on the lamp.[=0x000A=][=0x000A=][So far so easy. Since we[=0x0027=]ve built the description of its light or darkness into the lamp[=0x0027=]s description, though, we may want to get rid of the [=0x0022=]...is switched on[=0x0022=] line that automatically follows when we look at something. For this we do need to borrow from a later chapter:][=0x000A=][=0x000A=]The examine devices rule is not listed in the carry out examining rules.[=0x000A=][=0x000A=]Test me with [=0x0022=]x lamp / switch lamp on / look / x lamp[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Dark Ages Revisited&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10584" -->
<a id="c10584"></a><blockquote class="code"><p class="quoted">
An electric light is a kind of device. Carry out switching on an electric light: now the noun is lit. Carry out switching off an electric light: now the noun is unlit.
</p></blockquote>
<!-- END CODE -->
<p>This will not affect the behavior of any other devices when switched; it will also not change the way in which switching lights on and off is reported. The player will still see &quot;You switch the sodium lamp on.&quot; or the like. In this case that is probably what we want. If we wanted a special way of describing turning on electric lights as opposed to all other devices, we could also add an after rule for the electric light class. Adding this rule to the carry out train does guarantee, though, that in no case will we manage to make the lamp lit without actually making it switched on (or vice versa).</p>
<!-- START CODE "c10585" -->
<a id="c10585"></a><blockquote class="code"><p class="quoted">
The Stooped Corridor is a room. &quot;A low, square-cut corridor, running north to south, stooping you over.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10586" -->
<a id="c10586"></a><blockquote class="code"><p class="quoted">
The sodium lamp is an electric light in the Stooped Corridor. &quot;[if switched on]The sodium lamp squats on the ground, burning away.[otherwise]The sodium lamp squats heavily on the ground.[end if]&quot;. The description is &quot;It is a heavy-duty archaeologist's lamp, [if switched off]currently off.[otherwise]blazing with brilliant yellow light.[end if]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10587" -->
<a id="c10587"></a><blockquote class="code"><p class="quoted">
Instead of burning the sodium lamp, try switching on the lamp.
</p></blockquote>
<!-- END CODE -->
<p>So far so easy. Since we've built the description of its light or darkness into the lamp's description, though, we may want to get rid of the &quot;...is switched on&quot; line that automatically follows when we look at something. For this we do need to borrow from a later chapter:</p>
<!-- START CODE "c10588" -->
<a id="c10588"></a><blockquote class="code"><p class="quoted">
The examine devices rule is not listed in the carry out examining rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10589" -->
<a id="c10589"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x lamp / switch lamp on / look / x lamp&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex182.html#e182"><i>RB</i></a></div>
<div class="egpanel" id="example182">
<p>This will be explored more in subsequent examples, but one of the things we can do with carry out rules is extend the function of existing commands so that they do more, or have special effects in specific situations. For instance, suppose we want to have a class of electric light:</p>
<!-- START CODE "c10590" -->
<a id="c10590"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Dark Ages Revisited[=0x0022=][=0x000A=][=0x000A=]An electric light is a kind of device. Carry out switching on an electric light: now the noun is lit. Carry out switching off an electric light: now the noun is unlit.[=0x000A=][=0x000A=][This will not affect the behavior of any other devices when switched; it will also not change the way in which switching lights on and off is reported. The player will still see [=0x0022=]You switch the sodium lamp on.[=0x0022=] or the like. In this case that is probably what we want. If we wanted a special way of describing turning on electric lights as opposed to all other devices, we could also add an after rule for the electric light class. Adding this rule to the carry out train does guarantee, though, that in no case will we manage to make the lamp lit without actually making it switched on (or vice versa).][=0x000A=][=0x000A=]The Stooped Corridor is a room. [=0x0022=]A low, square-cut corridor, running north to south, stooping you over.[=0x0022=][=0x000A=][=0x000A=]The sodium lamp is an electric light in the Stooped Corridor. [=0x0022=][if switched on]The sodium lamp squats on the ground, burning away.[otherwise]The sodium lamp squats heavily on the ground.[end if][=0x0022=]. The description is [=0x0022=]It is a heavy-duty archaeologist[=0x0027=]s lamp, [if switched off]currently off.[otherwise]blazing with brilliant yellow light.[end if][=0x0022=][=0x000A=][=0x000A=]Instead of burning the sodium lamp, try switching on the lamp.[=0x000A=][=0x000A=][So far so easy. Since we[=0x0027=]ve built the description of its light or darkness into the lamp[=0x0027=]s description, though, we may want to get rid of the [=0x0022=]...is switched on[=0x0022=] line that automatically follows when we look at something. For this we do need to borrow from a later chapter:][=0x000A=][=0x000A=]The examine devices rule is not listed in the carry out examining rules.[=0x000A=][=0x000A=]Test me with [=0x0022=]x lamp / switch lamp on / look / x lamp[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Dark Ages Revisited&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10591" -->
<a id="c10591"></a><blockquote class="code"><p class="quoted">
An electric light is a kind of device. Carry out switching on an electric light: now the noun is lit. Carry out switching off an electric light: now the noun is unlit.
</p></blockquote>
<!-- END CODE -->
<p>This will not affect the behavior of any other devices when switched; it will also not change the way in which switching lights on and off is reported. The player will still see &quot;You switch the sodium lamp on.&quot; or the like. In this case that is probably what we want. If we wanted a special way of describing turning on electric lights as opposed to all other devices, we could also add an after rule for the electric light class. Adding this rule to the carry out train does guarantee, though, that in no case will we manage to make the lamp lit without actually making it switched on (or vice versa).</p>
<!-- START CODE "c10592" -->
<a id="c10592"></a><blockquote class="code"><p class="quoted">
The Stooped Corridor is a room. &quot;A low, square-cut corridor, running north to south, stooping you over.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10593" -->
<a id="c10593"></a><blockquote class="code"><p class="quoted">
The sodium lamp is an electric light in the Stooped Corridor. &quot;[if switched on]The sodium lamp squats on the ground, burning away.[otherwise]The sodium lamp squats heavily on the ground.[end if]&quot;. The description is &quot;It is a heavy-duty archaeologist's lamp, [if switched off]currently off.[otherwise]blazing with brilliant yellow light.[end if]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10594" -->
<a id="c10594"></a><blockquote class="code"><p class="quoted">
Instead of burning the sodium lamp, try switching on the lamp.
</p></blockquote>
<!-- END CODE -->
<p>So far so easy. Since we've built the description of its light or darkness into the lamp's description, though, we may want to get rid of the &quot;...is switched on&quot; line that automatically follows when we look at something. For this we do need to borrow from a later chapter:</p>
<!-- START CODE "c10595" -->
<a id="c10595"></a><blockquote class="code"><p class="quoted">
The examine devices rule is not listed in the carry out examining rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10596" -->
<a id="c10596"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x lamp / switch lamp on / look / x lamp&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<a id="e406"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex406.html#e406" class="eglink"><b>195</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex406.html#e406" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Paddington</span></b></a><br />A CUT [something] WITH [something] command which acts differently on different types of objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex406.html#e406"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e178"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex178.html#e178" class="eglink"><b>196</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex178.html#e178" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Noisemaking</span></b></a><br />Creating a stage after the report stage of an action, during which other characters may observe and react.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex178.html#e178"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e243"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex243.html#e243" class="eglink"><b>197</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex243.html#e243" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Delicious, Delicious Rocks</span></b></a><br />Adding a "sanity-check" stage to decide whether an action makes any sense, which occurs before any before rules, implicit taking, or check rules.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex243.html#e243"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
