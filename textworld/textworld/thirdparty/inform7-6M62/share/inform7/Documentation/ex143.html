<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>17.4. Standard tokens of grammar</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง17.4. Standard tokens of grammar</p>
<p>We have already seen &quot;[something]&quot; and &quot;[someone]&quot;, which are standard examples of &quot;tokens of grammar&quot; - patterns matched by suitable named things. There are several other standard tokens, provided not so much from necessity but to allow the story parser to be more graceful and responsive. &quot;[someone]&quot; matches the same possibilities as &quot;[a person]&quot; would, but the parser handles it a little better in cases of failure. These special tokens are best explained by looking at some of the examples in the standard grammar, which can be browsed in the Index of any story.</p>
<!-- START CODE "c1329" -->
<a id="c1329"></a><blockquote class="code"><p class="quoted">
Understand &quot;wear [something preferably held]&quot; as wearing.
</p></blockquote>
<!-- END CODE -->
<p>Here we expect that the named item will be one that is held by the player, and the parser will use this to resolve ambiguities between names of things carried and not carried. (If the action is one which positively requires that its noun be something carried, a command matching this token against something not carried will generate an automatic attempt to take it.)</p>
<!-- START CODE "c1330" -->
<a id="c1330"></a><blockquote class="code"><p class="quoted">
Understand &quot;take [things]&quot; as taking.
<br />Understand &quot;drop [things preferably held]&quot; as dropping.
</p></blockquote>
<!-- END CODE -->
<p>&quot;[things]&quot; is like &quot;[something]&quot; but allows a list of items, or a vague plural like &quot;all&quot;, to be typed. The result will be a sequence of actions, one for each item thus described. &quot;[things preferably held]&quot; is the analogous token for &quot;[something preferably held]&quot;.</p>
<!-- START CODE "c1331" -->
<a id="c1331"></a><blockquote class="code"><p class="quoted">
Understand &quot;take [things inside] from [something]&quot; as removing.
</p></blockquote>
<!-- END CODE -->
<p>&quot;[things inside]&quot; matches only what is inside the second-named thing, and ensures that (for instance) the command &quot;take all from box&quot; does not also try to take the box.</p>
<!-- START CODE "c1332" -->
<a id="c1332"></a><blockquote class="code"><p class="quoted">
Understand &quot;put [other things] in/inside/into [something]&quot; as inserting it into.
</p></blockquote>
<!-- END CODE -->
<p>Similarly, &quot;[other things]&quot; will allow anything except the second-named thing. (Like &quot;[things inside]&quot; it is really only needed for handling containers.)</p>
<p>Finally there is &quot;[any things]&quot;, which should be used only with care. This is like &quot;[things]&quot; but with no restriction at all on where the item comes from: it might be invisible, or from a different room, or out of play altogether. If we use this, we had better remember that it would match ALL, with quite extravagant consequences.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_17_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_17_1.html" class="standardlink">Start of Chapter 17: Understanding</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_17_3.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_17_3.html" class="standardlink">Back to ยง17.3. Overriding existing commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_17_5.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_17_5.html" class="standardlink">Onward to ยง17.5. The text token</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e11"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex11.html#e11" class="eglink"><b>294</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex11.html#e11" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Shawn's Bad Day</span></b></a><br />Allowing the player to EXAMINE ALL.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex11.html#e11"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e143"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_17_4.html#e143" class="eglink"><b>295</b></a></div>
<div class="egpanel" id="example143">
<p>Suppose that we have a game in which groups of objects can have meaning apart from their individual significance -- perhaps there are spells that can only be cast by collecting just the right items in the same place.</p>
<p>In this case, one of the things the player might like to be able to do is look at several items together and get a special response, different from looking at the items individually.</p>
<p>To make this happen, we need to do several things:</p>
<!-- START CODE "c8494" -->
<a id="c8494"></a><blockquote class="code"><p class="quoted">
(1) we need to create a version of the EXAMINE command that can apply to multiple objects at once.
<br />(2) we need to correct the way Inform normally deals with multiple-object commands, because we want our group description to print only one time, and we want to avoid stubs such as &quot;pear: ... apple: ...&quot; before or after the group description.
<br />(3) we need to define a way for Inform to identify interesting groups and describe them.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8495" -->
<a id="c8495"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Left Hand of Autumn[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things][=0x0022=] or [=0x0022=]look at [things][=0x0022=] as multiply-examining. Multiply-examining is an action applying to one thing.[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things inside] in/on [something][=0x0022=] or [=0x0022=]look at [things inside] in/on [something][=0x0022=] as multiply-examining it from. Multiply-examining it from is an action applying to two things.[=0x000A=][=0x000A=]Group-description-complete is a truth state that varies.[=0x000A=][=0x000A=]Carry out multiply-examining it from:[=0x000A=][=0x0009=]try multiply-examining the noun instead.[=0x000A=][=0x000A=]Check multiply-examining when group-description-complete is true:[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Carry out multiply-examining:[=0x000A=][=0x0009=]let L be the list of matched things;[=0x000A=][=0x0009=]if the number of entries in L is 0, try examining the noun instead;[=0x000A=][=0x0009=]if the number of entries in L is 1, try examining entry 1 of L instead;[=0x000A=][=0x0009=]describe L;[=0x000A=][=0x0009=]say line break;[=0x000A=][=0x0009=]now group-description-complete is true.[=0x000A=][=0x000A=]Before reading a command:[=0x000A=][=0x0009=]now group-description-complete is false.[=0x000A=][=0x000A=][Now for step 2, overriding Inform[=0x0027=]s usual output of names of objects:][=0x000A=][=0x000A=]The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.[=0x000A=][=0x000A=]This is the silently announce items from multiple object lists rule:[=0x000A=][=0x0009=]unless multiply-examining or multiply-examining something from something:[=0x000A=][=0x0009=][=0x0009=]if the current item from the multiple object list is not nothing, say [=0x0022=][current item from the multiple object list]: [run paragraph on][=0x0022=].[=0x000A=][=0x000A=]Definition: a thing is matched if it is listed in the multiple object list.[=0x000A=][=0x000A=][We[=0x0027=]ll save our [=0x0022=]to describe[=0x0022=] phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.][=0x000A=][=0x000A=][Now, the player might also want to be able to refer to a group of item by some kind of group name, so let[=0x0027=]s add the option of creating a Table of Collective Names which will interpret these:][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]repeat through the Table of Collective Names:[=0x000A=][=0x0009=][=0x0009=]let N be [=0x0022=][the player[=0x0027=]s command][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]let Y be relevant list entry;[=0x000A=][=0x0009=][=0x0009=]while N matches the regular expression [=0x0022=][name-text entry][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]replace the regular expression [=0x0022=](.*)[name-text entry](.*)[=0x0022=] in N with [=0x0022=][=0x005C=]1[Y][=0x005C=]2[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]change the text of the player[=0x0027=]s command to N.[=0x000A=][=0x000A=][=0x000A=]Report taking something:[=0x000A=][=0x0009=]say [=0x0022=]You pick up [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=][And as a bit of polish, because we[=0x0027=]d like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:][=0x000A=][=0x000A=]Understand [=0x0022=]look on [something][=0x0022=] as searching.[=0x000A=][=0x000A=]Instead of searching something which supports at least two things:[=0x000A=][=0x0009=]let L be the list of things supported by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=]Instead of searching something which contains at least two things:[=0x000A=][=0x0009=]let L be the list of things contained by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]Eight-Walled Chamber is a room. [=0x0022=]A perfectly octagonal room whose walls are tinted in various hues.[=0x0022=][=0x000A=][=0x000A=]The display table is a supporter in the Chamber. A twig of rowan wood is on the table.[=0x000A=][=0x000A=]The player carries an apple and a pear.[=0x000A=][=0x000A=]A glove is a kind of thing. A glove is always wearable. Understand [=0x0022=]glove[=0x0022=] as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.[=0x000A=][=0x000A=][Now we define a few actual lists of items:][=0x000A=][=0x000A=]Fruit list is a list of objects which varies. Fruit list is { apple, pear }.[=0x000A=]Glove list is a list of objects which varies. Glove list is { right glove, left glove }.[=0x000A=]Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.[=0x000A=][=0x000A=]To describe (L - a list of objects):[=0x000A=][=0x0009=]sort L;[=0x000A=][=0x0009=]if L is fruit list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Just a couple of fruits.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is glove list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It[=0x0027=]s a matched pair of fuzzy blue gloves.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is arcane list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You see [L with indefinite articles].[=0x0022=][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]sort fruit list;[=0x000A=][=0x0009=]sort glove list;[=0x000A=][=0x0009=]sort the arcane list.[=0x000A=][=0x000A=][We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the [=0x0022=]Reading a command[=0x0022=] code we wrote earlier, we can also teach the game to understand the player[=0x0027=]s references to [=0x0022=]the left hand of autumn[=0x0022=] as a specific collection of items.][=0x000A=][=0x000A=]Table of Collective Names[=0x000A=]name-text[=0x0009=]relevant list[=0x000A=][=0x0022=]left hand of autumn[=0x0022=][=0x0009=][=0x0022=][arcane list][=0x0022=][=0x000A=][=0x0022=]gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x0022=]pair of gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Left Hand of Autumn&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8496" -->
<a id="c8496"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8497" -->
<a id="c8497"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things]&quot; or &quot;look at [things]&quot; as multiply-examining. Multiply-examining is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8498" -->
<a id="c8498"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things inside] in/on [something]&quot; or &quot;look at [things inside] in/on [something]&quot; as multiply-examining it from. Multiply-examining it from is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8499" -->
<a id="c8499"></a><blockquote class="code"><p class="quoted">
Group-description-complete is a truth state that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8500" -->
<a id="c8500"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining it from:
<br />&#160;&#160;&#160;&#160;try multiply-examining the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8501" -->
<a id="c8501"></a><blockquote class="code"><p class="quoted">
Check multiply-examining when group-description-complete is true:
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8502" -->
<a id="c8502"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining:
<br />&#160;&#160;&#160;&#160;let L be the list of matched things;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 0, try examining the noun instead;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 1, try examining entry 1 of L instead;
<br />&#160;&#160;&#160;&#160;describe L;
<br />&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;now group-description-complete is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8503" -->
<a id="c8503"></a><blockquote class="code"><p class="quoted">
Before reading a command:
<br />&#160;&#160;&#160;&#160;now group-description-complete is false.
</p></blockquote>
<!-- END CODE -->
<p>Now for step 2, overriding Inform's usual output of names of objects:</p>
<!-- START CODE "c8504" -->
<a id="c8504"></a><blockquote class="code"><p class="quoted">
The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8505" -->
<a id="c8505"></a><blockquote class="code"><p class="quoted">
This is the silently announce items from multiple object lists rule:
<br />&#160;&#160;&#160;&#160;unless multiply-examining or multiply-examining something from something:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing, say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8506" -->
<a id="c8506"></a><blockquote class="code"><p class="quoted">
Definition: a thing is matched if it is listed in the multiple object list.
</p></blockquote>
<!-- END CODE -->
<p>We'll save our &quot;to describe&quot; phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.</p>
<p>Now, the player might also want to be able to refer to a group of item by some kind of group name, so let's add the option of creating a Table of Collective Names which will interpret these:</p>
<!-- START CODE "c8507" -->
<a id="c8507"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Collective Names:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be &quot;[the player's command]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let Y be relevant list entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while N matches the regular expression &quot;[name-text entry]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the regular expression &quot;(.*)[name-text entry](.*)&quot; in N with &quot;\1[Y]\2&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;change the text of the player's command to N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8508" -->
<a id="c8508"></a><blockquote class="code"><p class="quoted">
Report taking something:
<br />&#160;&#160;&#160;&#160;say &quot;You pick up [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>And as a bit of polish, because we'd like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:</p>
<!-- START CODE "c8509" -->
<a id="c8509"></a><blockquote class="code"><p class="quoted">
Understand &quot;look on [something]&quot; as searching.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8510" -->
<a id="c8510"></a><blockquote class="code"><p class="quoted">
Instead of searching something which supports at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things supported by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
<br />Instead of searching something which contains at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things contained by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8511" -->
<a id="c8511"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8512" -->
<a id="c8512"></a><blockquote class="code"><p class="quoted">
Eight-Walled Chamber is a room. &quot;A perfectly octagonal room whose walls are tinted in various hues.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8513" -->
<a id="c8513"></a><blockquote class="code"><p class="quoted">
The display table is a supporter in the Chamber. A twig of rowan wood is on the table.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8514" -->
<a id="c8514"></a><blockquote class="code"><p class="quoted">
The player carries an apple and a pear.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8515" -->
<a id="c8515"></a><blockquote class="code"><p class="quoted">
A glove is a kind of thing. A glove is always wearable. Understand &quot;glove&quot; as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.
</p></blockquote>
<!-- END CODE -->
<p>Now we define a few actual lists of items:</p>
<!-- START CODE "c8516" -->
<a id="c8516"></a><blockquote class="code"><p class="quoted">
Fruit list is a list of objects which varies. Fruit list is { apple, pear }.
<br />Glove list is a list of objects which varies. Glove list is { right glove, left glove }.
<br />Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8517" -->
<a id="c8517"></a><blockquote class="code"><p class="quoted">
To describe (L - a list of objects):
<br />&#160;&#160;&#160;&#160;sort L;
<br />&#160;&#160;&#160;&#160;if L is fruit list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Just a couple of fruits.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is glove list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It's a matched pair of fuzzy blue gloves.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is arcane list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You see [L with indefinite articles].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8518" -->
<a id="c8518"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;sort fruit list;
<br />&#160;&#160;&#160;&#160;sort glove list;
<br />&#160;&#160;&#160;&#160;sort the arcane list.
</p></blockquote>
<!-- END CODE -->
<p>We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the &quot;Reading a command&quot; code we wrote earlier, we can also teach the game to understand the player's references to &quot;the left hand of autumn&quot; as a specific collection of items.</p>
<!-- START CODE "c8519" -->
<a id="c8519"></a><blockquote class="code"><p class="quoted">
Table of Collective Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">name-text</p></td><td class="quotedtablecell"><p class="quoted">relevant list</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;left hand of autumn&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[arcane list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pair of gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8520" -->
<a id="c8520"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_17_4.html#e143" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">The Left Hand of Autumn</span></b></a><br />The possibility of using a [things] token opens up some interesting complications, because we may want actions on multiple items to be reported differently from actions on just one. Here we look at how to make a multiple examination command that describes groups in special ways.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example143">
<p>Suppose that we have a game in which groups of objects can have meaning apart from their individual significance -- perhaps there are spells that can only be cast by collecting just the right items in the same place.</p>
<p>In this case, one of the things the player might like to be able to do is look at several items together and get a special response, different from looking at the items individually.</p>
<p>To make this happen, we need to do several things:</p>
<!-- START CODE "c8521" -->
<a id="c8521"></a><blockquote class="code"><p class="quoted">
(1) we need to create a version of the EXAMINE command that can apply to multiple objects at once.
<br />(2) we need to correct the way Inform normally deals with multiple-object commands, because we want our group description to print only one time, and we want to avoid stubs such as &quot;pear: ... apple: ...&quot; before or after the group description.
<br />(3) we need to define a way for Inform to identify interesting groups and describe them.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8522" -->
<a id="c8522"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Left Hand of Autumn[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things][=0x0022=] or [=0x0022=]look at [things][=0x0022=] as multiply-examining. Multiply-examining is an action applying to one thing.[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things inside] in/on [something][=0x0022=] or [=0x0022=]look at [things inside] in/on [something][=0x0022=] as multiply-examining it from. Multiply-examining it from is an action applying to two things.[=0x000A=][=0x000A=]Group-description-complete is a truth state that varies.[=0x000A=][=0x000A=]Carry out multiply-examining it from:[=0x000A=][=0x0009=]try multiply-examining the noun instead.[=0x000A=][=0x000A=]Check multiply-examining when group-description-complete is true:[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Carry out multiply-examining:[=0x000A=][=0x0009=]let L be the list of matched things;[=0x000A=][=0x0009=]if the number of entries in L is 0, try examining the noun instead;[=0x000A=][=0x0009=]if the number of entries in L is 1, try examining entry 1 of L instead;[=0x000A=][=0x0009=]describe L;[=0x000A=][=0x0009=]say line break;[=0x000A=][=0x0009=]now group-description-complete is true.[=0x000A=][=0x000A=]Before reading a command:[=0x000A=][=0x0009=]now group-description-complete is false.[=0x000A=][=0x000A=][Now for step 2, overriding Inform[=0x0027=]s usual output of names of objects:][=0x000A=][=0x000A=]The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.[=0x000A=][=0x000A=]This is the silently announce items from multiple object lists rule:[=0x000A=][=0x0009=]unless multiply-examining or multiply-examining something from something:[=0x000A=][=0x0009=][=0x0009=]if the current item from the multiple object list is not nothing, say [=0x0022=][current item from the multiple object list]: [run paragraph on][=0x0022=].[=0x000A=][=0x000A=]Definition: a thing is matched if it is listed in the multiple object list.[=0x000A=][=0x000A=][We[=0x0027=]ll save our [=0x0022=]to describe[=0x0022=] phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.][=0x000A=][=0x000A=][Now, the player might also want to be able to refer to a group of item by some kind of group name, so let[=0x0027=]s add the option of creating a Table of Collective Names which will interpret these:][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]repeat through the Table of Collective Names:[=0x000A=][=0x0009=][=0x0009=]let N be [=0x0022=][the player[=0x0027=]s command][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]let Y be relevant list entry;[=0x000A=][=0x0009=][=0x0009=]while N matches the regular expression [=0x0022=][name-text entry][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]replace the regular expression [=0x0022=](.*)[name-text entry](.*)[=0x0022=] in N with [=0x0022=][=0x005C=]1[Y][=0x005C=]2[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]change the text of the player[=0x0027=]s command to N.[=0x000A=][=0x000A=][=0x000A=]Report taking something:[=0x000A=][=0x0009=]say [=0x0022=]You pick up [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=][And as a bit of polish, because we[=0x0027=]d like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:][=0x000A=][=0x000A=]Understand [=0x0022=]look on [something][=0x0022=] as searching.[=0x000A=][=0x000A=]Instead of searching something which supports at least two things:[=0x000A=][=0x0009=]let L be the list of things supported by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=]Instead of searching something which contains at least two things:[=0x000A=][=0x0009=]let L be the list of things contained by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]Eight-Walled Chamber is a room. [=0x0022=]A perfectly octagonal room whose walls are tinted in various hues.[=0x0022=][=0x000A=][=0x000A=]The display table is a supporter in the Chamber. A twig of rowan wood is on the table.[=0x000A=][=0x000A=]The player carries an apple and a pear.[=0x000A=][=0x000A=]A glove is a kind of thing. A glove is always wearable. Understand [=0x0022=]glove[=0x0022=] as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.[=0x000A=][=0x000A=][Now we define a few actual lists of items:][=0x000A=][=0x000A=]Fruit list is a list of objects which varies. Fruit list is { apple, pear }.[=0x000A=]Glove list is a list of objects which varies. Glove list is { right glove, left glove }.[=0x000A=]Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.[=0x000A=][=0x000A=]To describe (L - a list of objects):[=0x000A=][=0x0009=]sort L;[=0x000A=][=0x0009=]if L is fruit list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Just a couple of fruits.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is glove list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It[=0x0027=]s a matched pair of fuzzy blue gloves.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is arcane list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You see [L with indefinite articles].[=0x0022=][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]sort fruit list;[=0x000A=][=0x0009=]sort glove list;[=0x000A=][=0x0009=]sort the arcane list.[=0x000A=][=0x000A=][We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the [=0x0022=]Reading a command[=0x0022=] code we wrote earlier, we can also teach the game to understand the player[=0x0027=]s references to [=0x0022=]the left hand of autumn[=0x0022=] as a specific collection of items.][=0x000A=][=0x000A=]Table of Collective Names[=0x000A=]name-text[=0x0009=]relevant list[=0x000A=][=0x0022=]left hand of autumn[=0x0022=][=0x0009=][=0x0022=][arcane list][=0x0022=][=0x000A=][=0x0022=]gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x0022=]pair of gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Left Hand of Autumn&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8523" -->
<a id="c8523"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8524" -->
<a id="c8524"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things]&quot; or &quot;look at [things]&quot; as multiply-examining. Multiply-examining is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8525" -->
<a id="c8525"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things inside] in/on [something]&quot; or &quot;look at [things inside] in/on [something]&quot; as multiply-examining it from. Multiply-examining it from is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8526" -->
<a id="c8526"></a><blockquote class="code"><p class="quoted">
Group-description-complete is a truth state that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8527" -->
<a id="c8527"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining it from:
<br />&#160;&#160;&#160;&#160;try multiply-examining the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8528" -->
<a id="c8528"></a><blockquote class="code"><p class="quoted">
Check multiply-examining when group-description-complete is true:
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8529" -->
<a id="c8529"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining:
<br />&#160;&#160;&#160;&#160;let L be the list of matched things;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 0, try examining the noun instead;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 1, try examining entry 1 of L instead;
<br />&#160;&#160;&#160;&#160;describe L;
<br />&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;now group-description-complete is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8530" -->
<a id="c8530"></a><blockquote class="code"><p class="quoted">
Before reading a command:
<br />&#160;&#160;&#160;&#160;now group-description-complete is false.
</p></blockquote>
<!-- END CODE -->
<p>Now for step 2, overriding Inform's usual output of names of objects:</p>
<!-- START CODE "c8531" -->
<a id="c8531"></a><blockquote class="code"><p class="quoted">
The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8532" -->
<a id="c8532"></a><blockquote class="code"><p class="quoted">
This is the silently announce items from multiple object lists rule:
<br />&#160;&#160;&#160;&#160;unless multiply-examining or multiply-examining something from something:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing, say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8533" -->
<a id="c8533"></a><blockquote class="code"><p class="quoted">
Definition: a thing is matched if it is listed in the multiple object list.
</p></blockquote>
<!-- END CODE -->
<p>We'll save our &quot;to describe&quot; phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.</p>
<p>Now, the player might also want to be able to refer to a group of item by some kind of group name, so let's add the option of creating a Table of Collective Names which will interpret these:</p>
<!-- START CODE "c8534" -->
<a id="c8534"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Collective Names:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be &quot;[the player's command]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let Y be relevant list entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while N matches the regular expression &quot;[name-text entry]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the regular expression &quot;(.*)[name-text entry](.*)&quot; in N with &quot;\1[Y]\2&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;change the text of the player's command to N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8535" -->
<a id="c8535"></a><blockquote class="code"><p class="quoted">
Report taking something:
<br />&#160;&#160;&#160;&#160;say &quot;You pick up [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>And as a bit of polish, because we'd like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:</p>
<!-- START CODE "c8536" -->
<a id="c8536"></a><blockquote class="code"><p class="quoted">
Understand &quot;look on [something]&quot; as searching.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8537" -->
<a id="c8537"></a><blockquote class="code"><p class="quoted">
Instead of searching something which supports at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things supported by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
<br />Instead of searching something which contains at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things contained by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8538" -->
<a id="c8538"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8539" -->
<a id="c8539"></a><blockquote class="code"><p class="quoted">
Eight-Walled Chamber is a room. &quot;A perfectly octagonal room whose walls are tinted in various hues.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8540" -->
<a id="c8540"></a><blockquote class="code"><p class="quoted">
The display table is a supporter in the Chamber. A twig of rowan wood is on the table.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8541" -->
<a id="c8541"></a><blockquote class="code"><p class="quoted">
The player carries an apple and a pear.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8542" -->
<a id="c8542"></a><blockquote class="code"><p class="quoted">
A glove is a kind of thing. A glove is always wearable. Understand &quot;glove&quot; as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.
</p></blockquote>
<!-- END CODE -->
<p>Now we define a few actual lists of items:</p>
<!-- START CODE "c8543" -->
<a id="c8543"></a><blockquote class="code"><p class="quoted">
Fruit list is a list of objects which varies. Fruit list is { apple, pear }.
<br />Glove list is a list of objects which varies. Glove list is { right glove, left glove }.
<br />Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8544" -->
<a id="c8544"></a><blockquote class="code"><p class="quoted">
To describe (L - a list of objects):
<br />&#160;&#160;&#160;&#160;sort L;
<br />&#160;&#160;&#160;&#160;if L is fruit list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Just a couple of fruits.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is glove list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It's a matched pair of fuzzy blue gloves.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is arcane list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You see [L with indefinite articles].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8545" -->
<a id="c8545"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;sort fruit list;
<br />&#160;&#160;&#160;&#160;sort glove list;
<br />&#160;&#160;&#160;&#160;sort the arcane list.
</p></blockquote>
<!-- END CODE -->
<p>We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the &quot;Reading a command&quot; code we wrote earlier, we can also teach the game to understand the player's references to &quot;the left hand of autumn&quot; as a specific collection of items.</p>
<!-- START CODE "c8546" -->
<a id="c8546"></a><blockquote class="code"><p class="quoted">
Table of Collective Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">name-text</p></td><td class="quotedtablecell"><p class="quoted">relevant list</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;left hand of autumn&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[arcane list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pair of gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8547" -->
<a id="c8547"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex143.html#e143"><i>RB</i></a></div>
<div class="egpanel" id="example143">
<p>Suppose that we have a game in which groups of objects can have meaning apart from their individual significance -- perhaps there are spells that can only be cast by collecting just the right items in the same place.</p>
<p>In this case, one of the things the player might like to be able to do is look at several items together and get a special response, different from looking at the items individually.</p>
<p>To make this happen, we need to do several things:</p>
<!-- START CODE "c8548" -->
<a id="c8548"></a><blockquote class="code"><p class="quoted">
(1) we need to create a version of the EXAMINE command that can apply to multiple objects at once.
<br />(2) we need to correct the way Inform normally deals with multiple-object commands, because we want our group description to print only one time, and we want to avoid stubs such as &quot;pear: ... apple: ...&quot; before or after the group description.
<br />(3) we need to define a way for Inform to identify interesting groups and describe them.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8549" -->
<a id="c8549"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Left Hand of Autumn[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things][=0x0022=] or [=0x0022=]look at [things][=0x0022=] as multiply-examining. Multiply-examining is an action applying to one thing.[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things inside] in/on [something][=0x0022=] or [=0x0022=]look at [things inside] in/on [something][=0x0022=] as multiply-examining it from. Multiply-examining it from is an action applying to two things.[=0x000A=][=0x000A=]Group-description-complete is a truth state that varies.[=0x000A=][=0x000A=]Carry out multiply-examining it from:[=0x000A=][=0x0009=]try multiply-examining the noun instead.[=0x000A=][=0x000A=]Check multiply-examining when group-description-complete is true:[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Carry out multiply-examining:[=0x000A=][=0x0009=]let L be the list of matched things;[=0x000A=][=0x0009=]if the number of entries in L is 0, try examining the noun instead;[=0x000A=][=0x0009=]if the number of entries in L is 1, try examining entry 1 of L instead;[=0x000A=][=0x0009=]describe L;[=0x000A=][=0x0009=]say line break;[=0x000A=][=0x0009=]now group-description-complete is true.[=0x000A=][=0x000A=]Before reading a command:[=0x000A=][=0x0009=]now group-description-complete is false.[=0x000A=][=0x000A=][Now for step 2, overriding Inform[=0x0027=]s usual output of names of objects:][=0x000A=][=0x000A=]The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.[=0x000A=][=0x000A=]This is the silently announce items from multiple object lists rule:[=0x000A=][=0x0009=]unless multiply-examining or multiply-examining something from something:[=0x000A=][=0x0009=][=0x0009=]if the current item from the multiple object list is not nothing, say [=0x0022=][current item from the multiple object list]: [run paragraph on][=0x0022=].[=0x000A=][=0x000A=]Definition: a thing is matched if it is listed in the multiple object list.[=0x000A=][=0x000A=][We[=0x0027=]ll save our [=0x0022=]to describe[=0x0022=] phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.][=0x000A=][=0x000A=][Now, the player might also want to be able to refer to a group of item by some kind of group name, so let[=0x0027=]s add the option of creating a Table of Collective Names which will interpret these:][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]repeat through the Table of Collective Names:[=0x000A=][=0x0009=][=0x0009=]let N be [=0x0022=][the player[=0x0027=]s command][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]let Y be relevant list entry;[=0x000A=][=0x0009=][=0x0009=]while N matches the regular expression [=0x0022=][name-text entry][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]replace the regular expression [=0x0022=](.*)[name-text entry](.*)[=0x0022=] in N with [=0x0022=][=0x005C=]1[Y][=0x005C=]2[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]change the text of the player[=0x0027=]s command to N.[=0x000A=][=0x000A=][=0x000A=]Report taking something:[=0x000A=][=0x0009=]say [=0x0022=]You pick up [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=][And as a bit of polish, because we[=0x0027=]d like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:][=0x000A=][=0x000A=]Understand [=0x0022=]look on [something][=0x0022=] as searching.[=0x000A=][=0x000A=]Instead of searching something which supports at least two things:[=0x000A=][=0x0009=]let L be the list of things supported by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=]Instead of searching something which contains at least two things:[=0x000A=][=0x0009=]let L be the list of things contained by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]Eight-Walled Chamber is a room. [=0x0022=]A perfectly octagonal room whose walls are tinted in various hues.[=0x0022=][=0x000A=][=0x000A=]The display table is a supporter in the Chamber. A twig of rowan wood is on the table.[=0x000A=][=0x000A=]The player carries an apple and a pear.[=0x000A=][=0x000A=]A glove is a kind of thing. A glove is always wearable. Understand [=0x0022=]glove[=0x0022=] as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.[=0x000A=][=0x000A=][Now we define a few actual lists of items:][=0x000A=][=0x000A=]Fruit list is a list of objects which varies. Fruit list is { apple, pear }.[=0x000A=]Glove list is a list of objects which varies. Glove list is { right glove, left glove }.[=0x000A=]Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.[=0x000A=][=0x000A=]To describe (L - a list of objects):[=0x000A=][=0x0009=]sort L;[=0x000A=][=0x0009=]if L is fruit list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Just a couple of fruits.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is glove list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It[=0x0027=]s a matched pair of fuzzy blue gloves.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is arcane list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You see [L with indefinite articles].[=0x0022=][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]sort fruit list;[=0x000A=][=0x0009=]sort glove list;[=0x000A=][=0x0009=]sort the arcane list.[=0x000A=][=0x000A=][We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the [=0x0022=]Reading a command[=0x0022=] code we wrote earlier, we can also teach the game to understand the player[=0x0027=]s references to [=0x0022=]the left hand of autumn[=0x0022=] as a specific collection of items.][=0x000A=][=0x000A=]Table of Collective Names[=0x000A=]name-text[=0x0009=]relevant list[=0x000A=][=0x0022=]left hand of autumn[=0x0022=][=0x0009=][=0x0022=][arcane list][=0x0022=][=0x000A=][=0x0022=]gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x0022=]pair of gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Left Hand of Autumn&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8550" -->
<a id="c8550"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8551" -->
<a id="c8551"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things]&quot; or &quot;look at [things]&quot; as multiply-examining. Multiply-examining is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8552" -->
<a id="c8552"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things inside] in/on [something]&quot; or &quot;look at [things inside] in/on [something]&quot; as multiply-examining it from. Multiply-examining it from is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8553" -->
<a id="c8553"></a><blockquote class="code"><p class="quoted">
Group-description-complete is a truth state that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8554" -->
<a id="c8554"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining it from:
<br />&#160;&#160;&#160;&#160;try multiply-examining the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8555" -->
<a id="c8555"></a><blockquote class="code"><p class="quoted">
Check multiply-examining when group-description-complete is true:
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8556" -->
<a id="c8556"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining:
<br />&#160;&#160;&#160;&#160;let L be the list of matched things;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 0, try examining the noun instead;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 1, try examining entry 1 of L instead;
<br />&#160;&#160;&#160;&#160;describe L;
<br />&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;now group-description-complete is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8557" -->
<a id="c8557"></a><blockquote class="code"><p class="quoted">
Before reading a command:
<br />&#160;&#160;&#160;&#160;now group-description-complete is false.
</p></blockquote>
<!-- END CODE -->
<p>Now for step 2, overriding Inform's usual output of names of objects:</p>
<!-- START CODE "c8558" -->
<a id="c8558"></a><blockquote class="code"><p class="quoted">
The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8559" -->
<a id="c8559"></a><blockquote class="code"><p class="quoted">
This is the silently announce items from multiple object lists rule:
<br />&#160;&#160;&#160;&#160;unless multiply-examining or multiply-examining something from something:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing, say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8560" -->
<a id="c8560"></a><blockquote class="code"><p class="quoted">
Definition: a thing is matched if it is listed in the multiple object list.
</p></blockquote>
<!-- END CODE -->
<p>We'll save our &quot;to describe&quot; phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.</p>
<p>Now, the player might also want to be able to refer to a group of item by some kind of group name, so let's add the option of creating a Table of Collective Names which will interpret these:</p>
<!-- START CODE "c8561" -->
<a id="c8561"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Collective Names:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be &quot;[the player's command]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let Y be relevant list entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while N matches the regular expression &quot;[name-text entry]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the regular expression &quot;(.*)[name-text entry](.*)&quot; in N with &quot;\1[Y]\2&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;change the text of the player's command to N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8562" -->
<a id="c8562"></a><blockquote class="code"><p class="quoted">
Report taking something:
<br />&#160;&#160;&#160;&#160;say &quot;You pick up [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>And as a bit of polish, because we'd like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:</p>
<!-- START CODE "c8563" -->
<a id="c8563"></a><blockquote class="code"><p class="quoted">
Understand &quot;look on [something]&quot; as searching.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8564" -->
<a id="c8564"></a><blockquote class="code"><p class="quoted">
Instead of searching something which supports at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things supported by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
<br />Instead of searching something which contains at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things contained by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8565" -->
<a id="c8565"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8566" -->
<a id="c8566"></a><blockquote class="code"><p class="quoted">
Eight-Walled Chamber is a room. &quot;A perfectly octagonal room whose walls are tinted in various hues.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8567" -->
<a id="c8567"></a><blockquote class="code"><p class="quoted">
The display table is a supporter in the Chamber. A twig of rowan wood is on the table.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8568" -->
<a id="c8568"></a><blockquote class="code"><p class="quoted">
The player carries an apple and a pear.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8569" -->
<a id="c8569"></a><blockquote class="code"><p class="quoted">
A glove is a kind of thing. A glove is always wearable. Understand &quot;glove&quot; as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.
</p></blockquote>
<!-- END CODE -->
<p>Now we define a few actual lists of items:</p>
<!-- START CODE "c8570" -->
<a id="c8570"></a><blockquote class="code"><p class="quoted">
Fruit list is a list of objects which varies. Fruit list is { apple, pear }.
<br />Glove list is a list of objects which varies. Glove list is { right glove, left glove }.
<br />Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8571" -->
<a id="c8571"></a><blockquote class="code"><p class="quoted">
To describe (L - a list of objects):
<br />&#160;&#160;&#160;&#160;sort L;
<br />&#160;&#160;&#160;&#160;if L is fruit list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Just a couple of fruits.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is glove list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It's a matched pair of fuzzy blue gloves.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is arcane list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You see [L with indefinite articles].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8572" -->
<a id="c8572"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;sort fruit list;
<br />&#160;&#160;&#160;&#160;sort glove list;
<br />&#160;&#160;&#160;&#160;sort the arcane list.
</p></blockquote>
<!-- END CODE -->
<p>We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the &quot;Reading a command&quot; code we wrote earlier, we can also teach the game to understand the player's references to &quot;the left hand of autumn&quot; as a specific collection of items.</p>
<!-- START CODE "c8573" -->
<a id="c8573"></a><blockquote class="code"><p class="quoted">
Table of Collective Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">name-text</p></td><td class="quotedtablecell"><p class="quoted">relevant list</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;left hand of autumn&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[arcane list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pair of gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8574" -->
<a id="c8574"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
