<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>7.3. Before rules</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง7.3. Before rules</p>
<p>Despite what was said in the previous section, instead rules do not quite bypass all of the usual rules. Inform knows that certain actions require light: for instance,</p>
<!-- START CODE "c465" -->
<a id="c465"></a><blockquote class="code"><p class="quoted">
examining the napkin; looking; looking under the dining table
</p></blockquote>
<!-- END CODE -->
<p>and if it is dark then none of these actions will be allowed, and any instead rules about them will not even be reached. Similarly, Inform knows that most actions require physical access to their objects: so &quot;taking the napkin&quot; would be blocked if the napkin were, say, inside a closed glass bottle, whereas &quot;examining the napkin&quot; would not. So an instead rule can only take effect if the action has already passed these basic reasonability tests.</p>
<p>&quot;Before&quot; rules genuinely precede checking of any kind. They also differ from instead rules in that they do not automatically stop the action in its tracks. Rather, they are provided as an opportunity to ensure that something else is done first. For example:</p>
<!-- START CODE "c466" -->
<a id="c466"></a><blockquote class="code"><p class="quoted">
Before taking the napkin, say &quot;(first unfolding its delicate origami swan)&quot;.
</p></blockquote>
<!-- END CODE -->
<p>whence</p>
<!-- START CODE "c467" -->
<a id="c467"></a><blockquote class="code"><p class="quoted">
&gt;GET NAPKIN
<br />(first unfolding its delicate origami swan)
<br />Taken.
</p></blockquote>
<!-- END CODE -->
<p>We have seen that instead rules automatically stop actions, whereas before rules automatically allow them to continue. We sometimes want to change this. The magic word &quot;instead&quot; can therefore be tacked on to any instruction in a before rule, and will have the effect of immediately stopping the action at that instruction. Thus the following two rules are (almost) equivalent:</p>
<!-- START CODE "c468" -->
<a id="c468"></a><blockquote class="code"><p class="quoted">
Before taking the key, instead say &quot;It seems to be soldered to the keyhole.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c469" -->
<a id="c469"></a><blockquote class="code"><p class="quoted">
Instead of taking the key, say &quot;It seems to be soldered to the keyhole.&quot;
</p></blockquote>
<!-- END CODE -->
<p>It is also possible to be explicit about stopping the action:</p>
<!-- START PHRASE "defn67" -->
<div class="definition"><a id="defn67"></a><p class="defnprototype"><b>stop the action</b></p>
<!-- END PHRASE -->
<!-- definition of ph_stopaction -->

<p>This phrase stops the current rule, stops the rulebook being worked through, and finally stops the action being processed. Example:</p>
<!-- START CODE "c470" -->
<a id="c470"></a><blockquote class="code"><p class="quoted">
Before taking the key:
<br />&#160;&#160;&#160;&#160;say &quot;It seems to be soldered to the keyhole.&quot;;
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>Finally, we can prevent Inform from stopping the action when it otherwise might:</p>
<!-- START PHRASE "defn68" -->
<div class="definition"><a id="defn68"></a><p class="defnprototype"><b>continue the action</b></p>
<!-- END PHRASE -->
<!-- definition of ph_continueaction -->

<p>This phrase ends the current rule, but in a way which keeps its rulebook going, so that the action being processed will carry on rather than being stopped. Example:</p>
<!-- START CODE "c471" -->
<a id="c471"></a><blockquote class="code"><p class="quoted">
Instead of taking the napkin:
<br />&#160;&#160;&#160;&#160;say &quot;(first unfolding its delicate origami swan)[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<p>An &quot;instead&quot; rule ordinarily stops the action when it finishes, so the &quot;continue the action&quot; is needed to make things carry on. (This rule would have been better written as a &quot;before&quot; rule, in fact, but it shows the idea.)</p>

<!-- end definition -->
</div>

<p>As a general principle, it is good style to use instead rules whenever blocking actions, and before rules only when it is genuinely necessary to do something first but then to continue: in fact, it is good style to use &quot;stop the action&quot; or &quot;continue the action&quot; as little as possible.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_7_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_7_1.html" class="standardlink">Start of Chapter 7: Basic Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_7_2.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_7_2.html" class="standardlink">Back to ยง7.2. Instead rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_7_4.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_7_4.html" class="standardlink">Onward to ยง7.4. Try and try silently</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e52"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex52.html#e52" class="eglink"><b>86</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex52.html#e52" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Democratic Process</span></b></a><br />Make PUT and INSERT commands automatically take objects if the player is not holding them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex52.html#e52"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e84"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex84.html#e84" class="eglink"><b>87</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex84.html#e84" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Sand</span></b></a><br />Extend PUT and INSERT handling to cases where multiple objects are intended at once.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex84.html#e84"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
