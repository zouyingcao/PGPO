<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>20.7. Making new text with text substitutions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง20.7. Making new text with text substitutions</p>
<p>Substitutions are most often used just for printing, like so:</p>
<!-- START CODE "c1714" -->
<a id="c1714"></a><blockquote class="code"><p class="quoted">
say &quot;The clock reads [time of day].&quot;;
</p></blockquote>
<!-- END CODE -->
<p>But they can also produce text which can be stored up or used in other ways. For example, defining</p>
<!-- START CODE "c1715" -->
<a id="c1715"></a><blockquote class="code"><p class="quoted">
To decide what text is (T - text) doubled:
<br />&#160;&#160;&#160;&#160;decide on &quot;[T][T]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>makes</p>
<!-- START CODE "c1716" -->
<a id="c1716"></a><blockquote class="code"><p class="quoted">
let the Gerard Kenny reference be &quot;NewYork&quot; doubled;
</p></blockquote>
<!-- END CODE -->
<p>set this temporary variable to &quot;NewYorkNewYork&quot;.</p>
<p>There is, however, a subtlety here. A text with a substitution in it, like:</p>
<!-- START CODE "c1717" -->
<a id="c1717"></a><blockquote class="code"><p class="quoted">
&quot;The clock reads [time of day].&quot;
</p></blockquote>
<!-- END CODE -->
<p>is always waiting to be substituted, that is, to become something like:</p>
<!-- START CODE "c1718" -->
<a id="c1718"></a><blockquote class="code"><p class="quoted">
&quot;The clock reads 11:12 AM.&quot;
</p></blockquote>
<!-- END CODE -->
<p>If all we do with text is to print it, there's nothing to worry about. But if we're storing it up, especially for multiple turns, there are ambiguities. For example, suppose we're changing the look of the black status line bar at the top of the text window:</p>
<!-- START CODE "c1719" -->
<a id="c1719"></a><blockquote class="code"><p class="quoted">
now the left hand status line is &quot;[time of day]&quot;;
</p></blockquote>
<!-- END CODE -->
<p>Just copying &quot;[time of day]&quot; to the &quot;left hand status line&quot; variable doesn't make it substitute - which is just as well, or the top of the screen would perpetually show &quot;9:00 AM&quot;.</p>
<p>On the other hand, looking back at the phrase example:</p>
<!-- START CODE "c1720" -->
<a id="c1720"></a><blockquote class="code"><p class="quoted">
To decide what text is (T - text) doubled:
<br />&#160;&#160;&#160;&#160;decide on &quot;[T][T]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>&quot;[T][T]&quot; is substituted immediately it's formed. That's also a good thing, because &quot;T&quot; loses its meaning the moment the phrase finishes, which would make &quot;[T][T]&quot; meaningless anywhere else.</p>
<p>What's going on here is this: Inform substitutes text immediately if it contains references to a temporary value such as &quot;T&quot;, and otherwise only if it needs to access the contents. This is why &quot;[time of day]&quot; isn't substituted until we need to print it out (or, say, access the third character): &quot;time of day&quot; is a value which always exists, not a temporary one.</p>
<p>Using the adjectives &quot;substituted&quot; and &quot;unsubstituted&quot;, it's always possible to test whether a given text is in either state, should this ever be useful. For example,</p>
<!-- START CODE "c1721" -->
<a id="c1721"></a><blockquote class="code"><p class="quoted">
now the left hand status line is &quot;[time of day]&quot;;
<br />if the left hand status line is unsubstituted, say &quot;Yes!&quot;;
</p></blockquote>
<!-- END CODE -->
<p>will say &quot;Yes!&quot;: the LHSL is like a bomb waiting to go off. Speaking of which:</p>
<!-- START CODE "c1722" -->
<a id="c1722"></a><blockquote class="code"><p class="quoted">
The player is holding a temporal bomb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1723" -->
<a id="c1723"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;Clock reads: [time of day]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1724" -->
<a id="c1724"></a><blockquote class="code"><p class="quoted">
After dropping the temporal bomb:
<br />&#160;&#160;&#160;&#160;now the left hand status line is the substituted form of the left hand status line;
<br />&#160;&#160;&#160;&#160;say &quot;Time itself is now broken. Well done.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This is making use of:</p>
<!-- START PHRASE "defn313" -->
<div class="definition"><a id="defn313"></a><p class="defnprototype"><b>substituted form of </b>(text)<b> ... text</b></p>
<!-- END PHRASE -->
<!-- definition of ph_subform -->

<p>This takes a text and makes substitution occur immediately. For example,</p>
<!-- START CODE "c1725" -->
<a id="c1725"></a><blockquote class="code"><p class="quoted">
substituted form of &quot;time of death, [time of day]&quot;
</p></blockquote>
<!-- END CODE -->
<p>produces something like &quot;time of death, 9:15 AM&quot; rather than &quot;time of death, [time of day]&quot;. It's entirely legal to apply this to text which never had any substitutions in, so</p>
<!-- START CODE "c1726" -->
<a id="c1726"></a><blockquote class="code"><p class="quoted">
substituted form of &quot;balloon&quot;
</p></blockquote>
<!-- END CODE -->
<p>produces &quot;balloon&quot;.</p>

<!-- end definition -->
</div>

<p>Note that there's no analogous phrase for &quot;unsubstituted form of...&quot;, because once text has substituted, there's no way to go back.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_20_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_20_1.html" class="standardlink">Start of Chapter 20: Advanced Text</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_20_6.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_20_6.html" class="standardlink">Back to ยง20.6. Regular expression matching</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_20_8.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_20_8.html" class="standardlink">Onward to ยง20.8. Replacements</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e278"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex278.html#e278" class="eglink"><b>416</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex278.html#e278" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mirror, Mirror</span></b></a><br />The sorcerer's mirror can, when held up high, form an impression of its surroundings which it then preserves.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex278.html#e278"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e376"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex376.html#e376" class="eglink"><b>417</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex376.html#e376" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Identity Theft</span></b></a><br />Allowing the player to enter a name to be used for the player character during the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex376.html#e376"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e15"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex15.html#e15" class="eglink"><b>418</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex15.html#e15" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Cow Exonerated</span></b></a><br />Creating a class of matches that burn for a time and then go out, with elegant reporting when several matches go out at once.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex15.html#e15"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
