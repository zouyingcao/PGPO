<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>3.1. Room Descriptions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="chapterheading">Chapter 3: Place</p>
<p class="chaptercontents"><a href="RB_3_1.html" class="standardlink"><span class="chaptercontentsitem">§3.1. Room Descriptions</span></a>; <a href="RB_3_2.html" class="standardlink"><span class="chaptercontentsitem">§3.2. Map</span></a>; <a href="RB_3_3.html" class="standardlink"><span class="chaptercontentsitem">§3.3. Position Within Rooms</span></a>; <a href="RB_3_4.html" class="standardlink"><span class="chaptercontentsitem">§3.4. Continuous Spaces and The Outdoors</span></a>; <a href="RB_3_5.html" class="standardlink"><span class="chaptercontentsitem">§3.5. Doors, Staircases, and Bridges</span></a>; <a href="RB_3_6.html" class="standardlink"><span class="chaptercontentsitem">§3.6. Windows</span></a>; <a href="RB_3_7.html" class="standardlink"><span class="chaptercontentsitem">§3.7. Lighting</span></a>; <a href="RB_3_8.html" class="standardlink"><span class="chaptercontentsitem">§3.8. Sounds</span></a>; <a href="RB_3_9.html" class="standardlink"><span class="chaptercontentsitem">§3.9. Passers-By, Weather and Astronomical Events</span></a></p><table class="centredtable"><tr><td class="roadsigndirection"><a href="RB_1_1.html" class="standardlink"><img alt="arrow-up-left.png" src="Documentation/Images/arrow-up-left.png" /></a></td><td><a href="RB_1_1.html" class="standardlink">Contents of <i>The Inform Recipe Book</i></a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_2_1.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="RB_2_1.html" class="standardlink">Chapter 2: Adaptive Prose</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_4_1.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="RB_4_1.html" class="standardlink">Chapter 4: Time and Plot</a></td></tr>
<tr><td class="roadsigndirection"><a href="examples_alphabetical.html" class="standardlink"><img alt="arrow-down-right.png" src="Documentation/Images/arrow-down-right.png" /></a></td><td><a href="examples_alphabetical.html" class="standardlink">Indexes of the examples</a></td></tr>
</table><p class="sectionheading">§3.1. Room Descriptions</p>
<p>The printing of a room description is a more delicate business than it might initially seem to be: Inform has to consider all the objects that the player might have brought into the room or dropped there, and all the objects on visible supporters, and decide how to group and list them.</p>
<p>All of this behavior is handled by the looking command, so we find the relevant rules in the carry out looking rulebook. To go through the elements step by step:</p>
<p>Looking begins by printing the name and description of the room we're in. We can introduce variations into room names and descriptions by changing their printed name and description properties, as in</p>
<!-- START CODE "c23592" -->
<a id="c23592"></a><blockquote class="code"><p class="quoted">
now the printed name of the Church is &quot;Lightning-Struck Ruin&quot;;
<br />now the description of the Church is &quot;The beams overhead have been burnt away and the pews are charred. Only the stone walls remain.&quot;;
</p></blockquote>
<!-- END CODE -->
<p>If we need more drastic effects, we can turn off or change either of these features by altering the rules in the carry out looking rulebook. For instance, to remove the name of the location entirely from room descriptions, we would write</p>
<!-- START CODE "c23593" -->
<a id="c23593"></a><blockquote class="code"><p class="quoted">
The room description heading rule is not listed in the carry out looking rules.
</p></blockquote>
<!-- END CODE -->
<p>(A word of warning: there is one other context in which the story prints a room name — when restoring a save or undoing a move. To omit the room title here too, add</p>
<!-- START CODE "c23594" -->
<a id="c23594"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a room: do nothing.)
</p></blockquote>
<!-- END CODE -->
<p><span class="boldface">Ant-Sensitive Sunglasses</span> demonstrates how to use activities to make more flexible room description text.</p>
<p>Next, the story determines what items are visible to the player and need to be described. These never include the player himself, or scenery, but other things in the environment will be made &quot;marked for listing&quot;. This is also the stage at which Inform chooses the order in which items will be listed.</p>
<p>We are allowed to meddle by changing the priorities of objects, in case we want some things to be described to the player first or last in the room description; <span class="boldface">Priority Lab</span> goes into detail about how. We can also force things to be left out entirely: <span class="boldface">Low Light</span> handles the case of an object that can only be seen when an extra lamp is switched on, even though the room is not otherwise considered dark. <span class="boldface">Copper River</span> implements the idea of &quot;interesting&quot; and &quot;dull&quot; objects: the story determines which items are currently important to the puzzles or narrative and mentions those in the room description, while suppressing everything else.</p>
<p>Then Inform carries out the writing a paragraph about... activity with anything that provides one; anything it prints the name of, it tags &quot;mentioned&quot;. Thus</p>
<!-- START CODE "c23595" -->
<a id="c23595"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about Mr Wickham:
<br />&#160;&#160;&#160;&#160;say &quot;Mr Wickham looks speculatively at [list of women in the location].&quot;
</p></blockquote>
<!-- END CODE -->
<p>will count Wickham and everyone he looks at as all having been mentioned, and will not refer to them again through the rest of the room description. More complicated uses of writing a paragraph abound. A developed system for handling supporters that don't list contents appears in <span class="boldface">The Eye of the Idol</span>.</p>
<p>Inform then prints the initial appearances of objects that are marked for listing but not already mentioned; and then it performs the listing nondescript items activity, collating the remaining objects into a paragraph like</p>
<!-- START CODE "c23596" -->
<a id="c23596"></a><blockquote class="code"><p class="quoted">
You can see a dog, a hen, ...
</p></blockquote>
<!-- END CODE -->
<p>We can pre-empt items from appearing in this paragraph or change their listing by intervening with a Before listing nondescript items... rule, as in</p>
<!-- START CODE "c23597" -->
<a id="c23597"></a><blockquote class="code"><p class="quoted">
Before listing nondescript items when the player needs the watch:
<br />&#160;&#160;&#160;&#160;if the watch is marked for listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The watch catches your eye.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the watch is not marked for listing.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted the watch always to be listed this way, it would be better to give it an initial appearance, but for conditional cases, the listing nondescript items activity is a good place to intervene. For instance, <span class="boldface">Rip</span> uses this activity to incorporate changeable or portable items into the main description text for a room when (and only when) that is appropriate.</p>
<p>The listing nondescript items activity also allows us to replace the &quot;You can see...&quot; tag with something else more fitting, if for instance we are in a dimly lit room.</p>
<p>When the story compiles the list of nondescript items, it adds tags such as &quot;(open)&quot; or &quot;(empty)&quot; or &quot;(on which is a fish tank)&quot; to the names of containers and supporters. We can suppress or change the &quot;(empty)&quot; tag with the printing room description details of activity, as in</p>
<!-- START CODE "c23598" -->
<a id="c23598"></a><blockquote class="code"><p class="quoted">
Rule for printing room description details: stop.
</p></blockquote>
<!-- END CODE -->
<p>And we can suppress the &quot;(open)&quot; and &quot;(on which is...)&quot; sorts of tags with the &quot;omit the contents in listing&quot; phrase, as in</p>
<!-- START CODE "c23599" -->
<a id="c23599"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of the bottle while not inserting or removing:
<br />&#160;&#160;&#160;&#160;if the bottle contains sand, say &quot;bottle of sand&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;empty bottle&quot;;
<br />&#160;&#160;&#160;&#160;omit contents in listing.
</p></blockquote>
<!-- END CODE -->
<p>Finally, the looking command lists visible non-scenery items that sit on scenery supporters, as in</p>
<!-- START CODE "c23600" -->
<a id="c23600"></a><blockquote class="code"><p class="quoted">
On the table is a folded newspaper.
</p></blockquote>
<!-- END CODE -->
<p>These paragraphs can be manipulated with the printing the locale description activity and the printing a locale paragraph about activity.</p>
<p>Another common thing we may want to do is change the description of a room depending on whether we've been there before (as in <span class="boldface">Slightly Wrong</span>) or on how often we've visited (as in <span class="boldface">Infiltration</span>). <span class="boldface">Night Sky</span>, meanwhile, changes the description of a room when we've examined another object, so that the player's awareness of his environment is affected by other things the character knows.</p>
<p class="crossreference"><a href="RB_6_4.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Looking</b></a><i> for ways to change the default length of room descriptions</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_3_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="RB_3_1.html" class="standardlink">Start of Chapter 3: Place</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_2_3.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="RB_2_3.html" class="standardlink">Back to Chapter 2: Adaptive Prose: §2.3. Using the Player's Input</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_3_2.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="RB_3_2.html" class="standardlink">Onward to §3.2. Map</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e266"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex266.html#e266" class="eglink"><b>147</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex266.html#e266" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Night Sky</span></b></a><br />A room which changes its description depending on whether an object has been examined.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex266.html#e266"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e224"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex224.html#e224" class="eglink"><b>152</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex224.html#e224" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Infiltration</span></b></a><br />A room whose description changes depending on the number of times the player has visited.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex224.html#e224"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e152"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex152.html#e152" class="eglink"><b>334</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex152.html#e152" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Ant-Sensitive Sunglasses</span></b></a><br />What are activities good for? Controlling output when we want the same action to be able to produce very flexible text depending on the state of the world -- in this case, making highly variable room description and object description text.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex152.html#e152"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e116"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex116.html#e116" class="eglink"><b>355</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex116.html#e116" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Rip Van Winkle</span></b></a><br />A simple way to allow objects in certain places to be described in the room description body text rather than in paragraphs following the room description.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex116.html#e116"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e150"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="RB_3_1.html#e150" class="eglink"><b>358</b></a></div>
<div class="egpanel" id="example150">
<p>When it comes time to start manipulating the priorities of items, it is useful to be able to check the table for debugging purposes; the problem is that printing the names of the objects can itself affect the way the room description is generated, foiling our debugging efforts.</p>
<p>What follows is a rule to help with debugging safely, and a sample of how priorities work:</p>
<!-- START CODE "c28215" -->
<a id="c28215"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Priority Lab[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Before printing the locale description (this is the dump locale table rule):[=0x000A=][=0x0009=]say [=0x0022=]Locale Priority list:[=0x0022=];[=0x000A=][=0x0009=]repeat through Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=]let the flag be whether or not the notable-object entry is mentioned;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break]  [notable-object entry]: [locale description priority entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if the flag is false, now the notable-object entry is not mentioned;[=0x000A=][=0x0009=]say line break.[=0x000A=][=0x000A=][Now, let[=0x0027=]s look at some items put in a specific order. Things with low priority numbers list towards the beginning; things with high priority numbers list towards the end. (It helps to think of it as though we were making a numbered list of the paragraphs to appear in the description.) Anything numbered 0 doesn[=0x0027=]t appear at all, and the default priority of an object is 1.][=0x000A=][=0x000A=]A thing can be early-described, late-described, latest-described, never-described, sightline-described, or ordinarily-described. A thing is usually ordinarily-described.[=0x000A=][=0x000A=]After choosing notable locale objects (this is the apply early and late description rule):[=0x000A=][=0x0009=]repeat with item running through early-described things:[=0x000A=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 1; [list before everything else -- this would work with any number lower than 5 and higher than 0][=0x000A=][=0x0009=]repeat with item running through late-described things:[=0x000A=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 10; [list after everything else -- this would work with any number larger than 5][=0x000A=][=0x0009=]repeat with item running through never-described things:[=0x000A=][=0x0009=][=0x0009=]set the locale priority of the item to 0; [don[=0x0027=]t list at all][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][An important cautionary note: priorities are only honored if the objects are going to get their own paragraphs (with [=0x0022=]writing a paragraph about...[=0x0022=] or because they have initial appearances). Priorities do not affect the order in which items appear in the final [=0x0022=]You can see...[=0x0022=] list, except that items with priority 0 or lower are omitted. (If we want to order the items in that list, we may want to resort to the Complex Listing extension by Emily Short.)][=0x000A=][=0x000A=][There are further refinements available to us: for instance, we could make some things that are only visible if the player is raised above ground level.][=0x000A=][=0x000A=]After choosing notable locale objects (this is the sightline-described things are visible from supporters rule):[=0x000A=][=0x0009=]if the player is not on a supporter:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through sightline-described things:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 0; [remove objects that can only be seen from higher objects.][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][=0x000A=][It may also be useful to know about the [=0x0022=]parameter-object[=0x0022=], which refers to the thing whose contents we are currently describing: the standard rules consider how to describe the contents of the location and then also check the contents of any supporter or container the player may be inside, so in the first case [=0x0022=]parameter-object[=0x0022=] would be the location, and then in the second the supporter in question.][=0x000A=][=0x000A=][In practice this is rarely useful, but should we need to change priorities in the case of both player and object being inside a particular container, we might make use of it, for instance:][=0x000A=][=0x000A=]A thing can be tasteful or icky. A thing is usually tasteful.[=0x000A=][=0x000A=]After choosing notable locale objects (this is the icky things next to players rule):[=0x000A=][=0x0009=]if the player is on the parameter-object:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through icky things :[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 10; [remove objects that can only be seen from higher objects.][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][The other thing to note is that by default that final collection of generic objects ([=0x0022=]You can also see...[=0x0022=]) appears at the end, regardless of the priority of everything else. If we really wanted to, though, we could force something to appear even after that paragraph, by adding a new listing rule to the locale description rules:][=0x000A=][=0x000A=]After choosing notable locale objects (this is the latest-described items priority rule):[=0x000A=][=0x0009=]repeat with item running through latest-described things:[=0x000A=][=0x0009=][=0x0009=]if the item is a notable-object listed in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is mentioned;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is marked for late listing.[=0x000A=][=0x000A=]The late listing rule is listed after the you-can-also-see rule in the for printing the locale description rules.[=0x000A=][=0x000A=]A thing can be marked for late listing. A thing is usually not marked for late listing.[=0x000A=][=0x000A=]This is the late listing rule:[=0x000A=][=0x0009=]if something is marked for late listing:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Oh! And also [a list of things which are marked for late listing].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now everything is not marked for late listing;[=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Priority Lab is a room. The early bird, the worm, the leaf, the unseen object, the pebble, the twig, and the late edition are things in the Priority Lab.[=0x000A=][=0x000A=]The early bird is early-described. The late edition is late-described. The unseen object is never-described.[=0x000A=][=0x000A=]The worm is icky.[=0x000A=][=0x000A=]The high window is in Priority Lab. It is sightline-described and fixed in place. The initial appearance of the high window is [=0x0022=]There[=0x0027=]s a tiny high window up near the ceiling that you can[=0x0027=]t see unless you[=0x0027=]re on top of something.[=0x0022=][=0x000A=][=0x000A=][In order for the priorities we just set to be interesting, let[=0x0027=]s give out some initial appearances and writing a paragraph rules:][=0x000A=][=0x000A=]The initial appearance of the worm is [=0x0022=]A worm inches along the ground.[=0x0022=][=0x000A=]The initial appearance of the late edition is [=0x0022=]Finally, the late edition lies at your feet.[=0x0022=][=0x000A=][=0x000A=]Rule for writing a paragraph about the early bird when the early bird is in a room: say [=0x0022=]The early bird always appears first, and here it is.[=0x0022=][=0x000A=]Rule for writing a paragraph about the leaf: say [=0x0022=]Look, there[=0x0027=]s [a leaf][unless the leaf is in the location] on [the holder of the leaf][end if]![=0x0022=][=0x000A=]Rule for writing a paragraph about an icky thing (called icky item) which is on something which supports the player: say [=0x0022=]Ew, [an icky item] is right next to you.[=0x0022=][=0x000A=][=0x000A=][This procedure also means (as you can test by experiment) that after the late edition has been picked up and dropped again, it lists in no special order in the [=0x0022=]you can see...[=0x0022=] paragraph (since initial appearances only print when the object has not yet been moved).][=0x000A=][=0x000A=]The afterthought is a thing in the Priority Lab. It is latest-described.[=0x000A=][=0x000A=]The bar stool is an enterable supporter in Priority Lab.[=0x000A=][=0x000A=]Test me with [=0x0022=]get leaf / drop leaf / look / x unseen object / get pebble / look / get twig / look / get afterthought / look / drop twig / look / get late edition / look / drop late edition / sit on bar stool / look / get all / put all on stool / look[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Priority Lab&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28216" -->
<a id="c28216"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28217" -->
<a id="c28217"></a><blockquote class="code"><p class="quoted">
Before printing the locale description (this is the dump locale table rule):
<br />&#160;&#160;&#160;&#160;say &quot;Locale Priority list:&quot;;
<br />&#160;&#160;&#160;&#160;repeat through Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the flag be whether or not the notable-object entry is mentioned;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]  [notable-object entry]: [locale description priority entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the flag is false, now the notable-object entry is not mentioned;
<br />&#160;&#160;&#160;&#160;say line break.
</p></blockquote>
<!-- END CODE -->
<p>Now, let's look at some items put in a specific order. Things with low priority numbers list towards the beginning; things with high priority numbers list towards the end. (It helps to think of it as though we were making a numbered list of the paragraphs to appear in the description.) Anything numbered 0 doesn't appear at all, and the default priority of an object is 1.</p>
<!-- START CODE "c28218" -->
<a id="c28218"></a><blockquote class="code"><p class="quoted">
A thing can be early-described, late-described, latest-described, never-described, sightline-described, or ordinarily-described. A thing is usually ordinarily-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28219" -->
<a id="c28219"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the apply early and late description rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through early-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 1; [list before everything else -- this would work with any number lower than 5 and higher than 0]
<br />&#160;&#160;&#160;&#160;repeat with item running through late-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 10; [list after everything else -- this would work with any number larger than 5]
<br />&#160;&#160;&#160;&#160;repeat with item running through never-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 0; [don't list at all]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>An important cautionary note: priorities are only honored if the objects are going to get their own paragraphs (with &quot;writing a paragraph about...&quot; or because they have initial appearances). Priorities do not affect the order in which items appear in the final &quot;You can see...&quot; list, except that items with priority 0 or lower are omitted. (If we want to order the items in that list, we may want to resort to the Complex Listing extension by Emily Short.)</p>
<p>There are further refinements available to us: for instance, we could make some things that are only visible if the player is raised above ground level.</p>
<!-- START CODE "c28220" -->
<a id="c28220"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the sightline-described things are visible from supporters rule):
<br />&#160;&#160;&#160;&#160;if the player is not on a supporter:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through sightline-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 0; [remove objects that can only be seen from higher objects.]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>It may also be useful to know about the &quot;parameter-object&quot;, which refers to the thing whose contents we are currently describing: the standard rules consider how to describe the contents of the location and then also check the contents of any supporter or container the player may be inside, so in the first case &quot;parameter-object&quot; would be the location, and then in the second the supporter in question.</p>
<p>In practice this is rarely useful, but should we need to change priorities in the case of both player and object being inside a particular container, we might make use of it, for instance:</p>
<!-- START CODE "c28221" -->
<a id="c28221"></a><blockquote class="code"><p class="quoted">
A thing can be tasteful or icky. A thing is usually tasteful.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28222" -->
<a id="c28222"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the icky things next to players rule):
<br />&#160;&#160;&#160;&#160;if the player is on the parameter-object:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through icky things :
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 10; [remove objects that can only be seen from higher objects.]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>The other thing to note is that by default that final collection of generic objects (&quot;You can also see...&quot;) appears at the end, regardless of the priority of everything else. If we really wanted to, though, we could force something to appear even after that paragraph, by adding a new listing rule to the locale description rules:</p>
<!-- START CODE "c28223" -->
<a id="c28223"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the latest-described items priority rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through latest-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is a notable-object listed in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is mentioned;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is marked for late listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28224" -->
<a id="c28224"></a><blockquote class="code"><p class="quoted">
The late listing rule is listed after the you-can-also-see rule in the for printing the locale description rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28225" -->
<a id="c28225"></a><blockquote class="code"><p class="quoted">
A thing can be marked for late listing. A thing is usually not marked for late listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28226" -->
<a id="c28226"></a><blockquote class="code"><p class="quoted">
This is the late listing rule:
<br />&#160;&#160;&#160;&#160;if something is marked for late listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Oh! And also [a list of things which are marked for late listing].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now everything is not marked for late listing;
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28227" -->
<a id="c28227"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28228" -->
<a id="c28228"></a><blockquote class="code"><p class="quoted">
The Priority Lab is a room. The early bird, the worm, the leaf, the unseen object, the pebble, the twig, and the late edition are things in the Priority Lab.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28229" -->
<a id="c28229"></a><blockquote class="code"><p class="quoted">
The early bird is early-described. The late edition is late-described. The unseen object is never-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28230" -->
<a id="c28230"></a><blockquote class="code"><p class="quoted">
The worm is icky.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28231" -->
<a id="c28231"></a><blockquote class="code"><p class="quoted">
The high window is in Priority Lab. It is sightline-described and fixed in place. The initial appearance of the high window is &quot;There's a tiny high window up near the ceiling that you can't see unless you're on top of something.&quot;
</p></blockquote>
<!-- END CODE -->
<p>In order for the priorities we just set to be interesting, let's give out some initial appearances and writing a paragraph rules:</p>
<!-- START CODE "c28232" -->
<a id="c28232"></a><blockquote class="code"><p class="quoted">
The initial appearance of the worm is &quot;A worm inches along the ground.&quot;
<br />The initial appearance of the late edition is &quot;Finally, the late edition lies at your feet.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28233" -->
<a id="c28233"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about the early bird when the early bird is in a room: say &quot;The early bird always appears first, and here it is.&quot;
<br />Rule for writing a paragraph about the leaf: say &quot;Look, there's [a leaf][unless the leaf is in the location] on [the holder of the leaf][end if]!&quot;
<br />Rule for writing a paragraph about an icky thing (called icky item) which is on something which supports the player: say &quot;Ew, [an icky item] is right next to you.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This procedure also means (as you can test by experiment) that after the late edition has been picked up and dropped again, it lists in no special order in the &quot;you can see...&quot; paragraph (since initial appearances only print when the object has not yet been moved).</p>
<!-- START CODE "c28234" -->
<a id="c28234"></a><blockquote class="code"><p class="quoted">
The afterthought is a thing in the Priority Lab. It is latest-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28235" -->
<a id="c28235"></a><blockquote class="code"><p class="quoted">
The bar stool is an enterable supporter in Priority Lab.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28236" -->
<a id="c28236"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get leaf / drop leaf / look / x unseen object / get pebble / look / get twig / look / get afterthought / look / drop twig / look / get late edition / look / drop late edition / sit on bar stool / look / get all / put all on stool / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_3_1.html#e150" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Priority Lab</span></b></a><br />A debugging rule useful for checking the priorities of objects about to be listed.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example150">
<p>When it comes time to start manipulating the priorities of items, it is useful to be able to check the table for debugging purposes; the problem is that printing the names of the objects can itself affect the way the room description is generated, foiling our debugging efforts.</p>
<p>What follows is a rule to help with debugging safely, and a sample of how priorities work:</p>
<!-- START CODE "c28237" -->
<a id="c28237"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Priority Lab[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Before printing the locale description (this is the dump locale table rule):[=0x000A=][=0x0009=]say [=0x0022=]Locale Priority list:[=0x0022=];[=0x000A=][=0x0009=]repeat through Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=]let the flag be whether or not the notable-object entry is mentioned;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break]  [notable-object entry]: [locale description priority entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if the flag is false, now the notable-object entry is not mentioned;[=0x000A=][=0x0009=]say line break.[=0x000A=][=0x000A=][Now, let[=0x0027=]s look at some items put in a specific order. Things with low priority numbers list towards the beginning; things with high priority numbers list towards the end. (It helps to think of it as though we were making a numbered list of the paragraphs to appear in the description.) Anything numbered 0 doesn[=0x0027=]t appear at all, and the default priority of an object is 1.][=0x000A=][=0x000A=]A thing can be early-described, late-described, latest-described, never-described, sightline-described, or ordinarily-described. A thing is usually ordinarily-described.[=0x000A=][=0x000A=]After choosing notable locale objects (this is the apply early and late description rule):[=0x000A=][=0x0009=]repeat with item running through early-described things:[=0x000A=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 1; [list before everything else -- this would work with any number lower than 5 and higher than 0][=0x000A=][=0x0009=]repeat with item running through late-described things:[=0x000A=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 10; [list after everything else -- this would work with any number larger than 5][=0x000A=][=0x0009=]repeat with item running through never-described things:[=0x000A=][=0x0009=][=0x0009=]set the locale priority of the item to 0; [don[=0x0027=]t list at all][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][An important cautionary note: priorities are only honored if the objects are going to get their own paragraphs (with [=0x0022=]writing a paragraph about...[=0x0022=] or because they have initial appearances). Priorities do not affect the order in which items appear in the final [=0x0022=]You can see...[=0x0022=] list, except that items with priority 0 or lower are omitted. (If we want to order the items in that list, we may want to resort to the Complex Listing extension by Emily Short.)][=0x000A=][=0x000A=][There are further refinements available to us: for instance, we could make some things that are only visible if the player is raised above ground level.][=0x000A=][=0x000A=]After choosing notable locale objects (this is the sightline-described things are visible from supporters rule):[=0x000A=][=0x0009=]if the player is not on a supporter:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through sightline-described things:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 0; [remove objects that can only be seen from higher objects.][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][=0x000A=][It may also be useful to know about the [=0x0022=]parameter-object[=0x0022=], which refers to the thing whose contents we are currently describing: the standard rules consider how to describe the contents of the location and then also check the contents of any supporter or container the player may be inside, so in the first case [=0x0022=]parameter-object[=0x0022=] would be the location, and then in the second the supporter in question.][=0x000A=][=0x000A=][In practice this is rarely useful, but should we need to change priorities in the case of both player and object being inside a particular container, we might make use of it, for instance:][=0x000A=][=0x000A=]A thing can be tasteful or icky. A thing is usually tasteful.[=0x000A=][=0x000A=]After choosing notable locale objects (this is the icky things next to players rule):[=0x000A=][=0x0009=]if the player is on the parameter-object:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through icky things :[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 10; [remove objects that can only be seen from higher objects.][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][The other thing to note is that by default that final collection of generic objects ([=0x0022=]You can also see...[=0x0022=]) appears at the end, regardless of the priority of everything else. If we really wanted to, though, we could force something to appear even after that paragraph, by adding a new listing rule to the locale description rules:][=0x000A=][=0x000A=]After choosing notable locale objects (this is the latest-described items priority rule):[=0x000A=][=0x0009=]repeat with item running through latest-described things:[=0x000A=][=0x0009=][=0x0009=]if the item is a notable-object listed in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is mentioned;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is marked for late listing.[=0x000A=][=0x000A=]The late listing rule is listed after the you-can-also-see rule in the for printing the locale description rules.[=0x000A=][=0x000A=]A thing can be marked for late listing. A thing is usually not marked for late listing.[=0x000A=][=0x000A=]This is the late listing rule:[=0x000A=][=0x0009=]if something is marked for late listing:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Oh! And also [a list of things which are marked for late listing].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now everything is not marked for late listing;[=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Priority Lab is a room. The early bird, the worm, the leaf, the unseen object, the pebble, the twig, and the late edition are things in the Priority Lab.[=0x000A=][=0x000A=]The early bird is early-described. The late edition is late-described. The unseen object is never-described.[=0x000A=][=0x000A=]The worm is icky.[=0x000A=][=0x000A=]The high window is in Priority Lab. It is sightline-described and fixed in place. The initial appearance of the high window is [=0x0022=]There[=0x0027=]s a tiny high window up near the ceiling that you can[=0x0027=]t see unless you[=0x0027=]re on top of something.[=0x0022=][=0x000A=][=0x000A=][In order for the priorities we just set to be interesting, let[=0x0027=]s give out some initial appearances and writing a paragraph rules:][=0x000A=][=0x000A=]The initial appearance of the worm is [=0x0022=]A worm inches along the ground.[=0x0022=][=0x000A=]The initial appearance of the late edition is [=0x0022=]Finally, the late edition lies at your feet.[=0x0022=][=0x000A=][=0x000A=]Rule for writing a paragraph about the early bird when the early bird is in a room: say [=0x0022=]The early bird always appears first, and here it is.[=0x0022=][=0x000A=]Rule for writing a paragraph about the leaf: say [=0x0022=]Look, there[=0x0027=]s [a leaf][unless the leaf is in the location] on [the holder of the leaf][end if]![=0x0022=][=0x000A=]Rule for writing a paragraph about an icky thing (called icky item) which is on something which supports the player: say [=0x0022=]Ew, [an icky item] is right next to you.[=0x0022=][=0x000A=][=0x000A=][This procedure also means (as you can test by experiment) that after the late edition has been picked up and dropped again, it lists in no special order in the [=0x0022=]you can see...[=0x0022=] paragraph (since initial appearances only print when the object has not yet been moved).][=0x000A=][=0x000A=]The afterthought is a thing in the Priority Lab. It is latest-described.[=0x000A=][=0x000A=]The bar stool is an enterable supporter in Priority Lab.[=0x000A=][=0x000A=]Test me with [=0x0022=]get leaf / drop leaf / look / x unseen object / get pebble / look / get twig / look / get afterthought / look / drop twig / look / get late edition / look / drop late edition / sit on bar stool / look / get all / put all on stool / look[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Priority Lab&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28238" -->
<a id="c28238"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28239" -->
<a id="c28239"></a><blockquote class="code"><p class="quoted">
Before printing the locale description (this is the dump locale table rule):
<br />&#160;&#160;&#160;&#160;say &quot;Locale Priority list:&quot;;
<br />&#160;&#160;&#160;&#160;repeat through Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the flag be whether or not the notable-object entry is mentioned;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]  [notable-object entry]: [locale description priority entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the flag is false, now the notable-object entry is not mentioned;
<br />&#160;&#160;&#160;&#160;say line break.
</p></blockquote>
<!-- END CODE -->
<p>Now, let's look at some items put in a specific order. Things with low priority numbers list towards the beginning; things with high priority numbers list towards the end. (It helps to think of it as though we were making a numbered list of the paragraphs to appear in the description.) Anything numbered 0 doesn't appear at all, and the default priority of an object is 1.</p>
<!-- START CODE "c28240" -->
<a id="c28240"></a><blockquote class="code"><p class="quoted">
A thing can be early-described, late-described, latest-described, never-described, sightline-described, or ordinarily-described. A thing is usually ordinarily-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28241" -->
<a id="c28241"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the apply early and late description rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through early-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 1; [list before everything else -- this would work with any number lower than 5 and higher than 0]
<br />&#160;&#160;&#160;&#160;repeat with item running through late-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 10; [list after everything else -- this would work with any number larger than 5]
<br />&#160;&#160;&#160;&#160;repeat with item running through never-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 0; [don't list at all]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>An important cautionary note: priorities are only honored if the objects are going to get their own paragraphs (with &quot;writing a paragraph about...&quot; or because they have initial appearances). Priorities do not affect the order in which items appear in the final &quot;You can see...&quot; list, except that items with priority 0 or lower are omitted. (If we want to order the items in that list, we may want to resort to the Complex Listing extension by Emily Short.)</p>
<p>There are further refinements available to us: for instance, we could make some things that are only visible if the player is raised above ground level.</p>
<!-- START CODE "c28242" -->
<a id="c28242"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the sightline-described things are visible from supporters rule):
<br />&#160;&#160;&#160;&#160;if the player is not on a supporter:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through sightline-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 0; [remove objects that can only be seen from higher objects.]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>It may also be useful to know about the &quot;parameter-object&quot;, which refers to the thing whose contents we are currently describing: the standard rules consider how to describe the contents of the location and then also check the contents of any supporter or container the player may be inside, so in the first case &quot;parameter-object&quot; would be the location, and then in the second the supporter in question.</p>
<p>In practice this is rarely useful, but should we need to change priorities in the case of both player and object being inside a particular container, we might make use of it, for instance:</p>
<!-- START CODE "c28243" -->
<a id="c28243"></a><blockquote class="code"><p class="quoted">
A thing can be tasteful or icky. A thing is usually tasteful.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28244" -->
<a id="c28244"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the icky things next to players rule):
<br />&#160;&#160;&#160;&#160;if the player is on the parameter-object:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through icky things :
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 10; [remove objects that can only be seen from higher objects.]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>The other thing to note is that by default that final collection of generic objects (&quot;You can also see...&quot;) appears at the end, regardless of the priority of everything else. If we really wanted to, though, we could force something to appear even after that paragraph, by adding a new listing rule to the locale description rules:</p>
<!-- START CODE "c28245" -->
<a id="c28245"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the latest-described items priority rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through latest-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is a notable-object listed in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is mentioned;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is marked for late listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28246" -->
<a id="c28246"></a><blockquote class="code"><p class="quoted">
The late listing rule is listed after the you-can-also-see rule in the for printing the locale description rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28247" -->
<a id="c28247"></a><blockquote class="code"><p class="quoted">
A thing can be marked for late listing. A thing is usually not marked for late listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28248" -->
<a id="c28248"></a><blockquote class="code"><p class="quoted">
This is the late listing rule:
<br />&#160;&#160;&#160;&#160;if something is marked for late listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Oh! And also [a list of things which are marked for late listing].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now everything is not marked for late listing;
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28249" -->
<a id="c28249"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28250" -->
<a id="c28250"></a><blockquote class="code"><p class="quoted">
The Priority Lab is a room. The early bird, the worm, the leaf, the unseen object, the pebble, the twig, and the late edition are things in the Priority Lab.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28251" -->
<a id="c28251"></a><blockquote class="code"><p class="quoted">
The early bird is early-described. The late edition is late-described. The unseen object is never-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28252" -->
<a id="c28252"></a><blockquote class="code"><p class="quoted">
The worm is icky.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28253" -->
<a id="c28253"></a><blockquote class="code"><p class="quoted">
The high window is in Priority Lab. It is sightline-described and fixed in place. The initial appearance of the high window is &quot;There's a tiny high window up near the ceiling that you can't see unless you're on top of something.&quot;
</p></blockquote>
<!-- END CODE -->
<p>In order for the priorities we just set to be interesting, let's give out some initial appearances and writing a paragraph rules:</p>
<!-- START CODE "c28254" -->
<a id="c28254"></a><blockquote class="code"><p class="quoted">
The initial appearance of the worm is &quot;A worm inches along the ground.&quot;
<br />The initial appearance of the late edition is &quot;Finally, the late edition lies at your feet.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28255" -->
<a id="c28255"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about the early bird when the early bird is in a room: say &quot;The early bird always appears first, and here it is.&quot;
<br />Rule for writing a paragraph about the leaf: say &quot;Look, there's [a leaf][unless the leaf is in the location] on [the holder of the leaf][end if]!&quot;
<br />Rule for writing a paragraph about an icky thing (called icky item) which is on something which supports the player: say &quot;Ew, [an icky item] is right next to you.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This procedure also means (as you can test by experiment) that after the late edition has been picked up and dropped again, it lists in no special order in the &quot;you can see...&quot; paragraph (since initial appearances only print when the object has not yet been moved).</p>
<!-- START CODE "c28256" -->
<a id="c28256"></a><blockquote class="code"><p class="quoted">
The afterthought is a thing in the Priority Lab. It is latest-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28257" -->
<a id="c28257"></a><blockquote class="code"><p class="quoted">
The bar stool is an enterable supporter in Priority Lab.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c28258" -->
<a id="c28258"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get leaf / drop leaf / look / x unseen object / get pebble / look / get twig / look / get afterthought / look / drop twig / look / get late edition / look / drop late edition / sit on bar stool / look / get all / put all on stool / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<a  href="ex150.html#e150"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e93"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex93.html#e93" class="eglink"><b>359</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex93.html#e93" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Low Light</span></b></a><br />An object that is only visible and manipulable when a bright light fixture is on.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex93.html#e93"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e97"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex97.html#e97" class="eglink"><b>4</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex97.html#e97" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Slightly Wrong</span></b></a><br />A room whose description changes slightly after our first visit there.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex97.html#e97"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e156"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex156.html#e156" class="eglink"><b>356</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex156.html#e156" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Eye of the Idol</span></b></a><br />A systematic way to allow objects in certain places to be described in the room description body text rather than in paragraphs following the room description, and to control whether supporters list their contents or not.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex156.html#e156"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e90"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex90.html#e90" class="eglink"><b>362</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex90.html#e90" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Copper River</span></b></a><br />Manipulating room descriptions so that only interesting items are mentioned, while objects that are present but not currently useful to the player are ignored.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex90.html#e90"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
