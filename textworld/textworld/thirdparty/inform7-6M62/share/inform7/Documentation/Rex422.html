<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>11.4. Scoring</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง11.4. Scoring</p>
<p>Not every work of IF allots a numerical score to the player: for some authors, this emphasises the idea of a story rather than a narrative. The simple sentence</p>
<!-- START CODE "c23738" -->
<a id="c23738"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<p>introduces the concept. Once this is included, Inform will provide built-in support for a single number measuring progress (&quot;score&quot;), and will expect to measure this against a maximum possible (&quot;maximum score&quot;, which can either be set by hand or worked out automatically from a table of ranks).</p>
<p>In a story in which scoring exists, the player may choose to turn score notifications (such as &quot;[Your score has just gone up by one point.]&quot;) on or off. The commands to do this are NOTIFY ON and NOTIFY OFF; the actions are called switching score notification on and switching score notification off. In the event that we need to amend the behavior of notification, we could do so by adding, removing, or modifying the elements of the check and carry out rulebooks for these commands; as in</p>
<!-- START CODE "c23739" -->
<a id="c23739"></a><blockquote class="code"><p class="quoted">
Check switching score notification off:
<br />&#160;&#160;&#160;&#160;if the turn count is less than 10:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are still a novice, grasshopper. Allow your teacher to give you advice until such time as you are ready to go on alone.&quot;
</p></blockquote>
<!-- END CODE -->
<p>If we wish to change the wording of the default message (&quot;[Your score has...&quot;), we may want to use the Responses system.</p>
<p>An especially insidious style of bug allows the player to type the same sequence of commands over and over, earning score endlessly for the same insight, and to avoid this it is usually safest to write source like:</p>
<!-- START CODE "c23740" -->
<a id="c23740"></a><blockquote class="code"><p class="quoted">
After taking the Picasso miniature when the Picasso miniature is not handled:
<br />&#160;&#160;&#160;&#160;increase the score by 10;
<br />&#160;&#160;&#160;&#160;say &quot;As they say in Montmartre: dude!&quot;
</p></blockquote>
<!-- END CODE -->
<p>We might also write our condition with &quot;for the first time&quot;, like so:</p>
<!-- START CODE "c23741" -->
<a id="c23741"></a><blockquote class="code"><p class="quoted">
After jumping for the first time:
<br />&#160;&#160;&#160;&#160;increase the score by 5;
<br />&#160;&#160;&#160;&#160;say &quot;Boing! That was certainly entertaining.&quot;
</p></blockquote>
<!-- END CODE -->
<p>But we should be careful not to use &quot;for the first time&quot; in scoring situations where it's possible for the player to try the action but fail. Inform counts even unsuccessful attempts towards the number of times an action is understood to have occurred, so if the player tries to jump and fails, his &quot;for the first time&quot; will be used up and he will never receive the score points.</p>
<p>If there are many &quot;treasure&quot; items like the Picasso miniature, it is best to be systematic, as in <span class="boldface">No Place Like Home</span>. <span class="boldface">Bosch</span> takes another approach to the same idea, by creating a table of point-earning actions that the player will be rewarded for doing; the FULL SCORE command will then play these back.</p>
<p><span class="boldface">Mutt's Adventure</span> demonstrates how we might add a scored room feature, such that the player earns a point when he first arrives at a special room.</p>
<p>A single number does not really sum up a life, or even an afternoon, and <span class="boldface">Goat-Cheese and Sage Chicken</span> and <span class="boldface">Panache</span> offer more detailed citations. Works that are more story than story may prefer to offer a plot summary of the player's experience to date in lieu of more conventional scoring.</p>
<p>Finally, <span class="boldface">Rubies</span> provides a scoreboard that keeps track of the ten highest-scoring players from one playthrough to the next.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_11_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="RB_11_1.html" class="standardlink">Start of Chapter 11: Out Of World Actions and Effects</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_11_3.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="RB_11_3.html" class="standardlink">Back to ยง11.3. Helping and Hinting</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_11_5.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="RB_11_5.html" class="standardlink">Onward to ยง11.5. Settings and Status Checks During Play</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e32"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex32.html#e32" class="eglink"><b>219</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex32.html#e32" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Bosch</span></b></a><br />Creating a list of actions that will earn the player points, and using this both to change the score and to give FULL SCORE reports.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex32.html#e32"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e177"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex177.html#e177" class="eglink"><b>136</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex177.html#e177" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mutt's Adventure</span></b></a><br />Awarding points for visiting a room for the first time.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex177.html#e177"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e368"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex368.html#e368" class="eglink"><b>137</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex368.html#e368" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">No Place Like Home</span></b></a><br />Recording a whole table of scores for specific treasures.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex368.html#e368"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e139"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex139.html#e139" class="eglink"><b>166</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex139.html#e139" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Panache</span></b></a><br />Replacing the score with a plot summary that records the events of the plot, scene by scene.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex139.html#e139"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e169"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex169.html#e169" class="eglink"><b>280</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex169.html#e169" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Goat-Cheese and Sage Chicken</span></b></a><br />Implementing a FULL SCORE command which lists more information than the regular SCORE command, adding times and rankings, as an extension of the example given in this chapter.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex169.html#e169"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e422"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="RB_11_4.html#e422" class="eglink"><b>442</b></a></div>
<div class="egpanel" id="example422">
<p>The trick here is that we need a table with text in order to keep track of the players' names.</p>
<p>Part 1 largely replicates the source from &quot;Identity Theft&quot;; new material starts at Part 2.</p>
<!-- START CODE "c37155" -->
<a id="c37155"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Rubies[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Part 1 - Collecting Names[=0x000A=][=0x000A=]The player[=0x0027=]s forename is a text that varies. The player[=0x0027=]s full name is a text that varies.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=].[=0x000A=][=0x000A=]To decide whether collecting names:[=0x000A=][=0x0009=]if the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=], yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]After reading a command when collecting names:[=0x000A=][=0x0009=]if the number of words in the player[=0x0027=]s command is greater than 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][paragraph break]Who are you, a member of the British royal family? No one has that many names. Let[=0x0027=]s try this again.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s full name is the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s forename is word number 1 in the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the command prompt is [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]Hi, [player[=0x0027=]s forename]![=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][banner text][=0x0022=];[=0x000A=][=0x0009=]move the player to the location;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]Instead of looking when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for printing the banner text when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for constructing the status line when collecting names: do nothing.[=0x000A=][=0x000A=]Part 2 - Adding the Leaderboard[=0x000A=][=0x000A=]File of Leaderboard is called [=0x0022=]leaderboard[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Leaderboard exists:[=0x000A=][=0x0009=][=0x0009=]read File of Leaderboard into the Table of Leaders;[=0x000A=][=0x0009=][=0x0009=]sort the Table of Leaders in reverse scored amount order.[=0x000A=][=0x000A=]When play ends:[=0x000A=][=0x0009=]choose row 10 in the Table of Leaders; [we[=0x0027=]ve sorted the table, so the lowest score will be the one at the bottom][=0x000A=][=0x0009=]if the score is greater than scored amount entry:[=0x000A=][=0x0009=][=0x0009=]now name entry is the player[=0x0027=]s forename;[=0x000A=][=0x0009=][=0x0009=]now the scored amount entry is the score;[=0x000A=][=0x0009=]show leaderboard;[=0x000A=][=0x0009=]write the File of Leaderboard from the Table of Leaders.[=0x000A=][=0x000A=]To show leaderboard:[=0x000A=][=0x0009=]sort the Table of Leaders in reverse scored amount order;[=0x000A=][=0x0009=]say [=0x0022=]Current leading scores: [paragraph break][=0x0022=];[=0x000A=][=0x0009=]say fixed letter spacing;[=0x000A=][=0x0009=]repeat through Table of Leaders:[=0x000A=][=0x0009=][=0x0009=]if scored amount entry is greater than 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]  [name entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column][=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is less than 1, now N is 1;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say N spaces;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][scored amount entry][line break][=0x0022=];[=0x000A=][=0x0009=]say variable letter spacing.[=0x000A=][=0x000A=]To say (N - a number) spaces:[=0x000A=][=0x0009=]repeat with index running from 1 to N:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [=0x0022=].[=0x000A=][=0x000A=]Table of Leaders[=0x000A=]scored amount[=0x0009=]name[=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=][=0x000A=][And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:][=0x000A=][=0x000A=]Part 3 - Scenario[=0x000A=][=0x000A=]Carry out taking something which is not handled:[=0x000A=][=0x0009=]increment score.[=0x000A=][=0x000A=]The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.[=0x000A=][=0x000A=]Instead of waiting, end the story finally.[=0x000A=][=0x000A=]Test me with [=0x0022=]get ruby / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Rubies&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37156" -->
<a id="c37156"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37157" -->
<a id="c37157"></a><blockquote class="code"><p class="quoted">
Part 1 - Collecting Names
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37158" -->
<a id="c37158"></a><blockquote class="code"><p class="quoted">
The player's forename is a text that varies. The player's full name is a text that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37159" -->
<a id="c37159"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;What is your name? &gt; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37160" -->
<a id="c37160"></a><blockquote class="code"><p class="quoted">
To decide whether collecting names:
<br />&#160;&#160;&#160;&#160;if the command prompt is &quot;What is your name? &gt; &quot;, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37161" -->
<a id="c37161"></a><blockquote class="code"><p class="quoted">
After reading a command when collecting names:
<br />&#160;&#160;&#160;&#160;if the number of words in the player's command is greater than 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[paragraph break]Who are you, a member of the British royal family? No one has that many names. Let's try this again.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;now the player's full name is the player's command;
<br />&#160;&#160;&#160;&#160;now the player's forename is word number 1 in the player's command;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;&gt;&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;Hi, [player's forename]!&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[banner text]&quot;;
<br />&#160;&#160;&#160;&#160;move the player to the location;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37162" -->
<a id="c37162"></a><blockquote class="code"><p class="quoted">
Instead of looking when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37163" -->
<a id="c37163"></a><blockquote class="code"><p class="quoted">
Rule for printing the banner text when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37164" -->
<a id="c37164"></a><blockquote class="code"><p class="quoted">
Rule for constructing the status line when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37165" -->
<a id="c37165"></a><blockquote class="code"><p class="quoted">
Part 2 - Adding the Leaderboard
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37166" -->
<a id="c37166"></a><blockquote class="code"><p class="quoted">
File of Leaderboard is called &quot;leaderboard&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37167" -->
<a id="c37167"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;if the File of Leaderboard exists:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read File of Leaderboard into the Table of Leaders;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37168" -->
<a id="c37168"></a><blockquote class="code"><p class="quoted">
When play ends:
<br />&#160;&#160;&#160;&#160;choose row 10 in the Table of Leaders; [we've sorted the table, so the lowest score will be the one at the bottom]
<br />&#160;&#160;&#160;&#160;if the score is greater than scored amount entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now name entry is the player's forename;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the scored amount entry is the score;
<br />&#160;&#160;&#160;&#160;show leaderboard;
<br />&#160;&#160;&#160;&#160;write the File of Leaderboard from the Table of Leaders.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37169" -->
<a id="c37169"></a><blockquote class="code"><p class="quoted">
To show leaderboard:
<br />&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order;
<br />&#160;&#160;&#160;&#160;say &quot;Current leading scores: [paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say fixed letter spacing;
<br />&#160;&#160;&#160;&#160;repeat through Table of Leaders:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if scored amount entry is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [name entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is less than 1, now N is 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say N spaces;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[scored amount entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say variable letter spacing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37170" -->
<a id="c37170"></a><blockquote class="code"><p class="quoted">
To say (N - a number) spaces:
<br />&#160;&#160;&#160;&#160;repeat with index running from 1 to N:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37171" -->
<a id="c37171"></a><blockquote class="code"><p class="quoted">
Table of Leaders
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">scored amount</p></td><td class="quotedtablecell"><p class="quoted">name</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:</p>
<!-- START CODE "c37172" -->
<a id="c37172"></a><blockquote class="code"><p class="quoted">
Part 3 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37173" -->
<a id="c37173"></a><blockquote class="code"><p class="quoted">
Carry out taking something which is not handled:
<br />&#160;&#160;&#160;&#160;increment score.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37174" -->
<a id="c37174"></a><blockquote class="code"><p class="quoted">
The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37175" -->
<a id="c37175"></a><blockquote class="code"><p class="quoted">
Instead of waiting, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37176" -->
<a id="c37176"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get ruby / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_11_4.html#e422" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Rubies</span></b></a><br />A scoreboard that keeps track of the ten highest-scoring players from one playthrough to the next, adding the player's name if he has done well enough.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example422">
<p>The trick here is that we need a table with text in order to keep track of the players' names.</p>
<p>Part 1 largely replicates the source from &quot;Identity Theft&quot;; new material starts at Part 2.</p>
<!-- START CODE "c37177" -->
<a id="c37177"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Rubies[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Part 1 - Collecting Names[=0x000A=][=0x000A=]The player[=0x0027=]s forename is a text that varies. The player[=0x0027=]s full name is a text that varies.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=].[=0x000A=][=0x000A=]To decide whether collecting names:[=0x000A=][=0x0009=]if the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=], yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]After reading a command when collecting names:[=0x000A=][=0x0009=]if the number of words in the player[=0x0027=]s command is greater than 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][paragraph break]Who are you, a member of the British royal family? No one has that many names. Let[=0x0027=]s try this again.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s full name is the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s forename is word number 1 in the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the command prompt is [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]Hi, [player[=0x0027=]s forename]![=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][banner text][=0x0022=];[=0x000A=][=0x0009=]move the player to the location;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]Instead of looking when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for printing the banner text when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for constructing the status line when collecting names: do nothing.[=0x000A=][=0x000A=]Part 2 - Adding the Leaderboard[=0x000A=][=0x000A=]File of Leaderboard is called [=0x0022=]leaderboard[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Leaderboard exists:[=0x000A=][=0x0009=][=0x0009=]read File of Leaderboard into the Table of Leaders;[=0x000A=][=0x0009=][=0x0009=]sort the Table of Leaders in reverse scored amount order.[=0x000A=][=0x000A=]When play ends:[=0x000A=][=0x0009=]choose row 10 in the Table of Leaders; [we[=0x0027=]ve sorted the table, so the lowest score will be the one at the bottom][=0x000A=][=0x0009=]if the score is greater than scored amount entry:[=0x000A=][=0x0009=][=0x0009=]now name entry is the player[=0x0027=]s forename;[=0x000A=][=0x0009=][=0x0009=]now the scored amount entry is the score;[=0x000A=][=0x0009=]show leaderboard;[=0x000A=][=0x0009=]write the File of Leaderboard from the Table of Leaders.[=0x000A=][=0x000A=]To show leaderboard:[=0x000A=][=0x0009=]sort the Table of Leaders in reverse scored amount order;[=0x000A=][=0x0009=]say [=0x0022=]Current leading scores: [paragraph break][=0x0022=];[=0x000A=][=0x0009=]say fixed letter spacing;[=0x000A=][=0x0009=]repeat through Table of Leaders:[=0x000A=][=0x0009=][=0x0009=]if scored amount entry is greater than 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]  [name entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column][=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is less than 1, now N is 1;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say N spaces;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][scored amount entry][line break][=0x0022=];[=0x000A=][=0x0009=]say variable letter spacing.[=0x000A=][=0x000A=]To say (N - a number) spaces:[=0x000A=][=0x0009=]repeat with index running from 1 to N:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [=0x0022=].[=0x000A=][=0x000A=]Table of Leaders[=0x000A=]scored amount[=0x0009=]name[=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=][=0x000A=][And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:][=0x000A=][=0x000A=]Part 3 - Scenario[=0x000A=][=0x000A=]Carry out taking something which is not handled:[=0x000A=][=0x0009=]increment score.[=0x000A=][=0x000A=]The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.[=0x000A=][=0x000A=]Instead of waiting, end the story finally.[=0x000A=][=0x000A=]Test me with [=0x0022=]get ruby / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Rubies&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37178" -->
<a id="c37178"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37179" -->
<a id="c37179"></a><blockquote class="code"><p class="quoted">
Part 1 - Collecting Names
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37180" -->
<a id="c37180"></a><blockquote class="code"><p class="quoted">
The player's forename is a text that varies. The player's full name is a text that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37181" -->
<a id="c37181"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;What is your name? &gt; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37182" -->
<a id="c37182"></a><blockquote class="code"><p class="quoted">
To decide whether collecting names:
<br />&#160;&#160;&#160;&#160;if the command prompt is &quot;What is your name? &gt; &quot;, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37183" -->
<a id="c37183"></a><blockquote class="code"><p class="quoted">
After reading a command when collecting names:
<br />&#160;&#160;&#160;&#160;if the number of words in the player's command is greater than 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[paragraph break]Who are you, a member of the British royal family? No one has that many names. Let's try this again.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;now the player's full name is the player's command;
<br />&#160;&#160;&#160;&#160;now the player's forename is word number 1 in the player's command;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;&gt;&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;Hi, [player's forename]!&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[banner text]&quot;;
<br />&#160;&#160;&#160;&#160;move the player to the location;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37184" -->
<a id="c37184"></a><blockquote class="code"><p class="quoted">
Instead of looking when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37185" -->
<a id="c37185"></a><blockquote class="code"><p class="quoted">
Rule for printing the banner text when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37186" -->
<a id="c37186"></a><blockquote class="code"><p class="quoted">
Rule for constructing the status line when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37187" -->
<a id="c37187"></a><blockquote class="code"><p class="quoted">
Part 2 - Adding the Leaderboard
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37188" -->
<a id="c37188"></a><blockquote class="code"><p class="quoted">
File of Leaderboard is called &quot;leaderboard&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37189" -->
<a id="c37189"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;if the File of Leaderboard exists:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read File of Leaderboard into the Table of Leaders;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37190" -->
<a id="c37190"></a><blockquote class="code"><p class="quoted">
When play ends:
<br />&#160;&#160;&#160;&#160;choose row 10 in the Table of Leaders; [we've sorted the table, so the lowest score will be the one at the bottom]
<br />&#160;&#160;&#160;&#160;if the score is greater than scored amount entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now name entry is the player's forename;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the scored amount entry is the score;
<br />&#160;&#160;&#160;&#160;show leaderboard;
<br />&#160;&#160;&#160;&#160;write the File of Leaderboard from the Table of Leaders.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37191" -->
<a id="c37191"></a><blockquote class="code"><p class="quoted">
To show leaderboard:
<br />&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order;
<br />&#160;&#160;&#160;&#160;say &quot;Current leading scores: [paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say fixed letter spacing;
<br />&#160;&#160;&#160;&#160;repeat through Table of Leaders:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if scored amount entry is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [name entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is less than 1, now N is 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say N spaces;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[scored amount entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say variable letter spacing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37192" -->
<a id="c37192"></a><blockquote class="code"><p class="quoted">
To say (N - a number) spaces:
<br />&#160;&#160;&#160;&#160;repeat with index running from 1 to N:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37193" -->
<a id="c37193"></a><blockquote class="code"><p class="quoted">
Table of Leaders
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">scored amount</p></td><td class="quotedtablecell"><p class="quoted">name</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:</p>
<!-- START CODE "c37194" -->
<a id="c37194"></a><blockquote class="code"><p class="quoted">
Part 3 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37195" -->
<a id="c37195"></a><blockquote class="code"><p class="quoted">
Carry out taking something which is not handled:
<br />&#160;&#160;&#160;&#160;increment score.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37196" -->
<a id="c37196"></a><blockquote class="code"><p class="quoted">
The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37197" -->
<a id="c37197"></a><blockquote class="code"><p class="quoted">
Instead of waiting, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c37198" -->
<a id="c37198"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get ruby / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<a  href="ex422.html#e422"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
