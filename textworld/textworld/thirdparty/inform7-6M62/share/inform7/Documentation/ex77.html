<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>12.10. Action variables</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง12.10. Action variables</p>
<p>For some complex situations, it can be useful to keep track of a few values throughout the processing of the action. This is not an everyday occurrence: in the Standard Rules, for instance, only two or three out of 90 actions need to do this. But suppose we want to write a more deluxe version of our &quot;photographing&quot; action. This time, rather than having a single thing called the &quot;camera&quot;, we will provide a whole range of possible cameras, varying in quality:</p>
<!-- START CODE "c875" -->
<a id="c875"></a><blockquote class="code"><p class="quoted">
Photographing is an action applying to one visible thing and requiring light. Understand &quot;photograph [something]&quot; as photographing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c876" -->
<a id="c876"></a><blockquote class="code"><p class="quoted">
The Studio is a room. Sally is a woman in the Studio. A foam-lined tote bag is in the Studio.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c877" -->
<a id="c877"></a><blockquote class="code"><p class="quoted">
A camera is a kind of thing. A camera has a number called picture quality. The digital SLR camera is a camera in the tote bag. The player carries a camera called the instant one-shot camera. The picture quality of the SLR camera is 10. The picture quality of the one-shot is 2. Definition: a camera is sharp if its picture quality is 5 or more.
</p></blockquote>
<!-- END CODE -->
<p>And we will want the photographing action to have the player use the best-quality camera which comes to hand. We will give the action a variable called the 'camera photographed with', thus:</p>
<!-- START CODE "c878" -->
<a id="c878"></a><blockquote class="code"><p class="quoted">
The photographing action has an object called the camera photographed with.
</p></blockquote>
<!-- END CODE -->
<p>Every action's variables must be named differently from those of all other actions, because there are some &quot;before&quot; rules (for instance) which take effect for many different actions, and which might need access to any of their variables. So action variables should be named in a way marking out to which action they belong. The best way to do this is to include the past participle of the action name - just as &quot;camera photographed with&quot; contains the past participle &quot;photographed&quot; of the action &quot;photographing&quot;.</p>
<p>This value is created when the action begins, and disappears when the action ends. (If the action should happen a second time before the first time was completed, a second copy of the value is created, leaving the original undisturbed.) When the action begins, the value starts out as something neutral - so if it is a number, it starts out as 0, if a text, it starts out as the blank text &quot;&quot;, and so on. Here it is an object, so it starts out as nothing - the value meaning no object at all. But of course we want to give it a value ourselves. We can do that using the &quot;setting action variables&quot; rulebook. For instance:</p>
<!-- START CODE "c879" -->
<a id="c879"></a><blockquote class="code"><p class="quoted">
Setting action variables for photographing:
<br />&#160;&#160;&#160;&#160;now the camera photographed with is the sharpest camera which is carried by the actor.
</p></blockquote>
<!-- END CODE -->
<p>The &quot;setting action variables&quot; rulebook is run through before even the before rules, and it has no power to stop or change the action. Its rules should say nothing and do nothing other than to set rulebook variables like this one. Note that it is intended to work for any actor, not only the player: so rather than referring to the player as the performer of the action, we need to write &quot;the actor&quot;, as in the example above. (See subsequent sections for more on actors.)</p>
<p>We can now write rules such as:</p>
<!-- START CODE "c880" -->
<a id="c880"></a><blockquote class="code"><p class="quoted">
A check photographing rule:
<br />&#160;&#160;&#160;&#160;if the camera photographed with is nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can hardly photograph without a camera, now can you?&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Only rules to do with the photographing action - before, instead, after, check, carry out, or report rules, and so on - are allowed to see the 'camera photographed with' value: it's the private property of the action.</p>
<p>A further elaboration allows us to make rules about photographing neater to write. If we create our variable like so:</p>
<!-- START CODE "c881" -->
<a id="c881"></a><blockquote class="code"><p class="quoted">
The photographing action has an object called the camera photographed with (matched as &quot;using&quot;).
</p></blockquote>
<!-- END CODE -->
<p>...then we are now allowed to add an optional 'using ...' clause onto a description of the action. The clause has to be introduced with a single word: here, it's 'using'. For instance, we could write rules such as</p>
<!-- START CODE "c882" -->
<a id="c882"></a><blockquote class="code"><p class="quoted">
Instead of photographing something using the one-shot camera:
<br />&#160;&#160;&#160;&#160;say &quot;But you promised to give this to Sally's nephew.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c883" -->
<a id="c883"></a><blockquote class="code"><p class="quoted">
Check photographing something using the noun:
<br />&#160;&#160;&#160;&#160;say &quot;That would require some sort of contraption with mirrors.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c884" -->
<a id="c884"></a><blockquote class="code"><p class="quoted">
Report photographing something using a sharp camera:
<br />&#160;&#160;&#160;&#160;say &quot;You feel cool and important as the shutter clicks.&quot;
</p></blockquote>
<!-- END CODE -->
<p>(This is the method used by the Standard Rules to attach optional clauses such as 'to', 'with' and 'through' to the going action.)</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_12_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_12_1.html" class="standardlink">Start of Chapter 12: Advanced Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12_9.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_12_9.html" class="standardlink">Back to ยง12.9. Check, carry out, report</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12_11.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_12_11.html" class="standardlink">Onward to ยง12.11. Making actions work for other people</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e256"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex256.html#e256" class="eglink"><b>198</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex256.html#e256" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Further Reasons Why All Poets Are Liars</span></b></a><br />The young William Wordsworth, pushing a box about in his room, must struggle to achieve a Romantic point of view.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex256.html#e256"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e396"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex396.html#e396" class="eglink"><b>199</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex396.html#e396" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Removal</span></b></a><br />TAKE expanded to give responses such as "You take the book from the shelf." or "You pick up the toy from the ground."</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex396.html#e396"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e419"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex419.html#e419" class="eglink"><b>200</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex419.html#e419" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Second Oldest Problem</span></b></a><br />Adapting the going action so that something special can happen when going from a dark room to another dark room.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex419.html#e419"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e63"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex63.html#e63" class="eglink"><b>201</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex63.html#e63" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Puff of Orange Smoke</span></b></a><br />A system in which every character has a body, which is left behind when the person dies; attempts to do something to the body are redirected to the person while the person is alive.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex63.html#e63"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e77"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_12_10.html#e77" class="eglink"><b>202</b></a></div>
<div class="egpanel" id="example77">
<p>Suppose that we have a design in which the player spends lots of time on enterable supporters, and in which we want to report certain actions -- dropping things onto those supporters, or leaping from one to another -- in a new way. We might begin by adding some action variables to help us keep track of the situation:</p>
<!-- START CODE "c5791" -->
<a id="c5791"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Croft[=0x0022=][=0x000A=][=0x000A=]The dropping action has an object called the container dropped into (matched as [=0x0022=]into[=0x0022=]).[=0x000A=][=0x000A=]The dropping action has an object called the supporter dropped onto (matched as [=0x0022=]onto[=0x0022=]).[=0x000A=][=0x000A=]Rule for setting action variables for dropping:[=0x000A=][=0x0009=]if the actor is in a container (called C), now the container dropped into is C;[=0x000A=][=0x0009=]if the actor is on a supporter (called C), now the supporter dropped onto is C.[=0x000A=][=0x000A=]Report dropping a heavy thing onto a metallic thing:[=0x000A=][=0x0009=]say [=0x0022=]You drop [the noun], and [the supporter dropped onto] clangs protestingly.[=0x0022=] instead.[=0x000A=][=0x000A=]Report someone dropping a heavy thing onto a metallic thing:[=0x000A=][=0x0009=]say [=0x0022=][The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.[=0x0022=] instead.[=0x000A=][=0x000A=]A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.[=0x000A=][=0x000A=]The Ancient Cambodian Temple is a room. [=0x0022=]A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.[=0x0022=][=0x000A=][=0x000A=]A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.[=0x000A=][=0x000A=]The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.[=0x000A=][=0x000A=]The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.[=0x000A=][=0x000A=]Persuasion rule: persuasion succeeds.[=0x000A=][=0x000A=]The entering action has an object called the place left (matched as [=0x0022=]from[=0x0022=]).[=0x000A=][=0x0009=]Check entering a platform from a platform:[=0x000A=][=0x0009=][=0x0009=]if actor is the player, say [=0x0022=]You leap into midair to cross the distance...[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=][The actor] leaps gracefully across the distance...[=0x0022=];[=0x000A=][=0x0009=]move the actor to the holder of the noun, without printing a room description.[=0x000A=][=0x000A=][Because this rule occurs before the [=0x0022=]implicitly pass through other barriers rule[=0x0022=], that rule will not occur when we move from platform to platform; we[=0x0027=]ll use our own custom rule instead.][=0x000A=][=0x000A=]Rule for setting action variables for entering:[=0x000A=][=0x0009=]now the place left is the holder of the actor.[=0x000A=][=0x000A=]Report entering a platform from a platform:[=0x000A=][=0x0009=]say [=0x0022=]You land in a cat-like crouch on [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=]Report Lara entering a platform from a platform:[=0x000A=][=0x0009=]say [=0x0022=]Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].[=0x0022=] instead.[=0x000A=][=0x000A=]Report entering a platform from the location:[=0x000A=][=0x0009=]say [=0x0022=]You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.[=0x0022=] instead.[=0x000A=][=0x000A=]Report Lara entering a platform from a location:[=0x000A=][=0x0009=]say [=0x0022=]Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.[=0x0022=][=0x000A=][=0x000A=]Instead of examining a person who is not the player:[=0x000A=][=0x0009=]say [=0x0022=][The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].[=0x0022=][=0x000A=][=0x000A=]Instead of climbing a platform, try entering the noun.[=0x000A=][=0x000A=]Test me with [=0x0022=]Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Croft&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5792" -->
<a id="c5792"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the container dropped into (matched as &quot;into&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5793" -->
<a id="c5793"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the supporter dropped onto (matched as &quot;onto&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5794" -->
<a id="c5794"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for dropping:
<br />&#160;&#160;&#160;&#160;if the actor is in a container (called C), now the container dropped into is C;
<br />&#160;&#160;&#160;&#160;if the actor is on a supporter (called C), now the supporter dropped onto is C.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5795" -->
<a id="c5795"></a><blockquote class="code"><p class="quoted">
Report dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;You drop [the noun], and [the supporter dropped onto] clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5796" -->
<a id="c5796"></a><blockquote class="code"><p class="quoted">
Report someone dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5797" -->
<a id="c5797"></a><blockquote class="code"><p class="quoted">
A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5798" -->
<a id="c5798"></a><blockquote class="code"><p class="quoted">
The Ancient Cambodian Temple is a room. &quot;A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5799" -->
<a id="c5799"></a><blockquote class="code"><p class="quoted">
A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5800" -->
<a id="c5800"></a><blockquote class="code"><p class="quoted">
The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5801" -->
<a id="c5801"></a><blockquote class="code"><p class="quoted">
The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5802" -->
<a id="c5802"></a><blockquote class="code"><p class="quoted">
Persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5803" -->
<a id="c5803"></a><blockquote class="code"><p class="quoted">
The entering action has an object called the place left (matched as &quot;from&quot;).
<br />&#160;&#160;&#160;&#160;Check entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if actor is the player, say &quot;You leap into midair to cross the distance...&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The actor] leaps gracefully across the distance...&quot;;
<br />&#160;&#160;&#160;&#160;move the actor to the holder of the noun, without printing a room description.
</p></blockquote>
<!-- END CODE -->
<p>Because this rule occurs before the &quot;implicitly pass through other barriers rule&quot;, that rule will not occur when we move from platform to platform; we'll use our own custom rule instead.</p>
<!-- START CODE "c5804" -->
<a id="c5804"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for entering:
<br />&#160;&#160;&#160;&#160;now the place left is the holder of the actor.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5805" -->
<a id="c5805"></a><blockquote class="code"><p class="quoted">
Report entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;You land in a cat-like crouch on [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5806" -->
<a id="c5806"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5807" -->
<a id="c5807"></a><blockquote class="code"><p class="quoted">
Report entering a platform from the location:
<br />&#160;&#160;&#160;&#160;say &quot;You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5808" -->
<a id="c5808"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a location:
<br />&#160;&#160;&#160;&#160;say &quot;Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5809" -->
<a id="c5809"></a><blockquote class="code"><p class="quoted">
Instead of examining a person who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5810" -->
<a id="c5810"></a><blockquote class="code"><p class="quoted">
Instead of climbing a platform, try entering the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5811" -->
<a id="c5811"></a><blockquote class="code"><p class="quoted">
Test me with &quot;Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_12_10.html#e77" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Croft</span></b></a><br />Adding special reporting and handling for objects dropped when the player is on a supporter, and special entering rules for moving from one supporter to another.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example77">
<p>Suppose that we have a design in which the player spends lots of time on enterable supporters, and in which we want to report certain actions -- dropping things onto those supporters, or leaping from one to another -- in a new way. We might begin by adding some action variables to help us keep track of the situation:</p>
<!-- START CODE "c5812" -->
<a id="c5812"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Croft[=0x0022=][=0x000A=][=0x000A=]The dropping action has an object called the container dropped into (matched as [=0x0022=]into[=0x0022=]).[=0x000A=][=0x000A=]The dropping action has an object called the supporter dropped onto (matched as [=0x0022=]onto[=0x0022=]).[=0x000A=][=0x000A=]Rule for setting action variables for dropping:[=0x000A=][=0x0009=]if the actor is in a container (called C), now the container dropped into is C;[=0x000A=][=0x0009=]if the actor is on a supporter (called C), now the supporter dropped onto is C.[=0x000A=][=0x000A=]Report dropping a heavy thing onto a metallic thing:[=0x000A=][=0x0009=]say [=0x0022=]You drop [the noun], and [the supporter dropped onto] clangs protestingly.[=0x0022=] instead.[=0x000A=][=0x000A=]Report someone dropping a heavy thing onto a metallic thing:[=0x000A=][=0x0009=]say [=0x0022=][The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.[=0x0022=] instead.[=0x000A=][=0x000A=]A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.[=0x000A=][=0x000A=]The Ancient Cambodian Temple is a room. [=0x0022=]A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.[=0x0022=][=0x000A=][=0x000A=]A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.[=0x000A=][=0x000A=]The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.[=0x000A=][=0x000A=]The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.[=0x000A=][=0x000A=]Persuasion rule: persuasion succeeds.[=0x000A=][=0x000A=]The entering action has an object called the place left (matched as [=0x0022=]from[=0x0022=]).[=0x000A=][=0x0009=]Check entering a platform from a platform:[=0x000A=][=0x0009=][=0x0009=]if actor is the player, say [=0x0022=]You leap into midair to cross the distance...[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=][The actor] leaps gracefully across the distance...[=0x0022=];[=0x000A=][=0x0009=]move the actor to the holder of the noun, without printing a room description.[=0x000A=][=0x000A=][Because this rule occurs before the [=0x0022=]implicitly pass through other barriers rule[=0x0022=], that rule will not occur when we move from platform to platform; we[=0x0027=]ll use our own custom rule instead.][=0x000A=][=0x000A=]Rule for setting action variables for entering:[=0x000A=][=0x0009=]now the place left is the holder of the actor.[=0x000A=][=0x000A=]Report entering a platform from a platform:[=0x000A=][=0x0009=]say [=0x0022=]You land in a cat-like crouch on [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=]Report Lara entering a platform from a platform:[=0x000A=][=0x0009=]say [=0x0022=]Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].[=0x0022=] instead.[=0x000A=][=0x000A=]Report entering a platform from the location:[=0x000A=][=0x0009=]say [=0x0022=]You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.[=0x0022=] instead.[=0x000A=][=0x000A=]Report Lara entering a platform from a location:[=0x000A=][=0x0009=]say [=0x0022=]Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.[=0x0022=][=0x000A=][=0x000A=]Instead of examining a person who is not the player:[=0x000A=][=0x0009=]say [=0x0022=][The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].[=0x0022=][=0x000A=][=0x000A=]Instead of climbing a platform, try entering the noun.[=0x000A=][=0x000A=]Test me with [=0x0022=]Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Croft&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5813" -->
<a id="c5813"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the container dropped into (matched as &quot;into&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5814" -->
<a id="c5814"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the supporter dropped onto (matched as &quot;onto&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5815" -->
<a id="c5815"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for dropping:
<br />&#160;&#160;&#160;&#160;if the actor is in a container (called C), now the container dropped into is C;
<br />&#160;&#160;&#160;&#160;if the actor is on a supporter (called C), now the supporter dropped onto is C.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5816" -->
<a id="c5816"></a><blockquote class="code"><p class="quoted">
Report dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;You drop [the noun], and [the supporter dropped onto] clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5817" -->
<a id="c5817"></a><blockquote class="code"><p class="quoted">
Report someone dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5818" -->
<a id="c5818"></a><blockquote class="code"><p class="quoted">
A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5819" -->
<a id="c5819"></a><blockquote class="code"><p class="quoted">
The Ancient Cambodian Temple is a room. &quot;A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5820" -->
<a id="c5820"></a><blockquote class="code"><p class="quoted">
A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5821" -->
<a id="c5821"></a><blockquote class="code"><p class="quoted">
The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5822" -->
<a id="c5822"></a><blockquote class="code"><p class="quoted">
The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5823" -->
<a id="c5823"></a><blockquote class="code"><p class="quoted">
Persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5824" -->
<a id="c5824"></a><blockquote class="code"><p class="quoted">
The entering action has an object called the place left (matched as &quot;from&quot;).
<br />&#160;&#160;&#160;&#160;Check entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if actor is the player, say &quot;You leap into midair to cross the distance...&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The actor] leaps gracefully across the distance...&quot;;
<br />&#160;&#160;&#160;&#160;move the actor to the holder of the noun, without printing a room description.
</p></blockquote>
<!-- END CODE -->
<p>Because this rule occurs before the &quot;implicitly pass through other barriers rule&quot;, that rule will not occur when we move from platform to platform; we'll use our own custom rule instead.</p>
<!-- START CODE "c5825" -->
<a id="c5825"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for entering:
<br />&#160;&#160;&#160;&#160;now the place left is the holder of the actor.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5826" -->
<a id="c5826"></a><blockquote class="code"><p class="quoted">
Report entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;You land in a cat-like crouch on [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5827" -->
<a id="c5827"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5828" -->
<a id="c5828"></a><blockquote class="code"><p class="quoted">
Report entering a platform from the location:
<br />&#160;&#160;&#160;&#160;say &quot;You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5829" -->
<a id="c5829"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a location:
<br />&#160;&#160;&#160;&#160;say &quot;Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5830" -->
<a id="c5830"></a><blockquote class="code"><p class="quoted">
Instead of examining a person who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5831" -->
<a id="c5831"></a><blockquote class="code"><p class="quoted">
Instead of climbing a platform, try entering the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5832" -->
<a id="c5832"></a><blockquote class="code"><p class="quoted">
Test me with &quot;Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex77.html#e77"><i>RB</i></a></div>
<div class="egpanel" id="example77">
<p>Suppose that we have a design in which the player spends lots of time on enterable supporters, and in which we want to report certain actions -- dropping things onto those supporters, or leaping from one to another -- in a new way. We might begin by adding some action variables to help us keep track of the situation:</p>
<!-- START CODE "c5833" -->
<a id="c5833"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Croft[=0x0022=][=0x000A=][=0x000A=]The dropping action has an object called the container dropped into (matched as [=0x0022=]into[=0x0022=]).[=0x000A=][=0x000A=]The dropping action has an object called the supporter dropped onto (matched as [=0x0022=]onto[=0x0022=]).[=0x000A=][=0x000A=]Rule for setting action variables for dropping:[=0x000A=][=0x0009=]if the actor is in a container (called C), now the container dropped into is C;[=0x000A=][=0x0009=]if the actor is on a supporter (called C), now the supporter dropped onto is C.[=0x000A=][=0x000A=]Report dropping a heavy thing onto a metallic thing:[=0x000A=][=0x0009=]say [=0x0022=]You drop [the noun], and [the supporter dropped onto] clangs protestingly.[=0x0022=] instead.[=0x000A=][=0x000A=]Report someone dropping a heavy thing onto a metallic thing:[=0x000A=][=0x0009=]say [=0x0022=][The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.[=0x0022=] instead.[=0x000A=][=0x000A=]A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.[=0x000A=][=0x000A=]The Ancient Cambodian Temple is a room. [=0x0022=]A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.[=0x0022=][=0x000A=][=0x000A=]A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.[=0x000A=][=0x000A=]The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.[=0x000A=][=0x000A=]The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.[=0x000A=][=0x000A=]Persuasion rule: persuasion succeeds.[=0x000A=][=0x000A=]The entering action has an object called the place left (matched as [=0x0022=]from[=0x0022=]).[=0x000A=][=0x0009=]Check entering a platform from a platform:[=0x000A=][=0x0009=][=0x0009=]if actor is the player, say [=0x0022=]You leap into midair to cross the distance...[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=][The actor] leaps gracefully across the distance...[=0x0022=];[=0x000A=][=0x0009=]move the actor to the holder of the noun, without printing a room description.[=0x000A=][=0x000A=][Because this rule occurs before the [=0x0022=]implicitly pass through other barriers rule[=0x0022=], that rule will not occur when we move from platform to platform; we[=0x0027=]ll use our own custom rule instead.][=0x000A=][=0x000A=]Rule for setting action variables for entering:[=0x000A=][=0x0009=]now the place left is the holder of the actor.[=0x000A=][=0x000A=]Report entering a platform from a platform:[=0x000A=][=0x0009=]say [=0x0022=]You land in a cat-like crouch on [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=]Report Lara entering a platform from a platform:[=0x000A=][=0x0009=]say [=0x0022=]Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].[=0x0022=] instead.[=0x000A=][=0x000A=]Report entering a platform from the location:[=0x000A=][=0x0009=]say [=0x0022=]You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.[=0x0022=] instead.[=0x000A=][=0x000A=]Report Lara entering a platform from a location:[=0x000A=][=0x0009=]say [=0x0022=]Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.[=0x0022=][=0x000A=][=0x000A=]Instead of examining a person who is not the player:[=0x000A=][=0x0009=]say [=0x0022=][The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].[=0x0022=][=0x000A=][=0x000A=]Instead of climbing a platform, try entering the noun.[=0x000A=][=0x000A=]Test me with [=0x0022=]Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Croft&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5834" -->
<a id="c5834"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the container dropped into (matched as &quot;into&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5835" -->
<a id="c5835"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the supporter dropped onto (matched as &quot;onto&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5836" -->
<a id="c5836"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for dropping:
<br />&#160;&#160;&#160;&#160;if the actor is in a container (called C), now the container dropped into is C;
<br />&#160;&#160;&#160;&#160;if the actor is on a supporter (called C), now the supporter dropped onto is C.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5837" -->
<a id="c5837"></a><blockquote class="code"><p class="quoted">
Report dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;You drop [the noun], and [the supporter dropped onto] clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5838" -->
<a id="c5838"></a><blockquote class="code"><p class="quoted">
Report someone dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5839" -->
<a id="c5839"></a><blockquote class="code"><p class="quoted">
A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5840" -->
<a id="c5840"></a><blockquote class="code"><p class="quoted">
The Ancient Cambodian Temple is a room. &quot;A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5841" -->
<a id="c5841"></a><blockquote class="code"><p class="quoted">
A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5842" -->
<a id="c5842"></a><blockquote class="code"><p class="quoted">
The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5843" -->
<a id="c5843"></a><blockquote class="code"><p class="quoted">
The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5844" -->
<a id="c5844"></a><blockquote class="code"><p class="quoted">
Persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5845" -->
<a id="c5845"></a><blockquote class="code"><p class="quoted">
The entering action has an object called the place left (matched as &quot;from&quot;).
<br />&#160;&#160;&#160;&#160;Check entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if actor is the player, say &quot;You leap into midair to cross the distance...&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The actor] leaps gracefully across the distance...&quot;;
<br />&#160;&#160;&#160;&#160;move the actor to the holder of the noun, without printing a room description.
</p></blockquote>
<!-- END CODE -->
<p>Because this rule occurs before the &quot;implicitly pass through other barriers rule&quot;, that rule will not occur when we move from platform to platform; we'll use our own custom rule instead.</p>
<!-- START CODE "c5846" -->
<a id="c5846"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for entering:
<br />&#160;&#160;&#160;&#160;now the place left is the holder of the actor.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5847" -->
<a id="c5847"></a><blockquote class="code"><p class="quoted">
Report entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;You land in a cat-like crouch on [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5848" -->
<a id="c5848"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5849" -->
<a id="c5849"></a><blockquote class="code"><p class="quoted">
Report entering a platform from the location:
<br />&#160;&#160;&#160;&#160;say &quot;You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5850" -->
<a id="c5850"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a location:
<br />&#160;&#160;&#160;&#160;say &quot;Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5851" -->
<a id="c5851"></a><blockquote class="code"><p class="quoted">
Instead of examining a person who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5852" -->
<a id="c5852"></a><blockquote class="code"><p class="quoted">
Instead of climbing a platform, try entering the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5853" -->
<a id="c5853"></a><blockquote class="code"><p class="quoted">
Test me with &quot;Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
