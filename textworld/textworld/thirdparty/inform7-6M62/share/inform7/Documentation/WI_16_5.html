<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>16.5. Choosing rows</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง16.5. Choosing rows</p>
<p>The following would be one way to print out a list of recent Kings and Queens:</p>
<!-- START CODE "c1253" -->
<a id="c1253"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('To list the succession:[=0x000A=]say [=0x0022=]The Succession List runs as follows...[=0x0022=];[=0x000A=]repeat with N running from 1 to the number of rows in the Table of Recent Monarchs:[=0x000A=][=0x0009=]say [=0x0022=][accession in row N of the Table of Recent Monarchs]: [name in row N of the Table of Recent Monarchs] ([family in row N of the Table of Recent Monarchs]).[=0x0022=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> To list the succession:
<br />say &quot;The Succession List runs as follows...&quot;;
<br />repeat with N running from 1 to the number of rows in the Table of Recent Monarchs:
<br />&#160;&#160;&#160;&#160;say &quot;[accession in row N of the Table of Recent Monarchs]: [name in row N of the Table of Recent Monarchs] ([family in row N of the Table of Recent Monarchs]).&quot;
</p></blockquote>
<!-- END CODE -->
<p>This works, but is repetitive. We often want to work on a single row for a while, either to change things or think about the contents, and it is tiresome to keep specifying the row over and over again. The following shorthand provides some relief:</p>
<!-- START PHRASE "defn225" -->
<div class="definition"><a id="defn225"></a><p class="defnprototype"><b>choose a</b>/the/--<b> row </b>(number)<b> in</b>/from<b> </b>(table name)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_chooserow -->

<p>This phrase selects the row with the given number. Row numbers in a table start from 1, so</p>
<!-- START CODE "c1254" -->
<a id="c1254"></a><blockquote class="code"><p class="quoted">
choose row 1 from the Table of Recent Monarchs
</p></blockquote>
<!-- END CODE -->
<p>selects the top row.</p>

<!-- end definition -->
</div>

<p>That allows us to improve the loop:</p>
<!-- START CODE "c1255" -->
<a id="c1255"></a><blockquote class="code"><p class="quoted">
To list the succession:
<br />&#160;&#160;&#160;&#160;say &quot;The Succession List runs as follows...&quot;;
<br />&#160;&#160;&#160;&#160;repeat with N running from 1 to the number of rows in the Table of Recent Monarchs:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row N in the Table of Recent Monarchs;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[accession entry]: [name entry] ([family entry]).&quot;;
</p></blockquote>
<!-- END CODE -->
<p>Actually, as we'll see in the next section, this kind of loop is needed so often that there's a shorthand wording for it.</p>
<p>Note that since &quot;accession&quot; is a column name, &quot;accession entry&quot; means the entry in that column of the currently chosen row. This notation can only be used if a &quot;choose&quot; has certainly already happened, and it is a good idea to make that choice somewhere close by in the source code (and certainly in the same rule or phrase definition) for the sake of avoiding errors. We can also choose rows by specifying something about them, like so:</p>
<!-- START PHRASE "defn226" -->
<div class="definition"><a id="defn226"></a><p class="defnprototype"><b>choose a</b>/the/--<b> row with </b>(table column)<b> of </b>(value)<b> in</b>/from<b> </b>(table name)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_chooserowwith -->

<p>This phrase selects the first row, working down from the top of the given table, in which the given column has the given value. Example:</p>
<!-- START CODE "c1256" -->
<a id="c1256"></a><blockquote class="code"><p class="quoted">
choose row with a name of &quot;Victoria&quot; in the Table of Recent Monarchs;
</p></blockquote>
<!-- END CODE -->
<p>A run-time problem message is produced if the value isn't found anywhere in that column.</p>

<!-- end definition -->
</div>

<p>Sometimes it will happen that a column's name clashes with the name of something else: for instance, if we call a column &quot;apples&quot; but we also have a kind called &quot;apple&quot;, so that the word &quot;apples&quot; could mean either some fruit or the column. Inform will generally prefer the former meaning as more likely. In case of such trouble, we can simply refer to &quot;the apples column&quot; rather than just &quot;the apples&quot;: for instance, &quot;choose row with an apples column of...&quot; rather than &quot;choose row with an apples of...&quot;</p>
<p>We can also choose a row quite at random:</p>
<!-- START PHRASE "defn227" -->
<div class="definition"><a id="defn227"></a><p class="defnprototype"><b>choose a</b>/the/--<b> random row in</b>/from<b> </b>(table name)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_chooserandomrow -->

<p>This phrase makes a uniformly random choice of non-blank rows in the given table. Note that although a table always has at least one row, it can't be guaranteed that it always has a non-blank row, so it's possible for this to fail: if it does, a real-time problem message is thrown.</p>

<!-- end definition -->
</div>

<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_16_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_16_1.html" class="standardlink">Start of Chapter 16: Tables</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_16_4.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_16_4.html" class="standardlink">Back to ยง16.4. Changing entries</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_16_6.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_16_6.html" class="standardlink">Onward to ยง16.6. Repeating through tables</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
