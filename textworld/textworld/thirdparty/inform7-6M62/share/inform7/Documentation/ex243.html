<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>12.9. Check, carry out, report</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง12.9. Check, carry out, report</p>
<p>The normal behaviour of an action is specified by its three associated rulebooks - check, carry out and report. In the case of our &quot;photographing&quot; example, these rulebooks will be:</p>
<!-- START CODE "c868" -->
<a id="c868"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Check photographing</span>. Here, for instance, we need to verify that the player has the camera. If any of our checks fail, we should say why and stop the action. If they succeed, we say nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c869" -->
<a id="c869"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Carry out photographing</span>. At this stage no further checking is needed (or allowed): the action now definitively takes place. At this point we might, for instance, deduct one from the number of exposures left on the film in the camera, or award the player points for capturing something interesting for posterity. But we should say nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c870" -->
<a id="c870"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Report photographing</span>. At this stage no further activity is needed (or allowed): whatever effect the action had, it has happened and is now over. All we can do is to say what has taken place.
</p></blockquote>
<!-- END CODE -->
<p>So far we have not really gone into the business of what rulebooks are, and we don't do so here either - suffice to say that we can now create whatever rules we need:</p>
<!-- START CODE "c871" -->
<a id="c871"></a><blockquote class="code"><p class="quoted">
A check photographing rule:
<br />&#160;&#160;&#160;&#160;if the camera is not carried:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can hardly photograph without a camera, now can you?&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>In fact, writing &quot;a check photographing rule&quot; is over-formal. We can more simply label our rules like so:</p>
<!-- START CODE "c872" -->
<a id="c872"></a><blockquote class="code"><p class="quoted">
Check photographing:
<br />&#160;&#160;&#160;&#160;if we have photographed the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You've already snapped [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c873" -->
<a id="c873"></a><blockquote class="code"><p class="quoted">
Report photographing: say &quot;Click!&quot;
</p></blockquote>
<!-- END CODE -->
<p>For the sake of brevity, photography has no interesting consequence (no points to be won, no film to use up), so there are no carry out rules here. Note the way we used the word &quot;instead&quot; once again to stop actions in their tracks.</p>
<p>We can continue to add rules at any point, and a classic thing that happens when testing a new work is that the designer realises there is a case which has not been thought of:</p>
<!-- START CODE "c874" -->
<a id="c874"></a><blockquote class="code"><p class="quoted">
Check photographing:
<br />&#160;&#160;&#160;&#160;if the noun is the camera:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;That would require some sort of contraption with mirrors.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_12_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_12_1.html" class="standardlink">Start of Chapter 12: Advanced Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12_8.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_12_8.html" class="standardlink">Back to ยง12.8. Irregular English verbs</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12_10.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_12_10.html" class="standardlink">Onward to ยง12.10. Action variables</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e182"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex182.html#e182" class="eglink"><b>194</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex182.html#e182" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Dark Ages Revisited</span></b></a><br />An electric light kind of device which becomes lit when switched on and dark when switched off.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex182.html#e182"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e406"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex406.html#e406" class="eglink"><b>195</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex406.html#e406" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Paddington</span></b></a><br />A CUT [something] WITH [something] command which acts differently on different types of objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex406.html#e406"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e178"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex178.html#e178" class="eglink"><b>196</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex178.html#e178" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Noisemaking</span></b></a><br />Creating a stage after the report stage of an action, during which other characters may observe and react.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex178.html#e178"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e243"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_12_9.html#e243" class="eglink"><b>197</b></a></div>
<div class="egpanel" id="example243">
<p>In some cases, we may want to add new stages to action processing. One possibility is a stage where we check the sanity of what the player is trying to do before executing any of the other commands; so that we avoid, for instance</p>
<!-- START CODE "c12871" -->
<a id="c12871"></a><blockquote class="code"><p class="quoted">
&gt;EAT ROCK
<br />(first taking the rock)
<br />That's plainly inedible.
</p></blockquote>
<!-- END CODE -->
<p>Here is how we might insert such a stage in our action processing, using rulebook manipulation.</p>
<!-- START CODE "c12872" -->
<a id="c12872"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Delicious, Delicious Rocks[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The sanity-check rules are a rulebook.[=0x000A=][=0x000A=]This is the sanity-check stage rule:[=0x000A=][=0x0009=]abide by the sanity-check rules.[=0x000A=][=0x000A=]The sanity-check stage rule is listed after the before stage rule  in the action-processing rules.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]Candyland is a room. The lollipop tree is an edible thing in Candyland. The genuine rock is a thing in Candyland.[=0x000A=][=0x000A=]Sanity-check eating an inedible thing:[=0x000A=][=0x0009=]say [=0x0022=]Your digestion is so delicate -- you[=0x0027=]re sure [the noun] wouldn[=0x0027=]t agree with you.[=0x0022=] instead.[=0x000A=][=0x000A=]Test me with [=0x0022=]eat lollipop / eat rock[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Delicious, Delicious Rocks&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12873" -->
<a id="c12873"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12874" -->
<a id="c12874"></a><blockquote class="code"><p class="quoted">
The sanity-check rules are a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12875" -->
<a id="c12875"></a><blockquote class="code"><p class="quoted">
This is the sanity-check stage rule:
<br />&#160;&#160;&#160;&#160;abide by the sanity-check rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12876" -->
<a id="c12876"></a><blockquote class="code"><p class="quoted">
The sanity-check stage rule is listed after the before stage rule  in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12877" -->
<a id="c12877"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12878" -->
<a id="c12878"></a><blockquote class="code"><p class="quoted">
Candyland is a room. The lollipop tree is an edible thing in Candyland. The genuine rock is a thing in Candyland.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12879" -->
<a id="c12879"></a><blockquote class="code"><p class="quoted">
Sanity-check eating an inedible thing:
<br />&#160;&#160;&#160;&#160;say &quot;Your digestion is so delicate -- you're sure [the noun] wouldn't agree with you.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12880" -->
<a id="c12880"></a><blockquote class="code"><p class="quoted">
Test me with &quot;eat lollipop / eat rock&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Notice that now Inform does not try taking the rock before rejecting the player's attempt to eat it.</p>
<p>It is of course possible to get the same effect with</p>
<!-- START CODE "c12881" -->
<a id="c12881"></a><blockquote class="code"><p class="quoted">
Before eating an inedible thing:
<br />&#160;&#160;&#160;&#160;say &quot;Your digestion is so delicate -- you're sure [the noun] wouldn't agree with you.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>...and in a small game with few rules, there's not much reason to add an extra stage. The ability to modify the stages of action processing becomes useful when we have a fairly large game with sophisticated modeling and want to be sure that some kinds of message (such as the sanity-check) are always handled before other things that we might be doing at the before stage (such as generating implicit actions like opening doors before going through them).</p>
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_12_9.html#e243" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Delicious, Delicious Rocks</span></b></a><br />Adding a "sanity-check" stage to decide whether an action makes any sense, which occurs before any before rules, implicit taking, or check rules.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example243">
<p>In some cases, we may want to add new stages to action processing. One possibility is a stage where we check the sanity of what the player is trying to do before executing any of the other commands; so that we avoid, for instance</p>
<!-- START CODE "c12882" -->
<a id="c12882"></a><blockquote class="code"><p class="quoted">
&gt;EAT ROCK
<br />(first taking the rock)
<br />That's plainly inedible.
</p></blockquote>
<!-- END CODE -->
<p>Here is how we might insert such a stage in our action processing, using rulebook manipulation.</p>
<!-- START CODE "c12883" -->
<a id="c12883"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Delicious, Delicious Rocks[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The sanity-check rules are a rulebook.[=0x000A=][=0x000A=]This is the sanity-check stage rule:[=0x000A=][=0x0009=]abide by the sanity-check rules.[=0x000A=][=0x000A=]The sanity-check stage rule is listed after the before stage rule  in the action-processing rules.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]Candyland is a room. The lollipop tree is an edible thing in Candyland. The genuine rock is a thing in Candyland.[=0x000A=][=0x000A=]Sanity-check eating an inedible thing:[=0x000A=][=0x0009=]say [=0x0022=]Your digestion is so delicate -- you[=0x0027=]re sure [the noun] wouldn[=0x0027=]t agree with you.[=0x0022=] instead.[=0x000A=][=0x000A=]Test me with [=0x0022=]eat lollipop / eat rock[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Delicious, Delicious Rocks&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12884" -->
<a id="c12884"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12885" -->
<a id="c12885"></a><blockquote class="code"><p class="quoted">
The sanity-check rules are a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12886" -->
<a id="c12886"></a><blockquote class="code"><p class="quoted">
This is the sanity-check stage rule:
<br />&#160;&#160;&#160;&#160;abide by the sanity-check rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12887" -->
<a id="c12887"></a><blockquote class="code"><p class="quoted">
The sanity-check stage rule is listed after the before stage rule  in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12888" -->
<a id="c12888"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12889" -->
<a id="c12889"></a><blockquote class="code"><p class="quoted">
Candyland is a room. The lollipop tree is an edible thing in Candyland. The genuine rock is a thing in Candyland.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12890" -->
<a id="c12890"></a><blockquote class="code"><p class="quoted">
Sanity-check eating an inedible thing:
<br />&#160;&#160;&#160;&#160;say &quot;Your digestion is so delicate -- you're sure [the noun] wouldn't agree with you.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12891" -->
<a id="c12891"></a><blockquote class="code"><p class="quoted">
Test me with &quot;eat lollipop / eat rock&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Notice that now Inform does not try taking the rock before rejecting the player's attempt to eat it.</p>
<p>It is of course possible to get the same effect with</p>
<!-- START CODE "c12892" -->
<a id="c12892"></a><blockquote class="code"><p class="quoted">
Before eating an inedible thing:
<br />&#160;&#160;&#160;&#160;say &quot;Your digestion is so delicate -- you're sure [the noun] wouldn't agree with you.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>...and in a small game with few rules, there's not much reason to add an extra stage. The ability to modify the stages of action processing becomes useful when we have a fairly large game with sophisticated modeling and want to be sure that some kinds of message (such as the sanity-check) are always handled before other things that we might be doing at the before stage (such as generating implicit actions like opening doors before going through them).</p>
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex243.html#e243"><i>RB</i></a></div>
<div class="egpanel" id="example243">
<p>In some cases, we may want to add new stages to action processing. One possibility is a stage where we check the sanity of what the player is trying to do before executing any of the other commands; so that we avoid, for instance</p>
<!-- START CODE "c12893" -->
<a id="c12893"></a><blockquote class="code"><p class="quoted">
&gt;EAT ROCK
<br />(first taking the rock)
<br />That's plainly inedible.
</p></blockquote>
<!-- END CODE -->
<p>Here is how we might insert such a stage in our action processing, using rulebook manipulation.</p>
<!-- START CODE "c12894" -->
<a id="c12894"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Delicious, Delicious Rocks[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The sanity-check rules are a rulebook.[=0x000A=][=0x000A=]This is the sanity-check stage rule:[=0x000A=][=0x0009=]abide by the sanity-check rules.[=0x000A=][=0x000A=]The sanity-check stage rule is listed after the before stage rule  in the action-processing rules.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]Candyland is a room. The lollipop tree is an edible thing in Candyland. The genuine rock is a thing in Candyland.[=0x000A=][=0x000A=]Sanity-check eating an inedible thing:[=0x000A=][=0x0009=]say [=0x0022=]Your digestion is so delicate -- you[=0x0027=]re sure [the noun] wouldn[=0x0027=]t agree with you.[=0x0022=] instead.[=0x000A=][=0x000A=]Test me with [=0x0022=]eat lollipop / eat rock[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Delicious, Delicious Rocks&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12895" -->
<a id="c12895"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12896" -->
<a id="c12896"></a><blockquote class="code"><p class="quoted">
The sanity-check rules are a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12897" -->
<a id="c12897"></a><blockquote class="code"><p class="quoted">
This is the sanity-check stage rule:
<br />&#160;&#160;&#160;&#160;abide by the sanity-check rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12898" -->
<a id="c12898"></a><blockquote class="code"><p class="quoted">
The sanity-check stage rule is listed after the before stage rule  in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12899" -->
<a id="c12899"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12900" -->
<a id="c12900"></a><blockquote class="code"><p class="quoted">
Candyland is a room. The lollipop tree is an edible thing in Candyland. The genuine rock is a thing in Candyland.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12901" -->
<a id="c12901"></a><blockquote class="code"><p class="quoted">
Sanity-check eating an inedible thing:
<br />&#160;&#160;&#160;&#160;say &quot;Your digestion is so delicate -- you're sure [the noun] wouldn't agree with you.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12902" -->
<a id="c12902"></a><blockquote class="code"><p class="quoted">
Test me with &quot;eat lollipop / eat rock&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Notice that now Inform does not try taking the rock before rejecting the player's attempt to eat it.</p>
<p>It is of course possible to get the same effect with</p>
<!-- START CODE "c12903" -->
<a id="c12903"></a><blockquote class="code"><p class="quoted">
Before eating an inedible thing:
<br />&#160;&#160;&#160;&#160;say &quot;Your digestion is so delicate -- you're sure [the noun] wouldn't agree with you.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>...and in a small game with few rules, there's not much reason to add an extra stage. The ability to modify the stages of action processing becomes useful when we have a fairly large game with sophisticated modeling and want to be sure that some kinds of message (such as the sanity-check) are always handled before other things that we might be doing at the before stage (such as generating implicit actions like opening doors before going through them).</p>
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
