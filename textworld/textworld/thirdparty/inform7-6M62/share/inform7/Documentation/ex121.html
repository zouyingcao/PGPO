<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>19.13. Rulebooks producing values</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง19.13. Rulebooks producing values</p>
<p>We have now seen two ways to write the outcome of a rule: as simple success or failure, with more or less explicit phrases like:</p>
<!-- START CODE "c1641" -->
<a id="c1641"></a><blockquote class="code"><p class="quoted">
rule succeeds;
<br />rule fails;
<br />continue the action;
<br />stop the action;
</p></blockquote>
<!-- END CODE -->
<p>and by using a named outcome for the current rulebook as if it were a phrase, as in:</p>
<!-- START CODE "c1642" -->
<a id="c1642"></a><blockquote class="code"><p class="quoted">
low background noise;
</p></blockquote>
<!-- END CODE -->
<p>There is still a third way: we can stop a rule and at the same time produce a value. This isn't needed very often - none of the built-in rulebooks in the Standard Rules produces a value.</p>
<p>As we've seen, every rulebook has one kind of value as its basis, and it also has another kind of value for it to produce. If we call these K and L, then we have altogether four ways to write down the kind of a rulebook:</p>
<!-- START CODE "c1643" -->
<a id="c1643"></a><blockquote class="code"><p class="quoted">
rulebook
<br />K based rulebook
<br />rulebook producing L
<br />K based rulebook producing L
</p></blockquote>
<!-- END CODE -->
<p>If we don't mention K, Inform assumes the rulebook is action based. If we don't mention L, Inform assumes L is &quot;nothing&quot;, that is, Inform assumes no value is ever produced. Thus</p>
<!-- START CODE "c1644" -->
<a id="c1644"></a><blockquote class="code"><p class="quoted">
Drum summons rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<p>is equivalent to</p>
<!-- START CODE "c1645" -->
<a id="c1645"></a><blockquote class="code"><p class="quoted">
Drum summons rules is an action based rulebook producing nothing.
</p></blockquote>
<!-- END CODE -->
<p>But let's now look at a rulebook which does produce something.</p>
<!-- START CODE "c1646" -->
<a id="c1646"></a><blockquote class="code"><p class="quoted">
The cat behavior rules is a rulebook producing an object.
</p></blockquote>
<!-- END CODE -->
<p>This rulebook works out which thing the cat will destroy next. We might have rules like this one:</p>
<!-- START CODE "c1647" -->
<a id="c1647"></a><blockquote class="code"><p class="quoted">
Cat behavior when Austin can see the ball of wool:
<br />&#160;&#160;&#160;&#160;rule succeeds with result the ball of wool.
</p></blockquote>
<!-- END CODE -->
<p>The value is produced only when a rule succeeds, using this phrase:</p>
<!-- START PHRASE "defn281" -->
<div class="definition"><a id="defn281"></a><p class="defnprototype"><b>rule succeeds with result </b>(value)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_succeedswith -->

<p>This phrase can only be used in a rule which produces a value, and the value given must be of the right kind. It causes the current rule to finish immediately, to succeed, and to produce the value given.</p>

<!-- end definition -->
</div>

<p>How are we to use the cat behavior rulebook? If we write:</p>
<!-- START CODE "c1648" -->
<a id="c1648"></a><blockquote class="code"><p class="quoted">
follow cat behavior
</p></blockquote>
<!-- END CODE -->
<p>then the rulebook runs just as any other rulebook would, but the value produced is lost at the end, which defeats the point. Instead, we might write:</p>
<!-- START CODE "c1649" -->
<a id="c1649"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let the destroyed object be the object produced by the cat behavior rules;
<br />&#160;&#160;&#160;&#160;if the destroyed object is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Austin pounces on [the destroyed object] in a flurry.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the destroyed object is nowhere.
</p></blockquote>
<!-- END CODE -->
<p>The key phrase here is</p>
<!-- START CODE "c1650" -->
<a id="c1650"></a><blockquote class="code"><p class="quoted">
object produced by the cat behavior rules
</p></blockquote>
<!-- END CODE -->
<p>which accesses the value this rulebook produces. In general, we write:</p>
<!-- START PHRASE "defn282" -->
<div class="definition"><a id="defn282"></a><p class="defnprototype"><b></b>(name of kind)<b> produced by </b>(rule producing values)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_producedby -->

<p>This phrase is used to follow the named rule, and to collect the resulting value.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn283" -->
<div class="definition"><a id="defn283"></a><p class="defnprototype"><b></b>(name of kind)<b> produced by </b>(values based rule producing values)<b> for </b>(value)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_producedbyfor -->

<p>This phrase is used to follow the named rule based on the value given, and to collect the resulting value.</p>

<!-- end definition -->
</div>

<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_19_1.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19_12.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_19_12.html" class="standardlink">Back to ยง19.12. Named outcomes</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19_14.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_19_14.html" class="standardlink">Onward to ยง19.14. Abide by</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e121"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_19_13.html#e121" class="eglink"><b>406</b></a></div>
<div class="egpanel" id="example121">
<p>Suppose we have a cat which is supposed to react to (and destroy) the most interesting thing in its environment. There are several ways we could approach this problem, but for the sake of demonstration, let's have it follow a rulebook to figure out which thing it most wants to interact with. We will then return the chosen object as &quot;the object produced by the cat behavior rules&quot;.</p>
<!-- START CODE "c7537" -->
<a id="c7537"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Feline Behavior[=0x0022=][=0x000A=][=0x000A=]The Kitchen is a room. The cat is an animal in the Kitchen. In the Kitchen is a bowl, a ball of wool, a newspaper. The bowl contains a quantity of cream.[=0x000A=][=0x000A=]The cat is wearing a silver collar. The description of the cat is [=0x0022=]It is wearing [a list of things worn by the cat].[=0x0022=][=0x000A=][=0x000A=]The player carries a closed openable container called a bag. The bag contains catnip.[=0x000A=][=0x000A=]The cat behavior rules is a rulebook producing an object.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the catnip:[=0x000A=][=0x0009=]say [=0x0022=]The cat frolics with the catnip until nothing remains of it.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result catnip.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the cream:[=0x000A=][=0x0009=]say [=0x0022=]The cat laps up the cream.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result cream.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the ball of wool:[=0x000A=][=0x0009=]say [=0x0022=]The cat makes the ball of wool into a useless tangle which must be discarded.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result ball.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the newspaper:[=0x000A=][=0x0009=]say [=0x0022=]The cat bats playfully at the newspaper until all the nasty boring articles are destroyed.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result newspaper.[=0x000A=][=0x000A=]A cat behavior rule:[=0x000A=][=0x0009=]say [=0x0022=]The cat looks miffed at the lack of ready entertainment, and glares at you with yellow eyes as though wondering whether your pants leg is good for claw-sharpening.[=0x0022=];[=0x000A=][=0x0009=]rule fails.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let the destroyed object be the object produced by the cat behavior rules;[=0x000A=][=0x0009=]if the destroyed object is not nothing:[=0x000A=][=0x0009=][=0x0009=]now the destroyed object is nowhere;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break]Good thing you have no use for [the destroyed object] yourself.[paragraph break][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / open bag / z / z[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Feline Behavior&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7538" -->
<a id="c7538"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. The cat is an animal in the Kitchen. In the Kitchen is a bowl, a ball of wool, a newspaper. The bowl contains a quantity of cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7539" -->
<a id="c7539"></a><blockquote class="code"><p class="quoted">
The cat is wearing a silver collar. The description of the cat is &quot;It is wearing [a list of things worn by the cat].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7540" -->
<a id="c7540"></a><blockquote class="code"><p class="quoted">
The player carries a closed openable container called a bag. The bag contains catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7541" -->
<a id="c7541"></a><blockquote class="code"><p class="quoted">
The cat behavior rules is a rulebook producing an object.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7542" -->
<a id="c7542"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the catnip:
<br />&#160;&#160;&#160;&#160;say &quot;The cat frolics with the catnip until nothing remains of it.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7543" -->
<a id="c7543"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the cream:
<br />&#160;&#160;&#160;&#160;say &quot;The cat laps up the cream.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7544" -->
<a id="c7544"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the ball of wool:
<br />&#160;&#160;&#160;&#160;say &quot;The cat makes the ball of wool into a useless tangle which must be discarded.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result ball.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7545" -->
<a id="c7545"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the newspaper:
<br />&#160;&#160;&#160;&#160;say &quot;The cat bats playfully at the newspaper until all the nasty boring articles are destroyed.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result newspaper.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7546" -->
<a id="c7546"></a><blockquote class="code"><p class="quoted">
A cat behavior rule:
<br />&#160;&#160;&#160;&#160;say &quot;The cat looks miffed at the lack of ready entertainment, and glares at you with yellow eyes as though wondering whether your pants leg is good for claw-sharpening.&quot;;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7547" -->
<a id="c7547"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let the destroyed object be the object produced by the cat behavior rules;
<br />&#160;&#160;&#160;&#160;if the destroyed object is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the destroyed object is nowhere;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]Good thing you have no use for [the destroyed object] yourself.[paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7548" -->
<a id="c7548"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / open bag / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
<p>We include the if rule succeeded... condition here because nothing will be returned if the cat's search failed (as for instance in the result of the final rule).</p>
<p>Naturally, if we wanted we could equally well ask &quot;if rule failed...&quot;.</p>
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19_13.html#e121" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Feline Behavior</span></b></a><br />A cat which reacts to whatever items it has handy, returning the result of a rulebook for further processing.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example121">
<p>Suppose we have a cat which is supposed to react to (and destroy) the most interesting thing in its environment. There are several ways we could approach this problem, but for the sake of demonstration, let's have it follow a rulebook to figure out which thing it most wants to interact with. We will then return the chosen object as &quot;the object produced by the cat behavior rules&quot;.</p>
<!-- START CODE "c7549" -->
<a id="c7549"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Feline Behavior[=0x0022=][=0x000A=][=0x000A=]The Kitchen is a room. The cat is an animal in the Kitchen. In the Kitchen is a bowl, a ball of wool, a newspaper. The bowl contains a quantity of cream.[=0x000A=][=0x000A=]The cat is wearing a silver collar. The description of the cat is [=0x0022=]It is wearing [a list of things worn by the cat].[=0x0022=][=0x000A=][=0x000A=]The player carries a closed openable container called a bag. The bag contains catnip.[=0x000A=][=0x000A=]The cat behavior rules is a rulebook producing an object.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the catnip:[=0x000A=][=0x0009=]say [=0x0022=]The cat frolics with the catnip until nothing remains of it.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result catnip.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the cream:[=0x000A=][=0x0009=]say [=0x0022=]The cat laps up the cream.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result cream.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the ball of wool:[=0x000A=][=0x0009=]say [=0x0022=]The cat makes the ball of wool into a useless tangle which must be discarded.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result ball.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the newspaper:[=0x000A=][=0x0009=]say [=0x0022=]The cat bats playfully at the newspaper until all the nasty boring articles are destroyed.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result newspaper.[=0x000A=][=0x000A=]A cat behavior rule:[=0x000A=][=0x0009=]say [=0x0022=]The cat looks miffed at the lack of ready entertainment, and glares at you with yellow eyes as though wondering whether your pants leg is good for claw-sharpening.[=0x0022=];[=0x000A=][=0x0009=]rule fails.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let the destroyed object be the object produced by the cat behavior rules;[=0x000A=][=0x0009=]if the destroyed object is not nothing:[=0x000A=][=0x0009=][=0x0009=]now the destroyed object is nowhere;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break]Good thing you have no use for [the destroyed object] yourself.[paragraph break][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / open bag / z / z[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Feline Behavior&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7550" -->
<a id="c7550"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. The cat is an animal in the Kitchen. In the Kitchen is a bowl, a ball of wool, a newspaper. The bowl contains a quantity of cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7551" -->
<a id="c7551"></a><blockquote class="code"><p class="quoted">
The cat is wearing a silver collar. The description of the cat is &quot;It is wearing [a list of things worn by the cat].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7552" -->
<a id="c7552"></a><blockquote class="code"><p class="quoted">
The player carries a closed openable container called a bag. The bag contains catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7553" -->
<a id="c7553"></a><blockquote class="code"><p class="quoted">
The cat behavior rules is a rulebook producing an object.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7554" -->
<a id="c7554"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the catnip:
<br />&#160;&#160;&#160;&#160;say &quot;The cat frolics with the catnip until nothing remains of it.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7555" -->
<a id="c7555"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the cream:
<br />&#160;&#160;&#160;&#160;say &quot;The cat laps up the cream.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7556" -->
<a id="c7556"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the ball of wool:
<br />&#160;&#160;&#160;&#160;say &quot;The cat makes the ball of wool into a useless tangle which must be discarded.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result ball.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7557" -->
<a id="c7557"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the newspaper:
<br />&#160;&#160;&#160;&#160;say &quot;The cat bats playfully at the newspaper until all the nasty boring articles are destroyed.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result newspaper.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7558" -->
<a id="c7558"></a><blockquote class="code"><p class="quoted">
A cat behavior rule:
<br />&#160;&#160;&#160;&#160;say &quot;The cat looks miffed at the lack of ready entertainment, and glares at you with yellow eyes as though wondering whether your pants leg is good for claw-sharpening.&quot;;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7559" -->
<a id="c7559"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let the destroyed object be the object produced by the cat behavior rules;
<br />&#160;&#160;&#160;&#160;if the destroyed object is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the destroyed object is nowhere;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]Good thing you have no use for [the destroyed object] yourself.[paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7560" -->
<a id="c7560"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / open bag / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
<p>We include the if rule succeeded... condition here because nothing will be returned if the cat's search failed (as for instance in the result of the final rule).</p>
<p>Naturally, if we wanted we could equally well ask &quot;if rule failed...&quot;.</p>
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex121.html#e121"><i>RB</i></a></div>
<div class="egpanel" id="example121">
<p>Suppose we have a cat which is supposed to react to (and destroy) the most interesting thing in its environment. There are several ways we could approach this problem, but for the sake of demonstration, let's have it follow a rulebook to figure out which thing it most wants to interact with. We will then return the chosen object as &quot;the object produced by the cat behavior rules&quot;.</p>
<!-- START CODE "c7561" -->
<a id="c7561"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Feline Behavior[=0x0022=][=0x000A=][=0x000A=]The Kitchen is a room. The cat is an animal in the Kitchen. In the Kitchen is a bowl, a ball of wool, a newspaper. The bowl contains a quantity of cream.[=0x000A=][=0x000A=]The cat is wearing a silver collar. The description of the cat is [=0x0022=]It is wearing [a list of things worn by the cat].[=0x0022=][=0x000A=][=0x000A=]The player carries a closed openable container called a bag. The bag contains catnip.[=0x000A=][=0x000A=]The cat behavior rules is a rulebook producing an object.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the catnip:[=0x000A=][=0x0009=]say [=0x0022=]The cat frolics with the catnip until nothing remains of it.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result catnip.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the cream:[=0x000A=][=0x0009=]say [=0x0022=]The cat laps up the cream.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result cream.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the ball of wool:[=0x000A=][=0x0009=]say [=0x0022=]The cat makes the ball of wool into a useless tangle which must be discarded.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result ball.[=0x000A=][=0x000A=]A cat behavior rule when the cat can touch the newspaper:[=0x000A=][=0x0009=]say [=0x0022=]The cat bats playfully at the newspaper until all the nasty boring articles are destroyed.[=0x0022=];[=0x000A=][=0x0009=]rule succeeds with result newspaper.[=0x000A=][=0x000A=]A cat behavior rule:[=0x000A=][=0x0009=]say [=0x0022=]The cat looks miffed at the lack of ready entertainment, and glares at you with yellow eyes as though wondering whether your pants leg is good for claw-sharpening.[=0x0022=];[=0x000A=][=0x0009=]rule fails.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let the destroyed object be the object produced by the cat behavior rules;[=0x000A=][=0x0009=]if the destroyed object is not nothing:[=0x000A=][=0x0009=][=0x0009=]now the destroyed object is nowhere;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break]Good thing you have no use for [the destroyed object] yourself.[paragraph break][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / open bag / z / z[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Feline Behavior&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7562" -->
<a id="c7562"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. The cat is an animal in the Kitchen. In the Kitchen is a bowl, a ball of wool, a newspaper. The bowl contains a quantity of cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7563" -->
<a id="c7563"></a><blockquote class="code"><p class="quoted">
The cat is wearing a silver collar. The description of the cat is &quot;It is wearing [a list of things worn by the cat].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7564" -->
<a id="c7564"></a><blockquote class="code"><p class="quoted">
The player carries a closed openable container called a bag. The bag contains catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7565" -->
<a id="c7565"></a><blockquote class="code"><p class="quoted">
The cat behavior rules is a rulebook producing an object.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7566" -->
<a id="c7566"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the catnip:
<br />&#160;&#160;&#160;&#160;say &quot;The cat frolics with the catnip until nothing remains of it.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7567" -->
<a id="c7567"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the cream:
<br />&#160;&#160;&#160;&#160;say &quot;The cat laps up the cream.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7568" -->
<a id="c7568"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the ball of wool:
<br />&#160;&#160;&#160;&#160;say &quot;The cat makes the ball of wool into a useless tangle which must be discarded.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result ball.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7569" -->
<a id="c7569"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the newspaper:
<br />&#160;&#160;&#160;&#160;say &quot;The cat bats playfully at the newspaper until all the nasty boring articles are destroyed.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result newspaper.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7570" -->
<a id="c7570"></a><blockquote class="code"><p class="quoted">
A cat behavior rule:
<br />&#160;&#160;&#160;&#160;say &quot;The cat looks miffed at the lack of ready entertainment, and glares at you with yellow eyes as though wondering whether your pants leg is good for claw-sharpening.&quot;;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7571" -->
<a id="c7571"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let the destroyed object be the object produced by the cat behavior rules;
<br />&#160;&#160;&#160;&#160;if the destroyed object is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the destroyed object is nowhere;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]Good thing you have no use for [the destroyed object] yourself.[paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7572" -->
<a id="c7572"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / open bag / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
<p>We include the if rule succeeded... condition here because nothing will be returned if the cat's search failed (as for instance in the result of the final rule).</p>
<p>Naturally, if we wanted we could equally well ask &quot;if rule failed...&quot;.</p>
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<a id="e21"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex21.html#e21" class="eglink"><b>407</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex21.html#e21" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Tilt 2</span></b></a><br />A deck of cards with fully implemented individual cards; when the player has a full poker hand, the inventory listing describes the resulting hand accordingly.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex21.html#e21"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
