<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>13.10. Defining new prepositions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง13.10. Defining new prepositions</p>
<p>The term preposition is used here, a little loosely, to mean anything which we add to the verb <span class="italic">to be</span> in order to talk about some relation or other. We have seen many examples already, such as:</p>
<!-- START CODE "c970" -->
<a id="c970"></a><blockquote class="code"><p class="quoted">
To be in - The ball is in the box.
<br />To be part of - The lever is part of the slot machine.
</p></blockquote>
<!-- END CODE -->
<p>These are defined just the way verbs are. Compare the following:</p>
<!-- START CODE "c971" -->
<a id="c971"></a><blockquote class="code"><p class="quoted">
Suspicion relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c972" -->
<a id="c972"></a><blockquote class="code"><p class="quoted">
The verb to suspect means the suspicion relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c973" -->
<a id="c973"></a><blockquote class="code"><p class="quoted">
The verb to be suspicious of means the suspicion relation.
</p></blockquote>
<!-- END CODE -->
<p>The result of this is that</p>
<!-- START CODE "c974" -->
<a id="c974"></a><blockquote class="code"><p class="quoted">
Hercule Poirot suspects Colonel Hotchkiss.
<br />Hercule Poirot is suspicious of Colonel Hotchkiss.
</p></blockquote>
<!-- END CODE -->
<p>are exactly equivalent, and so are these two descriptions:</p>
<!-- START CODE "c975" -->
<a id="c975"></a><blockquote class="code"><p class="quoted">
somebody who suspects Colonel Hotchkiss
<br />somebody suspicious of Colonel Hotchkiss
</p></blockquote>
<!-- END CODE -->
<p>While most prepositions are short (&quot;in&quot;, &quot;part of&quot;, &quot;suspicious of&quot;), they're free to be longer if need be (&quot;inordinately far away from&quot;): the limit is 30 words, which should be ample.</p>
<p>We can also define verbs as auxiliaries, like so:</p>
<!-- START CODE "c976" -->
<a id="c976"></a><blockquote class="code"><p class="quoted">
The verb to be able to approach means the approachability relation.
</p></blockquote>
<!-- END CODE -->
<p>Now we can ask if Poirot &quot;can approach&quot; Hotchkiss, and so on.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_13_1.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13_9.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_13_9.html" class="standardlink">Back to ยง13.9. Defining new assertion verbs</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13_11.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_13_11.html" class="standardlink">Onward to ยง13.11. Indirect relations</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e40"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex40.html#e40" class="eglink"><b>231</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex40.html#e40" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Swerve left? Swerve right? Or think about it and die?</span></b></a><br />Building a marble chute track in which a dropped marble will automatically roll downhill.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex40.html#e40"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e183"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex183.html#e183" class="eglink"><b>232</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex183.html#e183" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Beneath the Surface</span></b></a><br />An "underlying" relation which adds to the world model the idea of objects hidden under other objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex183.html#e183"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e265"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex265.html#e265" class="eglink"><b>233</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex265.html#e265" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Abolition of Love</span></b></a><br />A thorough exploration of all the kinds of relations established so far, with the syntax to set and unset them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex265.html#e265"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e247"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_13_10.html#e247" class="eglink"><b>234</b></a></div>
<div class="egpanel" id="example247">
<p>We have two things to keep track of with our layering clothing: what currently is covering something else; and what <span class="italic">can</span> cover something else. This implementation goes for a fairly simple treatment, assuming that each item of clothing will completely conceal those beneath it, and that we are not implementing entire sets of shirts, jackets, etc. But it will do for a demonstration.</p>
<!-- START CODE "c13012" -->
<a id="c13012"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Bogart[=0x0022=][=0x000A=][=0x000A=]Section 1 - Clothing Behavior[=0x000A=][=0x000A=][First we make our relation to represent what *is* underneath another item:][=0x000A=][=0x000A=]Underlying relates one thing to various things. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.[=0x000A=][=0x000A=][And now we prevent taking a lower layer off before the thing that is worn over it:][=0x000A=][=0x000A=]Before taking off something which underlies something (called the impediment) which is worn by the player:[=0x000A=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=]silently try taking off the impediment;[=0x000A=]if the noun underlies something which is worn by the player, stop the action.[=0x000A=][=0x000A=]Check taking off:[=0x000A=][=0x0009=]if the noun underlies something (called the impediment) which is worn by the player, say [=0x0022=][The impediment] [are] in the way.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out taking off:[=0x000A=][=0x0009=]now the noun is not underlaid by anything.[=0x000A=][=0x000A=]Report taking off something:[=0x000A=][=0x0009=]say [=0x0022=][We] [are] now wearing [a list of uppermost things worn by the player].[=0x0022=] instead.[=0x000A=][=0x000A=]Definition: a thing is uppermost if it is not under something.[=0x000A=][=0x000A=][That covers order of clothing removal, but we also want to restrict what can be worn on top of what else. This time we need Inform to have some idea of what customarily can be layered on top of what other clothing:][=0x000A=][=0x000A=]Overlying relates one thing to various things. The verb to overlie means the overlying relation.[=0x000A=][=0x000A=]Covering relates a thing (called A) to a thing (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.[=0x000A=][=0x000A=][With these definitions, we can say that a jacket should go over a shirt and a shirt over an undershirt (say), and then Inform will know that a jacket will cover both shirt and undershirt.][=0x000A=][=0x000A=]Before wearing something when something (called the impediment) which covers the noun is worn by the player:[=0x000A=][=0x0009=]while the player wears something which covers the noun:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]silently try taking off the impediment;[=0x000A=][=0x0009=][=0x0009=]if the player is wearing the impediment, stop the action.[=0x000A=][=0x000A=]Carry out wearing:[=0x000A=][=0x0009=]if the noun covers something (called the hidden item) worn by the player, now the hidden item underlies the noun.[=0x000A=][=0x000A=]Instead of looking under something which is worn by the player:[=0x000A=][=0x0009=]if something (called the underwear) underlies the noun, say [=0x0022=][We] [peek] at [the underwear]. Yup, still there.[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=]Just [us] in there.[=0x0022=][=0x000A=][=0x000A=]Instead of taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][if the player carries something][We][[=0x0027=]re] carrying [a list of things carried by the player][else][We][[=0x0027=]re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost things worn by the player][end if].[=0x0022=][=0x000A=][=0x000A=]To peek is a verb.[=0x000A=][=0x000A=][Notice that our inventory only describes the things that the player can see as the upper layer of clothing.][=0x000A=][=0x000A=]Section 2 - The Scenario[=0x000A=][=0x000A=]The Trailer is a room. [=0x0022=]A full-length mirror is the main amenity in here, and that suits you just fine.[=0x0022=]  The full-length mirror is scenery in the Trailer. Instead of examining or searching the mirror, try taking inventory.[=0x000A=][=0x000A=]The player wears a fedora, a jacket, a shirt, some undershorts, an undershirt, some slacks, a pair of socks, and a pair of shoes.[=0x000A=][=0x000A=]The shirt underlies the jacket. The pair of socks underlies the pair of shoes. The undershorts underlie the slacks. The undershirt underlies the shirt.[=0x000A=][=0x000A=]The jacket overlies the shirt. The shoes overlie the socks. The slacks overlie the undershorts. The shirt overlies the undershirt.[=0x000A=][=0x000A=]Test me with [=0x0022=]x mirror / remove fedora / remove jacket / remove shirt / remove slacks / remove undershirt / remove shoes / remove socks / remove shorts / remove undershorts[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Bogart&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13013" -->
<a id="c13013"></a><blockquote class="code"><p class="quoted">
Section 1 - Clothing Behavior
</p></blockquote>
<!-- END CODE -->
<p>First we make our relation to represent what *is* underneath another item:</p>
<!-- START CODE "c13014" -->
<a id="c13014"></a><blockquote class="code"><p class="quoted">
Underlying relates one thing to various things. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.
</p></blockquote>
<!-- END CODE -->
<p>And now we prevent taking a lower layer off before the thing that is worn over it:</p>
<!-- START CODE "c13015" -->
<a id="c13015"></a><blockquote class="code"><p class="quoted">
Before taking off something which underlies something (called the impediment) which is worn by the player:
<br />say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />silently try taking off the impediment;
<br />if the noun underlies something which is worn by the player, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13016" -->
<a id="c13016"></a><blockquote class="code"><p class="quoted">
Check taking off:
<br />&#160;&#160;&#160;&#160;if the noun underlies something (called the impediment) which is worn by the player, say &quot;[The impediment] [are] in the way.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13017" -->
<a id="c13017"></a><blockquote class="code"><p class="quoted">
Carry out taking off:
<br />&#160;&#160;&#160;&#160;now the noun is not underlaid by anything.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13018" -->
<a id="c13018"></a><blockquote class="code"><p class="quoted">
Report taking off something:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] now wearing [a list of uppermost things worn by the player].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13019" -->
<a id="c13019"></a><blockquote class="code"><p class="quoted">
Definition: a thing is uppermost if it is not under something.
</p></blockquote>
<!-- END CODE -->
<p>That covers order of clothing removal, but we also want to restrict what can be worn on top of what else. This time we need Inform to have some idea of what customarily can be layered on top of what other clothing:</p>
<!-- START CODE "c13020" -->
<a id="c13020"></a><blockquote class="code"><p class="quoted">
Overlying relates one thing to various things. The verb to overlie means the overlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13021" -->
<a id="c13021"></a><blockquote class="code"><p class="quoted">
Covering relates a thing (called A) to a thing (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.
</p></blockquote>
<!-- END CODE -->
<p>With these definitions, we can say that a jacket should go over a shirt and a shirt over an undershirt (say), and then Inform will know that a jacket will cover both shirt and undershirt.</p>
<!-- START CODE "c13022" -->
<a id="c13022"></a><blockquote class="code"><p class="quoted">
Before wearing something when something (called the impediment) which covers the noun is worn by the player:
<br />&#160;&#160;&#160;&#160;while the player wears something which covers the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is wearing the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13023" -->
<a id="c13023"></a><blockquote class="code"><p class="quoted">
Carry out wearing:
<br />&#160;&#160;&#160;&#160;if the noun covers something (called the hidden item) worn by the player, now the hidden item underlies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13024" -->
<a id="c13024"></a><blockquote class="code"><p class="quoted">
Instead of looking under something which is worn by the player:
<br />&#160;&#160;&#160;&#160;if something (called the underwear) underlies the noun, say &quot;[We] [peek] at [the underwear]. Yup, still there.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Just [us] in there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13025" -->
<a id="c13025"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][else][We]['re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost things worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13026" -->
<a id="c13026"></a><blockquote class="code"><p class="quoted">
To peek is a verb.
</p></blockquote>
<!-- END CODE -->
<p>Notice that our inventory only describes the things that the player can see as the upper layer of clothing.</p>
<!-- START CODE "c13027" -->
<a id="c13027"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13028" -->
<a id="c13028"></a><blockquote class="code"><p class="quoted">
The Trailer is a room. &quot;A full-length mirror is the main amenity in here, and that suits you just fine.&quot;  The full-length mirror is scenery in the Trailer. Instead of examining or searching the mirror, try taking inventory.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13029" -->
<a id="c13029"></a><blockquote class="code"><p class="quoted">
The player wears a fedora, a jacket, a shirt, some undershorts, an undershirt, some slacks, a pair of socks, and a pair of shoes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13030" -->
<a id="c13030"></a><blockquote class="code"><p class="quoted">
The shirt underlies the jacket. The pair of socks underlies the pair of shoes. The undershorts underlie the slacks. The undershirt underlies the shirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13031" -->
<a id="c13031"></a><blockquote class="code"><p class="quoted">
The jacket overlies the shirt. The shoes overlie the socks. The slacks overlie the undershorts. The shirt overlies the undershirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13032" -->
<a id="c13032"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x mirror / remove fedora / remove jacket / remove shirt / remove slacks / remove undershirt / remove shoes / remove socks / remove shorts / remove undershorts&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we further wanted to prevent the player from taking off clothes in inappropriate places, we might add something like this:</p>
<!-- START CODE "c13033" -->
<a id="c13033"></a><blockquote class="code"><p class="quoted">
Instead of taking off something in the presence of someone who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] far too modest to strip in public.&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13_10.html#e247" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Bogart</span></b></a><br />Clothing for the player that layers, so that items cannot be taken off in the wrong order, and the player's inventory lists only the clothing that is currently visible.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example247">
<p>We have two things to keep track of with our layering clothing: what currently is covering something else; and what <span class="italic">can</span> cover something else. This implementation goes for a fairly simple treatment, assuming that each item of clothing will completely conceal those beneath it, and that we are not implementing entire sets of shirts, jackets, etc. But it will do for a demonstration.</p>
<!-- START CODE "c13034" -->
<a id="c13034"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Bogart[=0x0022=][=0x000A=][=0x000A=]Section 1 - Clothing Behavior[=0x000A=][=0x000A=][First we make our relation to represent what *is* underneath another item:][=0x000A=][=0x000A=]Underlying relates one thing to various things. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.[=0x000A=][=0x000A=][And now we prevent taking a lower layer off before the thing that is worn over it:][=0x000A=][=0x000A=]Before taking off something which underlies something (called the impediment) which is worn by the player:[=0x000A=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=]silently try taking off the impediment;[=0x000A=]if the noun underlies something which is worn by the player, stop the action.[=0x000A=][=0x000A=]Check taking off:[=0x000A=][=0x0009=]if the noun underlies something (called the impediment) which is worn by the player, say [=0x0022=][The impediment] [are] in the way.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out taking off:[=0x000A=][=0x0009=]now the noun is not underlaid by anything.[=0x000A=][=0x000A=]Report taking off something:[=0x000A=][=0x0009=]say [=0x0022=][We] [are] now wearing [a list of uppermost things worn by the player].[=0x0022=] instead.[=0x000A=][=0x000A=]Definition: a thing is uppermost if it is not under something.[=0x000A=][=0x000A=][That covers order of clothing removal, but we also want to restrict what can be worn on top of what else. This time we need Inform to have some idea of what customarily can be layered on top of what other clothing:][=0x000A=][=0x000A=]Overlying relates one thing to various things. The verb to overlie means the overlying relation.[=0x000A=][=0x000A=]Covering relates a thing (called A) to a thing (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.[=0x000A=][=0x000A=][With these definitions, we can say that a jacket should go over a shirt and a shirt over an undershirt (say), and then Inform will know that a jacket will cover both shirt and undershirt.][=0x000A=][=0x000A=]Before wearing something when something (called the impediment) which covers the noun is worn by the player:[=0x000A=][=0x0009=]while the player wears something which covers the noun:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]silently try taking off the impediment;[=0x000A=][=0x0009=][=0x0009=]if the player is wearing the impediment, stop the action.[=0x000A=][=0x000A=]Carry out wearing:[=0x000A=][=0x0009=]if the noun covers something (called the hidden item) worn by the player, now the hidden item underlies the noun.[=0x000A=][=0x000A=]Instead of looking under something which is worn by the player:[=0x000A=][=0x0009=]if something (called the underwear) underlies the noun, say [=0x0022=][We] [peek] at [the underwear]. Yup, still there.[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=]Just [us] in there.[=0x0022=][=0x000A=][=0x000A=]Instead of taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][if the player carries something][We][[=0x0027=]re] carrying [a list of things carried by the player][else][We][[=0x0027=]re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost things worn by the player][end if].[=0x0022=][=0x000A=][=0x000A=]To peek is a verb.[=0x000A=][=0x000A=][Notice that our inventory only describes the things that the player can see as the upper layer of clothing.][=0x000A=][=0x000A=]Section 2 - The Scenario[=0x000A=][=0x000A=]The Trailer is a room. [=0x0022=]A full-length mirror is the main amenity in here, and that suits you just fine.[=0x0022=]  The full-length mirror is scenery in the Trailer. Instead of examining or searching the mirror, try taking inventory.[=0x000A=][=0x000A=]The player wears a fedora, a jacket, a shirt, some undershorts, an undershirt, some slacks, a pair of socks, and a pair of shoes.[=0x000A=][=0x000A=]The shirt underlies the jacket. The pair of socks underlies the pair of shoes. The undershorts underlie the slacks. The undershirt underlies the shirt.[=0x000A=][=0x000A=]The jacket overlies the shirt. The shoes overlie the socks. The slacks overlie the undershorts. The shirt overlies the undershirt.[=0x000A=][=0x000A=]Test me with [=0x0022=]x mirror / remove fedora / remove jacket / remove shirt / remove slacks / remove undershirt / remove shoes / remove socks / remove shorts / remove undershorts[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Bogart&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13035" -->
<a id="c13035"></a><blockquote class="code"><p class="quoted">
Section 1 - Clothing Behavior
</p></blockquote>
<!-- END CODE -->
<p>First we make our relation to represent what *is* underneath another item:</p>
<!-- START CODE "c13036" -->
<a id="c13036"></a><blockquote class="code"><p class="quoted">
Underlying relates one thing to various things. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.
</p></blockquote>
<!-- END CODE -->
<p>And now we prevent taking a lower layer off before the thing that is worn over it:</p>
<!-- START CODE "c13037" -->
<a id="c13037"></a><blockquote class="code"><p class="quoted">
Before taking off something which underlies something (called the impediment) which is worn by the player:
<br />say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />silently try taking off the impediment;
<br />if the noun underlies something which is worn by the player, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13038" -->
<a id="c13038"></a><blockquote class="code"><p class="quoted">
Check taking off:
<br />&#160;&#160;&#160;&#160;if the noun underlies something (called the impediment) which is worn by the player, say &quot;[The impediment] [are] in the way.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13039" -->
<a id="c13039"></a><blockquote class="code"><p class="quoted">
Carry out taking off:
<br />&#160;&#160;&#160;&#160;now the noun is not underlaid by anything.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13040" -->
<a id="c13040"></a><blockquote class="code"><p class="quoted">
Report taking off something:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] now wearing [a list of uppermost things worn by the player].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13041" -->
<a id="c13041"></a><blockquote class="code"><p class="quoted">
Definition: a thing is uppermost if it is not under something.
</p></blockquote>
<!-- END CODE -->
<p>That covers order of clothing removal, but we also want to restrict what can be worn on top of what else. This time we need Inform to have some idea of what customarily can be layered on top of what other clothing:</p>
<!-- START CODE "c13042" -->
<a id="c13042"></a><blockquote class="code"><p class="quoted">
Overlying relates one thing to various things. The verb to overlie means the overlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13043" -->
<a id="c13043"></a><blockquote class="code"><p class="quoted">
Covering relates a thing (called A) to a thing (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.
</p></blockquote>
<!-- END CODE -->
<p>With these definitions, we can say that a jacket should go over a shirt and a shirt over an undershirt (say), and then Inform will know that a jacket will cover both shirt and undershirt.</p>
<!-- START CODE "c13044" -->
<a id="c13044"></a><blockquote class="code"><p class="quoted">
Before wearing something when something (called the impediment) which covers the noun is worn by the player:
<br />&#160;&#160;&#160;&#160;while the player wears something which covers the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is wearing the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13045" -->
<a id="c13045"></a><blockquote class="code"><p class="quoted">
Carry out wearing:
<br />&#160;&#160;&#160;&#160;if the noun covers something (called the hidden item) worn by the player, now the hidden item underlies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13046" -->
<a id="c13046"></a><blockquote class="code"><p class="quoted">
Instead of looking under something which is worn by the player:
<br />&#160;&#160;&#160;&#160;if something (called the underwear) underlies the noun, say &quot;[We] [peek] at [the underwear]. Yup, still there.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Just [us] in there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13047" -->
<a id="c13047"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][else][We]['re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost things worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13048" -->
<a id="c13048"></a><blockquote class="code"><p class="quoted">
To peek is a verb.
</p></blockquote>
<!-- END CODE -->
<p>Notice that our inventory only describes the things that the player can see as the upper layer of clothing.</p>
<!-- START CODE "c13049" -->
<a id="c13049"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13050" -->
<a id="c13050"></a><blockquote class="code"><p class="quoted">
The Trailer is a room. &quot;A full-length mirror is the main amenity in here, and that suits you just fine.&quot;  The full-length mirror is scenery in the Trailer. Instead of examining or searching the mirror, try taking inventory.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13051" -->
<a id="c13051"></a><blockquote class="code"><p class="quoted">
The player wears a fedora, a jacket, a shirt, some undershorts, an undershirt, some slacks, a pair of socks, and a pair of shoes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13052" -->
<a id="c13052"></a><blockquote class="code"><p class="quoted">
The shirt underlies the jacket. The pair of socks underlies the pair of shoes. The undershorts underlie the slacks. The undershirt underlies the shirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13053" -->
<a id="c13053"></a><blockquote class="code"><p class="quoted">
The jacket overlies the shirt. The shoes overlie the socks. The slacks overlie the undershorts. The shirt overlies the undershirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13054" -->
<a id="c13054"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x mirror / remove fedora / remove jacket / remove shirt / remove slacks / remove undershirt / remove shoes / remove socks / remove shorts / remove undershorts&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we further wanted to prevent the player from taking off clothes in inappropriate places, we might add something like this:</p>
<!-- START CODE "c13055" -->
<a id="c13055"></a><blockquote class="code"><p class="quoted">
Instead of taking off something in the presence of someone who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] far too modest to strip in public.&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex247.html#e247"><i>RB</i></a></div>
<div class="egpanel" id="example247">
<p>We have two things to keep track of with our layering clothing: what currently is covering something else; and what <span class="italic">can</span> cover something else. This implementation goes for a fairly simple treatment, assuming that each item of clothing will completely conceal those beneath it, and that we are not implementing entire sets of shirts, jackets, etc. But it will do for a demonstration.</p>
<!-- START CODE "c13056" -->
<a id="c13056"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Bogart[=0x0022=][=0x000A=][=0x000A=]Section 1 - Clothing Behavior[=0x000A=][=0x000A=][First we make our relation to represent what *is* underneath another item:][=0x000A=][=0x000A=]Underlying relates one thing to various things. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.[=0x000A=][=0x000A=][And now we prevent taking a lower layer off before the thing that is worn over it:][=0x000A=][=0x000A=]Before taking off something which underlies something (called the impediment) which is worn by the player:[=0x000A=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=]silently try taking off the impediment;[=0x000A=]if the noun underlies something which is worn by the player, stop the action.[=0x000A=][=0x000A=]Check taking off:[=0x000A=][=0x0009=]if the noun underlies something (called the impediment) which is worn by the player, say [=0x0022=][The impediment] [are] in the way.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out taking off:[=0x000A=][=0x0009=]now the noun is not underlaid by anything.[=0x000A=][=0x000A=]Report taking off something:[=0x000A=][=0x0009=]say [=0x0022=][We] [are] now wearing [a list of uppermost things worn by the player].[=0x0022=] instead.[=0x000A=][=0x000A=]Definition: a thing is uppermost if it is not under something.[=0x000A=][=0x000A=][That covers order of clothing removal, but we also want to restrict what can be worn on top of what else. This time we need Inform to have some idea of what customarily can be layered on top of what other clothing:][=0x000A=][=0x000A=]Overlying relates one thing to various things. The verb to overlie means the overlying relation.[=0x000A=][=0x000A=]Covering relates a thing (called A) to a thing (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.[=0x000A=][=0x000A=][With these definitions, we can say that a jacket should go over a shirt and a shirt over an undershirt (say), and then Inform will know that a jacket will cover both shirt and undershirt.][=0x000A=][=0x000A=]Before wearing something when something (called the impediment) which covers the noun is worn by the player:[=0x000A=][=0x0009=]while the player wears something which covers the noun:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]silently try taking off the impediment;[=0x000A=][=0x0009=][=0x0009=]if the player is wearing the impediment, stop the action.[=0x000A=][=0x000A=]Carry out wearing:[=0x000A=][=0x0009=]if the noun covers something (called the hidden item) worn by the player, now the hidden item underlies the noun.[=0x000A=][=0x000A=]Instead of looking under something which is worn by the player:[=0x000A=][=0x0009=]if something (called the underwear) underlies the noun, say [=0x0022=][We] [peek] at [the underwear]. Yup, still there.[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=]Just [us] in there.[=0x0022=][=0x000A=][=0x000A=]Instead of taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][if the player carries something][We][[=0x0027=]re] carrying [a list of things carried by the player][else][We][[=0x0027=]re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost things worn by the player][end if].[=0x0022=][=0x000A=][=0x000A=]To peek is a verb.[=0x000A=][=0x000A=][Notice that our inventory only describes the things that the player can see as the upper layer of clothing.][=0x000A=][=0x000A=]Section 2 - The Scenario[=0x000A=][=0x000A=]The Trailer is a room. [=0x0022=]A full-length mirror is the main amenity in here, and that suits you just fine.[=0x0022=]  The full-length mirror is scenery in the Trailer. Instead of examining or searching the mirror, try taking inventory.[=0x000A=][=0x000A=]The player wears a fedora, a jacket, a shirt, some undershorts, an undershirt, some slacks, a pair of socks, and a pair of shoes.[=0x000A=][=0x000A=]The shirt underlies the jacket. The pair of socks underlies the pair of shoes. The undershorts underlie the slacks. The undershirt underlies the shirt.[=0x000A=][=0x000A=]The jacket overlies the shirt. The shoes overlie the socks. The slacks overlie the undershorts. The shirt overlies the undershirt.[=0x000A=][=0x000A=]Test me with [=0x0022=]x mirror / remove fedora / remove jacket / remove shirt / remove slacks / remove undershirt / remove shoes / remove socks / remove shorts / remove undershorts[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Bogart&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13057" -->
<a id="c13057"></a><blockquote class="code"><p class="quoted">
Section 1 - Clothing Behavior
</p></blockquote>
<!-- END CODE -->
<p>First we make our relation to represent what *is* underneath another item:</p>
<!-- START CODE "c13058" -->
<a id="c13058"></a><blockquote class="code"><p class="quoted">
Underlying relates one thing to various things. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.
</p></blockquote>
<!-- END CODE -->
<p>And now we prevent taking a lower layer off before the thing that is worn over it:</p>
<!-- START CODE "c13059" -->
<a id="c13059"></a><blockquote class="code"><p class="quoted">
Before taking off something which underlies something (called the impediment) which is worn by the player:
<br />say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />silently try taking off the impediment;
<br />if the noun underlies something which is worn by the player, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13060" -->
<a id="c13060"></a><blockquote class="code"><p class="quoted">
Check taking off:
<br />&#160;&#160;&#160;&#160;if the noun underlies something (called the impediment) which is worn by the player, say &quot;[The impediment] [are] in the way.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13061" -->
<a id="c13061"></a><blockquote class="code"><p class="quoted">
Carry out taking off:
<br />&#160;&#160;&#160;&#160;now the noun is not underlaid by anything.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13062" -->
<a id="c13062"></a><blockquote class="code"><p class="quoted">
Report taking off something:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] now wearing [a list of uppermost things worn by the player].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13063" -->
<a id="c13063"></a><blockquote class="code"><p class="quoted">
Definition: a thing is uppermost if it is not under something.
</p></blockquote>
<!-- END CODE -->
<p>That covers order of clothing removal, but we also want to restrict what can be worn on top of what else. This time we need Inform to have some idea of what customarily can be layered on top of what other clothing:</p>
<!-- START CODE "c13064" -->
<a id="c13064"></a><blockquote class="code"><p class="quoted">
Overlying relates one thing to various things. The verb to overlie means the overlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13065" -->
<a id="c13065"></a><blockquote class="code"><p class="quoted">
Covering relates a thing (called A) to a thing (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.
</p></blockquote>
<!-- END CODE -->
<p>With these definitions, we can say that a jacket should go over a shirt and a shirt over an undershirt (say), and then Inform will know that a jacket will cover both shirt and undershirt.</p>
<!-- START CODE "c13066" -->
<a id="c13066"></a><blockquote class="code"><p class="quoted">
Before wearing something when something (called the impediment) which covers the noun is worn by the player:
<br />&#160;&#160;&#160;&#160;while the player wears something which covers the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is wearing the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13067" -->
<a id="c13067"></a><blockquote class="code"><p class="quoted">
Carry out wearing:
<br />&#160;&#160;&#160;&#160;if the noun covers something (called the hidden item) worn by the player, now the hidden item underlies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13068" -->
<a id="c13068"></a><blockquote class="code"><p class="quoted">
Instead of looking under something which is worn by the player:
<br />&#160;&#160;&#160;&#160;if something (called the underwear) underlies the noun, say &quot;[We] [peek] at [the underwear]. Yup, still there.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Just [us] in there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13069" -->
<a id="c13069"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][else][We]['re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost things worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13070" -->
<a id="c13070"></a><blockquote class="code"><p class="quoted">
To peek is a verb.
</p></blockquote>
<!-- END CODE -->
<p>Notice that our inventory only describes the things that the player can see as the upper layer of clothing.</p>
<!-- START CODE "c13071" -->
<a id="c13071"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13072" -->
<a id="c13072"></a><blockquote class="code"><p class="quoted">
The Trailer is a room. &quot;A full-length mirror is the main amenity in here, and that suits you just fine.&quot;  The full-length mirror is scenery in the Trailer. Instead of examining or searching the mirror, try taking inventory.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13073" -->
<a id="c13073"></a><blockquote class="code"><p class="quoted">
The player wears a fedora, a jacket, a shirt, some undershorts, an undershirt, some slacks, a pair of socks, and a pair of shoes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13074" -->
<a id="c13074"></a><blockquote class="code"><p class="quoted">
The shirt underlies the jacket. The pair of socks underlies the pair of shoes. The undershorts underlie the slacks. The undershirt underlies the shirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13075" -->
<a id="c13075"></a><blockquote class="code"><p class="quoted">
The jacket overlies the shirt. The shoes overlie the socks. The slacks overlie the undershorts. The shirt overlies the undershirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c13076" -->
<a id="c13076"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x mirror / remove fedora / remove jacket / remove shirt / remove slacks / remove undershirt / remove shoes / remove socks / remove shorts / remove undershorts&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we further wanted to prevent the player from taking off clothes in inappropriate places, we might add something like this:</p>
<!-- START CODE "c13077" -->
<a id="c13077"></a><blockquote class="code"><p class="quoted">
Instead of taking off something in the presence of someone who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] far too modest to strip in public.&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
