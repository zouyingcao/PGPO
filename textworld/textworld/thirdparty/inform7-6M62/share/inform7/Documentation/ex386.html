<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>21.3. Saying lists of values</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง21.3. Saying lists of values</p>
<p>Any list L can be said, provided that its contents can be said. For example:</p>
<!-- START CODE "c1770" -->
<a id="c1770"></a><blockquote class="code"><p class="quoted">
let L1 be {2, 3, 5, 7, 11};
<br />say L1;
</p></blockquote>
<!-- END CODE -->
<p>produces the text &quot;2, 3, 5, 7 and 11&quot; - unless we have &quot;Use serial comma.&quot; set, in which case a comma appears after the 7. We also have the option of using the more formal notation:</p>
<!-- START PHRASE "defn324" -->
<div class="definition"><a id="defn324"></a><p class="defnprototype"><b>say &quot;[</b>(list of values)<b> in brace notation]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_listbraced -->

<p>This text substitution produces the list in the form of &quot;{&quot;, then a comma-separated list, and then &quot;}&quot;, which looks less like an English sentence but more mathematical. Example:</p>
<!-- START CODE "c1771" -->
<a id="c1771"></a><blockquote class="code"><p class="quoted">
&quot;[list of people in brace notation]&quot;
</p></blockquote>
<!-- END CODE -->
<p>might produce &quot;{ yourself, Mr Darcy, Flashman }&quot;.</p>

<!-- end definition -->
</div>

<p>If we say a list of lists, then the individual entry lists are always printed in brace notation: the ordinary sentence way would be incomprehensible.</p>
<p>Of course, the values in L1 are written out in number form because L1 is a list of numbers: we could alternatively try</p>
<!-- START CODE "c1772" -->
<a id="c1772"></a><blockquote class="code"><p class="quoted">
let L2 be {the piano, the music stand};
<br />say L2;
</p></blockquote>
<!-- END CODE -->
<p>which produces &quot;piano and music stand&quot;. Lists of objects can be said in two additional ways:</p>
<!-- START PHRASE "defn325" -->
<div class="definition"><a id="defn325"></a><p class="defnprototype"><b>say &quot;[</b>(list of objects)<b> with definite articles]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_listdef -->

<p>This text substitution writes out the list in sentence form, adding the appropriate definite articles. Example:</p>
<!-- START CODE "c1773" -->
<a id="c1773"></a><blockquote class="code"><p class="quoted">
let L be {the piano, the music stand};
<br />say &quot;[L with definite articles]&quot;;
</p></blockquote>
<!-- END CODE -->
<p>says &quot;the piano and the music stand&quot;.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn326" -->
<div class="definition"><a id="defn326"></a><p class="defnprototype"><b>say &quot;[</b>(list of objects)<b> with indefinite articles]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_listindef -->

<p>This text substitution writes out the list in sentence form, adding the appropriate indefinite articles. Example:</p>
<!-- START CODE "c1774" -->
<a id="c1774"></a><blockquote class="code"><p class="quoted">
let L be {the piano, the music stand};
<br />say &quot;[L with definite articles]&quot;;
</p></blockquote>
<!-- END CODE -->
<p>says &quot;a piano and a music stand&quot;.</p>

<!-- end definition -->
</div>

<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_21_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_21_1.html" class="standardlink">Start of Chapter 21: Lists</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_21_2.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_21_2.html" class="standardlink">Back to ยง21.2. Constant lists</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_21_4.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_21_4.html" class="standardlink">Onward to ยง21.4. Testing and iterating over lists</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e386"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_21_3.html#e386" class="eglink"><b>425</b></a></div>
<div class="egpanel" id="example386">
<p>As we've seen in earlier examples such as &quot;Equipment List&quot;, it is possible to vary the way Inform creates inventory listings in general (to create lists that look more like paragraphs of prose, lists divided between what the player is wearing and what he isn't, and so on). We can also use activities to alter the printing of specific objects' names and contents, as with the &quot;omit contents in listing&quot; feature after printing the name of something.</p>
<p>We may find, however, that we would like a great deal more control over Inform's printing of inventory details, not just as a special effect for a few items, but throughout the game.</p>
<p>We start by turning off Inform's native property writer:</p>
<!-- START CODE "c20377" -->
<a id="c20377"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Oyster Wide Shut[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The print standard inventory rule is not listed in any rulebook.[=0x000A=][=0x000A=]Carry out taking inventory (this is the new print inventory rule):[=0x000A=][=0x0009=]say [=0x0022=]You are carrying: [line break][=0x0022=];[=0x000A=][=0x0009=]list the contents of the player, with newlines, indented, including contents, with extra indentation.[=0x000A=][=0x000A=][This is very much like the library[=0x0027=]s standard behavior, but with the exception that [=0x0022=]giving inventory information[=0x0022=] or even [=0x0022=]giving brief inventory information[=0x0022=] are omitted. Here[=0x0027=]s how we supplant it:][=0x000A=][=0x000A=]After printing the name of something (called target) while taking inventory:[=0x000A=][=0x0009=]follow the property-aggregation rules for the target.[=0x000A=][=0x000A=][Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We[=0x0027=]ll start by producing something quite similar to Inform[=0x0027=]s default behavior:][=0x000A=][=0x000A=]The property-aggregation rules are an object-based rulebook.[=0x000A=]The property-aggregation rulebook has a list of text called the tagline.[=0x000A=][=0x000A=]A first property-aggregation rule for an openable open thing (this is the mention open openables rule):[=0x000A=][=0x0009=]add [=0x0022=]open[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):[=0x000A=][=0x0009=]add [=0x0022=]closed[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):[=0x000A=][=0x0009=]add [=0x0022=]empty[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):[=0x000A=][=0x0009=]add [=0x0022=]empty[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a lit thing (this is the mention lit objects rule):[=0x000A=][=0x0009=]add [=0x0022=]providing light[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):[=0x000A=][=0x0009=]add [=0x0022=]being worn[=0x0022=] to the tagline.[=0x000A=][=0x000A=]The last property-aggregation rule (this is the print aggregated properties rule):[=0x000A=][=0x0009=]if the number of entries in the tagline is greater than 0:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] ([tagline])[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]rule fails.[=0x000A=][=0x000A=][Notice that we don[=0x0027=]t need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word [=0x0022=]and[=0x0022=] where appropriate; and it will automatically follow the [=0x0022=]use serial comma[=0x0022=] option, if we have it set.][=0x000A=][=0x000A=][Now we[=0x0027=]re free to meddle. Let[=0x0027=]s give the player a bunch of possessions that will be listed in interesting ways in inventory:][=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Curved Beach is a room. [=0x0022=]White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach.[=0x0022=][=0x000A=][=0x000A=]The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.[=0x000A=][=0x000A=]The player wears a flashlight lanyard. The flashlight lanyard is a device.[=0x000A=][=0x000A=]Carry out switching on the lanyard: now the noun is lit.[=0x000A=]Carry out switching off the lanyard: now the noun is unlit.[=0x000A=][=0x000A=]The player carries an oyster. The oyster contains a pearl. The oyster is openable.[=0x000A=][=0x000A=][Now suppose that we don[=0x0027=]t want the oyster to say [=0x0022=]closed[=0x0022=] when it[=0x0027=]s closed. Instead, we[=0x0027=]d like it to say [=0x0022=]clamped shut[=0x0022=]. As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:][=0x000A=][=0x000A=]A property-aggregation rule for the oyster:[=0x000A=][=0x0009=]if the oyster is closed:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] (clamped shut)[=0x0022=];[=0x000A=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][That[=0x0027=]s fine for the oyster because [=0x0022=]clamped shut[=0x0022=] is the only property he[=0x0027=]ll ever have. What if we[=0x0027=]d like instead just to revise the way the sack (and only the sack) gets described as providing light?][=0x000A=][=0x000A=]The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.[=0x000A=][=0x000A=]A property-aggregation rule for the plastic sack (this is the sacklight rule):[=0x000A=][=0x0009=]if [=0x0022=]providing light[=0x0022=] is listed in the tagline:[=0x000A=][=0x0009=][=0x0009=]remove [=0x0022=]providing light[=0x0022=] from the tagline;[=0x000A=][=0x0009=][=0x0009=]add [=0x0022=]gently glowing[=0x0022=] to the tagline.[=0x000A=][=0x000A=][Now the flashlight (and any other regular light sources we might add to the game) will be described as [=0x0022=]providing light[=0x0022=], but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.][=0x000A=][=0x000A=][We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let[=0x0027=]s say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:][=0x000A=][=0x000A=]A thing can be magical or non-magical. A thing is usually non-magical.[=0x000A=][=0x000A=]Understand [=0x0022=]enchant [something][=0x0022=] as enchanting. Enchanting is an action applying to one thing.[=0x000A=][=0x000A=]Carry out enchanting something:[=0x000A=][=0x0009=]now the noun is magical.[=0x000A=][=0x000A=]Report enchanting something:[=0x000A=][=0x0009=]say [=0x0022=]Ding! You turn [the noun] magical.[=0x0022=][=0x000A=][=0x000A=]A property-aggregation rule for a magical thing:[=0x000A=][=0x0009=]add [=0x0022=]enchanted[=0x0022=] to the tagline.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Oyster Wide Shut&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20378" -->
<a id="c20378"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20379" -->
<a id="c20379"></a><blockquote class="code"><p class="quoted">
The print standard inventory rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20380" -->
<a id="c20380"></a><blockquote class="code"><p class="quoted">
Carry out taking inventory (this is the new print inventory rule):
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, with newlines, indented, including contents, with extra indentation.
</p></blockquote>
<!-- END CODE -->
<p>This is very much like the library's standard behavior, but with the exception that &quot;giving inventory information&quot; or even &quot;giving brief inventory information&quot; are omitted. Here's how we supplant it:</p>
<!-- START CODE "c20381" -->
<a id="c20381"></a><blockquote class="code"><p class="quoted">
After printing the name of something (called target) while taking inventory:
<br />&#160;&#160;&#160;&#160;follow the property-aggregation rules for the target.
</p></blockquote>
<!-- END CODE -->
<p>Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We'll start by producing something quite similar to Inform's default behavior:</p>
<!-- START CODE "c20382" -->
<a id="c20382"></a><blockquote class="code"><p class="quoted">
The property-aggregation rules are an object-based rulebook.
<br />The property-aggregation rulebook has a list of text called the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20383" -->
<a id="c20383"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable open thing (this is the mention open openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;open&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20384" -->
<a id="c20384"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;closed&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20385" -->
<a id="c20385"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20386" -->
<a id="c20386"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20387" -->
<a id="c20387"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a lit thing (this is the mention lit objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;providing light&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20388" -->
<a id="c20388"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;being worn&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20389" -->
<a id="c20389"></a><blockquote class="code"><p class="quoted">
The last property-aggregation rule (this is the print aggregated properties rule):
<br />&#160;&#160;&#160;&#160;if the number of entries in the tagline is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; ([tagline])&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<p>Notice that we don't need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word &quot;and&quot; where appropriate; and it will automatically follow the &quot;use serial comma&quot; option, if we have it set.</p>
<p>Now we're free to meddle. Let's give the player a bunch of possessions that will be listed in interesting ways in inventory:</p>
<!-- START CODE "c20390" -->
<a id="c20390"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20391" -->
<a id="c20391"></a><blockquote class="code"><p class="quoted">
The Curved Beach is a room. &quot;White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20392" -->
<a id="c20392"></a><blockquote class="code"><p class="quoted">
The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20393" -->
<a id="c20393"></a><blockquote class="code"><p class="quoted">
The player wears a flashlight lanyard. The flashlight lanyard is a device.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20394" -->
<a id="c20394"></a><blockquote class="code"><p class="quoted">
Carry out switching on the lanyard: now the noun is lit.
<br />Carry out switching off the lanyard: now the noun is unlit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20395" -->
<a id="c20395"></a><blockquote class="code"><p class="quoted">
The player carries an oyster. The oyster contains a pearl. The oyster is openable.
</p></blockquote>
<!-- END CODE -->
<p>Now suppose that we don't want the oyster to say &quot;closed&quot; when it's closed. Instead, we'd like it to say &quot;clamped shut&quot;. As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:</p>
<!-- START CODE "c20396" -->
<a id="c20396"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the oyster:
<br />&#160;&#160;&#160;&#160;if the oyster is closed:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (clamped shut)&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>That's fine for the oyster because &quot;clamped shut&quot; is the only property he'll ever have. What if we'd like instead just to revise the way the sack (and only the sack) gets described as providing light?</p>
<!-- START CODE "c20397" -->
<a id="c20397"></a><blockquote class="code"><p class="quoted">
The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20398" -->
<a id="c20398"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the plastic sack (this is the sacklight rule):
<br />&#160;&#160;&#160;&#160;if &quot;providing light&quot; is listed in the tagline:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;remove &quot;providing light&quot; from the tagline;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;gently glowing&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<p>Now the flashlight (and any other regular light sources we might add to the game) will be described as &quot;providing light&quot;, but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.</p>
<p>We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let's say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:</p>
<!-- START CODE "c20399" -->
<a id="c20399"></a><blockquote class="code"><p class="quoted">
A thing can be magical or non-magical. A thing is usually non-magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20400" -->
<a id="c20400"></a><blockquote class="code"><p class="quoted">
Understand &quot;enchant [something]&quot; as enchanting. Enchanting is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20401" -->
<a id="c20401"></a><blockquote class="code"><p class="quoted">
Carry out enchanting something:
<br />&#160;&#160;&#160;&#160;now the noun is magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20402" -->
<a id="c20402"></a><blockquote class="code"><p class="quoted">
Report enchanting something:
<br />&#160;&#160;&#160;&#160;say &quot;Ding! You turn [the noun] magical.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20403" -->
<a id="c20403"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20404" -->
<a id="c20404"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Further variations are possible as well: if we used a &quot;before printing the name...&quot; rather than an &quot;after printing the name...&quot; rule, we could automatically generate lines like &quot;an open and empty phosphorescent plastic sack&quot;, removing some of the artificiality of the parentheses.</p>
<p>Or we could add more logic to the rules about which properties are mentioned, so that some features of objects were mentioned in inventory only if the player was wearing the correct detection device, like so:</p>
<!-- START CODE "c20405" -->
<a id="c20405"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('The player wears enchantment-detecting goggles.[=0x000A=][=0x000A=]A property-aggregation rule for a magical thing:[=0x000A=][=0x0009=]if the player is wearing the goggles:[=0x000A=][=0x0009=][=0x0009=]add [=0x0022=]enchanted[=0x0022=] to the tagline.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> The player wears enchantment-detecting goggles.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20406" -->
<a id="c20406"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;if the player is wearing the goggles:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_21_3.html#e386" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Oyster Wide Shut</span></b></a><br />Replacing Inform's default printing of properties such as "(closed)", "(open and providing light)", etc., with our own, more flexible variation.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example386">
<p>As we've seen in earlier examples such as &quot;Equipment List&quot;, it is possible to vary the way Inform creates inventory listings in general (to create lists that look more like paragraphs of prose, lists divided between what the player is wearing and what he isn't, and so on). We can also use activities to alter the printing of specific objects' names and contents, as with the &quot;omit contents in listing&quot; feature after printing the name of something.</p>
<p>We may find, however, that we would like a great deal more control over Inform's printing of inventory details, not just as a special effect for a few items, but throughout the game.</p>
<p>We start by turning off Inform's native property writer:</p>
<!-- START CODE "c20407" -->
<a id="c20407"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Oyster Wide Shut[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The print standard inventory rule is not listed in any rulebook.[=0x000A=][=0x000A=]Carry out taking inventory (this is the new print inventory rule):[=0x000A=][=0x0009=]say [=0x0022=]You are carrying: [line break][=0x0022=];[=0x000A=][=0x0009=]list the contents of the player, with newlines, indented, including contents, with extra indentation.[=0x000A=][=0x000A=][This is very much like the library[=0x0027=]s standard behavior, but with the exception that [=0x0022=]giving inventory information[=0x0022=] or even [=0x0022=]giving brief inventory information[=0x0022=] are omitted. Here[=0x0027=]s how we supplant it:][=0x000A=][=0x000A=]After printing the name of something (called target) while taking inventory:[=0x000A=][=0x0009=]follow the property-aggregation rules for the target.[=0x000A=][=0x000A=][Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We[=0x0027=]ll start by producing something quite similar to Inform[=0x0027=]s default behavior:][=0x000A=][=0x000A=]The property-aggregation rules are an object-based rulebook.[=0x000A=]The property-aggregation rulebook has a list of text called the tagline.[=0x000A=][=0x000A=]A first property-aggregation rule for an openable open thing (this is the mention open openables rule):[=0x000A=][=0x0009=]add [=0x0022=]open[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):[=0x000A=][=0x0009=]add [=0x0022=]closed[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):[=0x000A=][=0x0009=]add [=0x0022=]empty[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):[=0x000A=][=0x0009=]add [=0x0022=]empty[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a lit thing (this is the mention lit objects rule):[=0x000A=][=0x0009=]add [=0x0022=]providing light[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):[=0x000A=][=0x0009=]add [=0x0022=]being worn[=0x0022=] to the tagline.[=0x000A=][=0x000A=]The last property-aggregation rule (this is the print aggregated properties rule):[=0x000A=][=0x0009=]if the number of entries in the tagline is greater than 0:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] ([tagline])[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]rule fails.[=0x000A=][=0x000A=][Notice that we don[=0x0027=]t need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word [=0x0022=]and[=0x0022=] where appropriate; and it will automatically follow the [=0x0022=]use serial comma[=0x0022=] option, if we have it set.][=0x000A=][=0x000A=][Now we[=0x0027=]re free to meddle. Let[=0x0027=]s give the player a bunch of possessions that will be listed in interesting ways in inventory:][=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Curved Beach is a room. [=0x0022=]White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach.[=0x0022=][=0x000A=][=0x000A=]The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.[=0x000A=][=0x000A=]The player wears a flashlight lanyard. The flashlight lanyard is a device.[=0x000A=][=0x000A=]Carry out switching on the lanyard: now the noun is lit.[=0x000A=]Carry out switching off the lanyard: now the noun is unlit.[=0x000A=][=0x000A=]The player carries an oyster. The oyster contains a pearl. The oyster is openable.[=0x000A=][=0x000A=][Now suppose that we don[=0x0027=]t want the oyster to say [=0x0022=]closed[=0x0022=] when it[=0x0027=]s closed. Instead, we[=0x0027=]d like it to say [=0x0022=]clamped shut[=0x0022=]. As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:][=0x000A=][=0x000A=]A property-aggregation rule for the oyster:[=0x000A=][=0x0009=]if the oyster is closed:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] (clamped shut)[=0x0022=];[=0x000A=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][That[=0x0027=]s fine for the oyster because [=0x0022=]clamped shut[=0x0022=] is the only property he[=0x0027=]ll ever have. What if we[=0x0027=]d like instead just to revise the way the sack (and only the sack) gets described as providing light?][=0x000A=][=0x000A=]The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.[=0x000A=][=0x000A=]A property-aggregation rule for the plastic sack (this is the sacklight rule):[=0x000A=][=0x0009=]if [=0x0022=]providing light[=0x0022=] is listed in the tagline:[=0x000A=][=0x0009=][=0x0009=]remove [=0x0022=]providing light[=0x0022=] from the tagline;[=0x000A=][=0x0009=][=0x0009=]add [=0x0022=]gently glowing[=0x0022=] to the tagline.[=0x000A=][=0x000A=][Now the flashlight (and any other regular light sources we might add to the game) will be described as [=0x0022=]providing light[=0x0022=], but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.][=0x000A=][=0x000A=][We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let[=0x0027=]s say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:][=0x000A=][=0x000A=]A thing can be magical or non-magical. A thing is usually non-magical.[=0x000A=][=0x000A=]Understand [=0x0022=]enchant [something][=0x0022=] as enchanting. Enchanting is an action applying to one thing.[=0x000A=][=0x000A=]Carry out enchanting something:[=0x000A=][=0x0009=]now the noun is magical.[=0x000A=][=0x000A=]Report enchanting something:[=0x000A=][=0x0009=]say [=0x0022=]Ding! You turn [the noun] magical.[=0x0022=][=0x000A=][=0x000A=]A property-aggregation rule for a magical thing:[=0x000A=][=0x0009=]add [=0x0022=]enchanted[=0x0022=] to the tagline.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Oyster Wide Shut&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20408" -->
<a id="c20408"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20409" -->
<a id="c20409"></a><blockquote class="code"><p class="quoted">
The print standard inventory rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20410" -->
<a id="c20410"></a><blockquote class="code"><p class="quoted">
Carry out taking inventory (this is the new print inventory rule):
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, with newlines, indented, including contents, with extra indentation.
</p></blockquote>
<!-- END CODE -->
<p>This is very much like the library's standard behavior, but with the exception that &quot;giving inventory information&quot; or even &quot;giving brief inventory information&quot; are omitted. Here's how we supplant it:</p>
<!-- START CODE "c20411" -->
<a id="c20411"></a><blockquote class="code"><p class="quoted">
After printing the name of something (called target) while taking inventory:
<br />&#160;&#160;&#160;&#160;follow the property-aggregation rules for the target.
</p></blockquote>
<!-- END CODE -->
<p>Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We'll start by producing something quite similar to Inform's default behavior:</p>
<!-- START CODE "c20412" -->
<a id="c20412"></a><blockquote class="code"><p class="quoted">
The property-aggregation rules are an object-based rulebook.
<br />The property-aggregation rulebook has a list of text called the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20413" -->
<a id="c20413"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable open thing (this is the mention open openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;open&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20414" -->
<a id="c20414"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;closed&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20415" -->
<a id="c20415"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20416" -->
<a id="c20416"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20417" -->
<a id="c20417"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a lit thing (this is the mention lit objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;providing light&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20418" -->
<a id="c20418"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;being worn&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20419" -->
<a id="c20419"></a><blockquote class="code"><p class="quoted">
The last property-aggregation rule (this is the print aggregated properties rule):
<br />&#160;&#160;&#160;&#160;if the number of entries in the tagline is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; ([tagline])&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<p>Notice that we don't need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word &quot;and&quot; where appropriate; and it will automatically follow the &quot;use serial comma&quot; option, if we have it set.</p>
<p>Now we're free to meddle. Let's give the player a bunch of possessions that will be listed in interesting ways in inventory:</p>
<!-- START CODE "c20420" -->
<a id="c20420"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20421" -->
<a id="c20421"></a><blockquote class="code"><p class="quoted">
The Curved Beach is a room. &quot;White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20422" -->
<a id="c20422"></a><blockquote class="code"><p class="quoted">
The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20423" -->
<a id="c20423"></a><blockquote class="code"><p class="quoted">
The player wears a flashlight lanyard. The flashlight lanyard is a device.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20424" -->
<a id="c20424"></a><blockquote class="code"><p class="quoted">
Carry out switching on the lanyard: now the noun is lit.
<br />Carry out switching off the lanyard: now the noun is unlit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20425" -->
<a id="c20425"></a><blockquote class="code"><p class="quoted">
The player carries an oyster. The oyster contains a pearl. The oyster is openable.
</p></blockquote>
<!-- END CODE -->
<p>Now suppose that we don't want the oyster to say &quot;closed&quot; when it's closed. Instead, we'd like it to say &quot;clamped shut&quot;. As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:</p>
<!-- START CODE "c20426" -->
<a id="c20426"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the oyster:
<br />&#160;&#160;&#160;&#160;if the oyster is closed:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (clamped shut)&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>That's fine for the oyster because &quot;clamped shut&quot; is the only property he'll ever have. What if we'd like instead just to revise the way the sack (and only the sack) gets described as providing light?</p>
<!-- START CODE "c20427" -->
<a id="c20427"></a><blockquote class="code"><p class="quoted">
The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20428" -->
<a id="c20428"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the plastic sack (this is the sacklight rule):
<br />&#160;&#160;&#160;&#160;if &quot;providing light&quot; is listed in the tagline:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;remove &quot;providing light&quot; from the tagline;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;gently glowing&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<p>Now the flashlight (and any other regular light sources we might add to the game) will be described as &quot;providing light&quot;, but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.</p>
<p>We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let's say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:</p>
<!-- START CODE "c20429" -->
<a id="c20429"></a><blockquote class="code"><p class="quoted">
A thing can be magical or non-magical. A thing is usually non-magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20430" -->
<a id="c20430"></a><blockquote class="code"><p class="quoted">
Understand &quot;enchant [something]&quot; as enchanting. Enchanting is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20431" -->
<a id="c20431"></a><blockquote class="code"><p class="quoted">
Carry out enchanting something:
<br />&#160;&#160;&#160;&#160;now the noun is magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20432" -->
<a id="c20432"></a><blockquote class="code"><p class="quoted">
Report enchanting something:
<br />&#160;&#160;&#160;&#160;say &quot;Ding! You turn [the noun] magical.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20433" -->
<a id="c20433"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20434" -->
<a id="c20434"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Further variations are possible as well: if we used a &quot;before printing the name...&quot; rather than an &quot;after printing the name...&quot; rule, we could automatically generate lines like &quot;an open and empty phosphorescent plastic sack&quot;, removing some of the artificiality of the parentheses.</p>
<p>Or we could add more logic to the rules about which properties are mentioned, so that some features of objects were mentioned in inventory only if the player was wearing the correct detection device, like so:</p>
<!-- START CODE "c20435" -->
<a id="c20435"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('The player wears enchantment-detecting goggles.[=0x000A=][=0x000A=]A property-aggregation rule for a magical thing:[=0x000A=][=0x0009=]if the player is wearing the goggles:[=0x000A=][=0x0009=][=0x0009=]add [=0x0022=]enchanted[=0x0022=] to the tagline.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> The player wears enchantment-detecting goggles.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20436" -->
<a id="c20436"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;if the player is wearing the goggles:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex386.html#e386"><i>RB</i></a></div>
<div class="egpanel" id="example386">
<p>As we've seen in earlier examples such as &quot;Equipment List&quot;, it is possible to vary the way Inform creates inventory listings in general (to create lists that look more like paragraphs of prose, lists divided between what the player is wearing and what he isn't, and so on). We can also use activities to alter the printing of specific objects' names and contents, as with the &quot;omit contents in listing&quot; feature after printing the name of something.</p>
<p>We may find, however, that we would like a great deal more control over Inform's printing of inventory details, not just as a special effect for a few items, but throughout the game.</p>
<p>We start by turning off Inform's native property writer:</p>
<!-- START CODE "c20437" -->
<a id="c20437"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Oyster Wide Shut[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The print standard inventory rule is not listed in any rulebook.[=0x000A=][=0x000A=]Carry out taking inventory (this is the new print inventory rule):[=0x000A=][=0x0009=]say [=0x0022=]You are carrying: [line break][=0x0022=];[=0x000A=][=0x0009=]list the contents of the player, with newlines, indented, including contents, with extra indentation.[=0x000A=][=0x000A=][This is very much like the library[=0x0027=]s standard behavior, but with the exception that [=0x0022=]giving inventory information[=0x0022=] or even [=0x0022=]giving brief inventory information[=0x0022=] are omitted. Here[=0x0027=]s how we supplant it:][=0x000A=][=0x000A=]After printing the name of something (called target) while taking inventory:[=0x000A=][=0x0009=]follow the property-aggregation rules for the target.[=0x000A=][=0x000A=][Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We[=0x0027=]ll start by producing something quite similar to Inform[=0x0027=]s default behavior:][=0x000A=][=0x000A=]The property-aggregation rules are an object-based rulebook.[=0x000A=]The property-aggregation rulebook has a list of text called the tagline.[=0x000A=][=0x000A=]A first property-aggregation rule for an openable open thing (this is the mention open openables rule):[=0x000A=][=0x0009=]add [=0x0022=]open[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):[=0x000A=][=0x0009=]add [=0x0022=]closed[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):[=0x000A=][=0x0009=]add [=0x0022=]empty[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):[=0x000A=][=0x0009=]add [=0x0022=]empty[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a lit thing (this is the mention lit objects rule):[=0x000A=][=0x0009=]add [=0x0022=]providing light[=0x0022=] to the tagline.[=0x000A=][=0x000A=]A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):[=0x000A=][=0x0009=]add [=0x0022=]being worn[=0x0022=] to the tagline.[=0x000A=][=0x000A=]The last property-aggregation rule (this is the print aggregated properties rule):[=0x000A=][=0x0009=]if the number of entries in the tagline is greater than 0:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] ([tagline])[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]rule fails.[=0x000A=][=0x000A=][Notice that we don[=0x0027=]t need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word [=0x0022=]and[=0x0022=] where appropriate; and it will automatically follow the [=0x0022=]use serial comma[=0x0022=] option, if we have it set.][=0x000A=][=0x000A=][Now we[=0x0027=]re free to meddle. Let[=0x0027=]s give the player a bunch of possessions that will be listed in interesting ways in inventory:][=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Curved Beach is a room. [=0x0022=]White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach.[=0x0022=][=0x000A=][=0x000A=]The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.[=0x000A=][=0x000A=]The player wears a flashlight lanyard. The flashlight lanyard is a device.[=0x000A=][=0x000A=]Carry out switching on the lanyard: now the noun is lit.[=0x000A=]Carry out switching off the lanyard: now the noun is unlit.[=0x000A=][=0x000A=]The player carries an oyster. The oyster contains a pearl. The oyster is openable.[=0x000A=][=0x000A=][Now suppose that we don[=0x0027=]t want the oyster to say [=0x0022=]closed[=0x0022=] when it[=0x0027=]s closed. Instead, we[=0x0027=]d like it to say [=0x0022=]clamped shut[=0x0022=]. As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:][=0x000A=][=0x000A=]A property-aggregation rule for the oyster:[=0x000A=][=0x0009=]if the oyster is closed:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] (clamped shut)[=0x0022=];[=0x000A=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][That[=0x0027=]s fine for the oyster because [=0x0022=]clamped shut[=0x0022=] is the only property he[=0x0027=]ll ever have. What if we[=0x0027=]d like instead just to revise the way the sack (and only the sack) gets described as providing light?][=0x000A=][=0x000A=]The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.[=0x000A=][=0x000A=]A property-aggregation rule for the plastic sack (this is the sacklight rule):[=0x000A=][=0x0009=]if [=0x0022=]providing light[=0x0022=] is listed in the tagline:[=0x000A=][=0x0009=][=0x0009=]remove [=0x0022=]providing light[=0x0022=] from the tagline;[=0x000A=][=0x0009=][=0x0009=]add [=0x0022=]gently glowing[=0x0022=] to the tagline.[=0x000A=][=0x000A=][Now the flashlight (and any other regular light sources we might add to the game) will be described as [=0x0022=]providing light[=0x0022=], but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.][=0x000A=][=0x000A=][We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let[=0x0027=]s say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:][=0x000A=][=0x000A=]A thing can be magical or non-magical. A thing is usually non-magical.[=0x000A=][=0x000A=]Understand [=0x0022=]enchant [something][=0x0022=] as enchanting. Enchanting is an action applying to one thing.[=0x000A=][=0x000A=]Carry out enchanting something:[=0x000A=][=0x0009=]now the noun is magical.[=0x000A=][=0x000A=]Report enchanting something:[=0x000A=][=0x0009=]say [=0x0022=]Ding! You turn [the noun] magical.[=0x0022=][=0x000A=][=0x000A=]A property-aggregation rule for a magical thing:[=0x000A=][=0x0009=]add [=0x0022=]enchanted[=0x0022=] to the tagline.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Oyster Wide Shut&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20438" -->
<a id="c20438"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20439" -->
<a id="c20439"></a><blockquote class="code"><p class="quoted">
The print standard inventory rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20440" -->
<a id="c20440"></a><blockquote class="code"><p class="quoted">
Carry out taking inventory (this is the new print inventory rule):
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, with newlines, indented, including contents, with extra indentation.
</p></blockquote>
<!-- END CODE -->
<p>This is very much like the library's standard behavior, but with the exception that &quot;giving inventory information&quot; or even &quot;giving brief inventory information&quot; are omitted. Here's how we supplant it:</p>
<!-- START CODE "c20441" -->
<a id="c20441"></a><blockquote class="code"><p class="quoted">
After printing the name of something (called target) while taking inventory:
<br />&#160;&#160;&#160;&#160;follow the property-aggregation rules for the target.
</p></blockquote>
<!-- END CODE -->
<p>Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We'll start by producing something quite similar to Inform's default behavior:</p>
<!-- START CODE "c20442" -->
<a id="c20442"></a><blockquote class="code"><p class="quoted">
The property-aggregation rules are an object-based rulebook.
<br />The property-aggregation rulebook has a list of text called the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20443" -->
<a id="c20443"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable open thing (this is the mention open openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;open&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20444" -->
<a id="c20444"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;closed&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20445" -->
<a id="c20445"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20446" -->
<a id="c20446"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20447" -->
<a id="c20447"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a lit thing (this is the mention lit objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;providing light&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20448" -->
<a id="c20448"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;being worn&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20449" -->
<a id="c20449"></a><blockquote class="code"><p class="quoted">
The last property-aggregation rule (this is the print aggregated properties rule):
<br />&#160;&#160;&#160;&#160;if the number of entries in the tagline is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; ([tagline])&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<p>Notice that we don't need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word &quot;and&quot; where appropriate; and it will automatically follow the &quot;use serial comma&quot; option, if we have it set.</p>
<p>Now we're free to meddle. Let's give the player a bunch of possessions that will be listed in interesting ways in inventory:</p>
<!-- START CODE "c20450" -->
<a id="c20450"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20451" -->
<a id="c20451"></a><blockquote class="code"><p class="quoted">
The Curved Beach is a room. &quot;White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20452" -->
<a id="c20452"></a><blockquote class="code"><p class="quoted">
The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20453" -->
<a id="c20453"></a><blockquote class="code"><p class="quoted">
The player wears a flashlight lanyard. The flashlight lanyard is a device.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20454" -->
<a id="c20454"></a><blockquote class="code"><p class="quoted">
Carry out switching on the lanyard: now the noun is lit.
<br />Carry out switching off the lanyard: now the noun is unlit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20455" -->
<a id="c20455"></a><blockquote class="code"><p class="quoted">
The player carries an oyster. The oyster contains a pearl. The oyster is openable.
</p></blockquote>
<!-- END CODE -->
<p>Now suppose that we don't want the oyster to say &quot;closed&quot; when it's closed. Instead, we'd like it to say &quot;clamped shut&quot;. As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:</p>
<!-- START CODE "c20456" -->
<a id="c20456"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the oyster:
<br />&#160;&#160;&#160;&#160;if the oyster is closed:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (clamped shut)&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>That's fine for the oyster because &quot;clamped shut&quot; is the only property he'll ever have. What if we'd like instead just to revise the way the sack (and only the sack) gets described as providing light?</p>
<!-- START CODE "c20457" -->
<a id="c20457"></a><blockquote class="code"><p class="quoted">
The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20458" -->
<a id="c20458"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the plastic sack (this is the sacklight rule):
<br />&#160;&#160;&#160;&#160;if &quot;providing light&quot; is listed in the tagline:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;remove &quot;providing light&quot; from the tagline;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;gently glowing&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<p>Now the flashlight (and any other regular light sources we might add to the game) will be described as &quot;providing light&quot;, but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.</p>
<p>We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let's say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:</p>
<!-- START CODE "c20459" -->
<a id="c20459"></a><blockquote class="code"><p class="quoted">
A thing can be magical or non-magical. A thing is usually non-magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20460" -->
<a id="c20460"></a><blockquote class="code"><p class="quoted">
Understand &quot;enchant [something]&quot; as enchanting. Enchanting is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20461" -->
<a id="c20461"></a><blockquote class="code"><p class="quoted">
Carry out enchanting something:
<br />&#160;&#160;&#160;&#160;now the noun is magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20462" -->
<a id="c20462"></a><blockquote class="code"><p class="quoted">
Report enchanting something:
<br />&#160;&#160;&#160;&#160;say &quot;Ding! You turn [the noun] magical.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20463" -->
<a id="c20463"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20464" -->
<a id="c20464"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Further variations are possible as well: if we used a &quot;before printing the name...&quot; rather than an &quot;after printing the name...&quot; rule, we could automatically generate lines like &quot;an open and empty phosphorescent plastic sack&quot;, removing some of the artificiality of the parentheses.</p>
<p>Or we could add more logic to the rules about which properties are mentioned, so that some features of objects were mentioned in inventory only if the player was wearing the correct detection device, like so:</p>
<!-- START CODE "c20465" -->
<a id="c20465"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('The player wears enchantment-detecting goggles.[=0x000A=][=0x000A=]A property-aggregation rule for a magical thing:[=0x000A=][=0x0009=]if the player is wearing the goggles:[=0x000A=][=0x0009=][=0x0009=]add [=0x0022=]enchanted[=0x0022=] to the tagline.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> The player wears enchantment-detecting goggles.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c20466" -->
<a id="c20466"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;if the player is wearing the goggles:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
