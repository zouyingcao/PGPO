<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>23.13. Writing and reading tables to external files</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง23.13. Writing and reading tables to external files</p>
<p>The main use for files is to store and retrieve data, and the most flexible form of data used by Inform is the Table, so facilities are provided which make it as easy as possible to write and read the contents of a table to files. If so, the file must contain just one single table: so to write multiple tables, we need to write multiple files, one for each.</p>
<p>To save the contents of a table to a file, we use the phrase:</p>
<!-- START PHRASE "defn369" -->
<div class="definition"><a id="defn369"></a><p class="defnprototype"><b>write </b>(external file)<b> from </b>(table name)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_writetable -->

<p>This phrase causes the entire contents of the given table to be written out to the given file. Note that files must have been declared, and must be referred to by their Inform names, not by textual filenames. Example:</p>
<!-- START CODE "c1919" -->
<a id="c1919"></a><blockquote class="code"><p class="quoted">
write File of Glaciation Data from the Table of Antarctic Reserves
</p></blockquote>
<!-- END CODE -->
<p>Any blank rows in the table are automatically moved to the bottom, and only the non-blank rows are written.</p>

<!-- end definition -->
</div>

<p>To load a file back into a table,</p>
<!-- START PHRASE "defn370" -->
<div class="definition"><a id="defn370"></a><p class="defnprototype"><b>read </b>(external file)<b> into </b>(table name)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_readtable -->

<p>This phrase causes the entire contents of the given table to be read in from the given file. Note that files must have been declared, and must be referred to by their Inform names, not by textual filenames. Example:</p>
<!-- START CODE "c1920" -->
<a id="c1920"></a><blockquote class="code"><p class="quoted">
read File of Glaciation Data into the Table of Antarctic Reserves
</p></blockquote>
<!-- END CODE -->
<p>Any rows left spare at the foot of the table are automatically blanked. On the other hand if the file is too large to fit into the table - with too many columns or too many rows - a run-time problem is produced.</p>

<!-- end definition -->
</div>

<p>We can check if a file already exists using:</p>
<!-- START PHRASE "defn371" -->
<div class="definition"><a id="defn371"></a><p class="defnprototype"><b>if </b>(external file)<b> exists:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_fileexists -->

<p>This condition is true if the file-system used by the player appears to contain a file with the right name. For example, if we declared:</p>
<!-- START CODE "c1921" -->
<a id="c1921"></a><blockquote class="code"><p class="quoted">
The binary File of Glaciation Data is called &quot;icedata&quot;.
</p></blockquote>
<!-- END CODE -->
<p>and then tested</p>
<!-- START CODE "c1922" -->
<a id="c1922"></a><blockquote class="code"><p class="quoted">
if the File of Glaciation Data exists, ...
</p></blockquote>
<!-- END CODE -->
<p>then Inform would search for a file called &quot;icedata&quot;. (The arrangements for where this might be stored, and its filename extension, vary from platform to platform.)</p>

<!-- end definition -->
</div>

<p>One unfortunate restriction must be kept in mind. Some of what is stored in tables is solid information whose meaning never changes: the number 342, for instance, means the same to everyone. But other information depends entirely on the current location of certain structures in memory - for instance, a rule is internally referred to by its memory location. This potentially changes each time Go or Replay is clicked, and so it is not safe to pass it from one copy to another, or from one project to another. The only tables which Inform allows us to write into files are those containing &quot;safe&quot; data: numbers, units, times of day and kinds of value with named alternatives. Scenes, rules or rulebooks, in particular, are not allowed.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_23_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_23_1.html" class="standardlink">Start of Chapter 23: Figures, Sounds and Files</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_23_12.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_23_12.html" class="standardlink">Back to ยง23.12. Declaring files</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_23_14.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_23_14.html" class="standardlink">Onward to ยง23.14. Writing, reading and appending text to files</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e190"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex190.html#e190" class="eglink"><b>440</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex190.html#e190" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Alien Invasion Part 23</span></b></a><br />Keeping a preference file that could be loaded by any game in a series.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex190.html#e190"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e352"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex352.html#e352" class="eglink"><b>441</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex352.html#e352" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Labyrinth of Ghosts</span></b></a><br />Remembering the fates of all previous explorers of the labyrinth.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex352.html#e352"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e422"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_23_13.html#e422" class="eglink"><b>442</b></a></div>
<div class="egpanel" id="example422">
<p>The trick here is that we need a table with text in order to keep track of the players' names.</p>
<p>Part 1 largely replicates the source from &quot;Identity Theft&quot;; new material starts at Part 2.</p>
<!-- START CODE "c22255" -->
<a id="c22255"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Rubies[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Part 1 - Collecting Names[=0x000A=][=0x000A=]The player[=0x0027=]s forename is a text that varies. The player[=0x0027=]s full name is a text that varies.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=].[=0x000A=][=0x000A=]To decide whether collecting names:[=0x000A=][=0x0009=]if the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=], yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]After reading a command when collecting names:[=0x000A=][=0x0009=]if the number of words in the player[=0x0027=]s command is greater than 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][paragraph break]Who are you, a member of the British royal family? No one has that many names. Let[=0x0027=]s try this again.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s full name is the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s forename is word number 1 in the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the command prompt is [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]Hi, [player[=0x0027=]s forename]![=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][banner text][=0x0022=];[=0x000A=][=0x0009=]move the player to the location;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]Instead of looking when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for printing the banner text when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for constructing the status line when collecting names: do nothing.[=0x000A=][=0x000A=]Part 2 - Adding the Leaderboard[=0x000A=][=0x000A=]File of Leaderboard is called [=0x0022=]leaderboard[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Leaderboard exists:[=0x000A=][=0x0009=][=0x0009=]read File of Leaderboard into the Table of Leaders;[=0x000A=][=0x0009=][=0x0009=]sort the Table of Leaders in reverse scored amount order.[=0x000A=][=0x000A=]When play ends:[=0x000A=][=0x0009=]choose row 10 in the Table of Leaders; [we[=0x0027=]ve sorted the table, so the lowest score will be the one at the bottom][=0x000A=][=0x0009=]if the score is greater than scored amount entry:[=0x000A=][=0x0009=][=0x0009=]now name entry is the player[=0x0027=]s forename;[=0x000A=][=0x0009=][=0x0009=]now the scored amount entry is the score;[=0x000A=][=0x0009=]show leaderboard;[=0x000A=][=0x0009=]write the File of Leaderboard from the Table of Leaders.[=0x000A=][=0x000A=]To show leaderboard:[=0x000A=][=0x0009=]sort the Table of Leaders in reverse scored amount order;[=0x000A=][=0x0009=]say [=0x0022=]Current leading scores: [paragraph break][=0x0022=];[=0x000A=][=0x0009=]say fixed letter spacing;[=0x000A=][=0x0009=]repeat through Table of Leaders:[=0x000A=][=0x0009=][=0x0009=]if scored amount entry is greater than 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]  [name entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column][=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is less than 1, now N is 1;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say N spaces;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][scored amount entry][line break][=0x0022=];[=0x000A=][=0x0009=]say variable letter spacing.[=0x000A=][=0x000A=]To say (N - a number) spaces:[=0x000A=][=0x0009=]repeat with index running from 1 to N:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [=0x0022=].[=0x000A=][=0x000A=]Table of Leaders[=0x000A=]scored amount[=0x0009=]name[=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=][=0x000A=][And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:][=0x000A=][=0x000A=]Part 3 - Scenario[=0x000A=][=0x000A=]Carry out taking something which is not handled:[=0x000A=][=0x0009=]increment score.[=0x000A=][=0x000A=]The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.[=0x000A=][=0x000A=]Instead of waiting, end the story finally.[=0x000A=][=0x000A=]Test me with [=0x0022=]get ruby / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Rubies&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22256" -->
<a id="c22256"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22257" -->
<a id="c22257"></a><blockquote class="code"><p class="quoted">
Part 1 - Collecting Names
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22258" -->
<a id="c22258"></a><blockquote class="code"><p class="quoted">
The player's forename is a text that varies. The player's full name is a text that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22259" -->
<a id="c22259"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;What is your name? &gt; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22260" -->
<a id="c22260"></a><blockquote class="code"><p class="quoted">
To decide whether collecting names:
<br />&#160;&#160;&#160;&#160;if the command prompt is &quot;What is your name? &gt; &quot;, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22261" -->
<a id="c22261"></a><blockquote class="code"><p class="quoted">
After reading a command when collecting names:
<br />&#160;&#160;&#160;&#160;if the number of words in the player's command is greater than 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[paragraph break]Who are you, a member of the British royal family? No one has that many names. Let's try this again.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;now the player's full name is the player's command;
<br />&#160;&#160;&#160;&#160;now the player's forename is word number 1 in the player's command;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;&gt;&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;Hi, [player's forename]!&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[banner text]&quot;;
<br />&#160;&#160;&#160;&#160;move the player to the location;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22262" -->
<a id="c22262"></a><blockquote class="code"><p class="quoted">
Instead of looking when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22263" -->
<a id="c22263"></a><blockquote class="code"><p class="quoted">
Rule for printing the banner text when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22264" -->
<a id="c22264"></a><blockquote class="code"><p class="quoted">
Rule for constructing the status line when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22265" -->
<a id="c22265"></a><blockquote class="code"><p class="quoted">
Part 2 - Adding the Leaderboard
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22266" -->
<a id="c22266"></a><blockquote class="code"><p class="quoted">
File of Leaderboard is called &quot;leaderboard&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22267" -->
<a id="c22267"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;if the File of Leaderboard exists:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read File of Leaderboard into the Table of Leaders;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22268" -->
<a id="c22268"></a><blockquote class="code"><p class="quoted">
When play ends:
<br />&#160;&#160;&#160;&#160;choose row 10 in the Table of Leaders; [we've sorted the table, so the lowest score will be the one at the bottom]
<br />&#160;&#160;&#160;&#160;if the score is greater than scored amount entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now name entry is the player's forename;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the scored amount entry is the score;
<br />&#160;&#160;&#160;&#160;show leaderboard;
<br />&#160;&#160;&#160;&#160;write the File of Leaderboard from the Table of Leaders.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22269" -->
<a id="c22269"></a><blockquote class="code"><p class="quoted">
To show leaderboard:
<br />&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order;
<br />&#160;&#160;&#160;&#160;say &quot;Current leading scores: [paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say fixed letter spacing;
<br />&#160;&#160;&#160;&#160;repeat through Table of Leaders:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if scored amount entry is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [name entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is less than 1, now N is 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say N spaces;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[scored amount entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say variable letter spacing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22270" -->
<a id="c22270"></a><blockquote class="code"><p class="quoted">
To say (N - a number) spaces:
<br />&#160;&#160;&#160;&#160;repeat with index running from 1 to N:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22271" -->
<a id="c22271"></a><blockquote class="code"><p class="quoted">
Table of Leaders
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">scored amount</p></td><td class="quotedtablecell"><p class="quoted">name</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:</p>
<!-- START CODE "c22272" -->
<a id="c22272"></a><blockquote class="code"><p class="quoted">
Part 3 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22273" -->
<a id="c22273"></a><blockquote class="code"><p class="quoted">
Carry out taking something which is not handled:
<br />&#160;&#160;&#160;&#160;increment score.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22274" -->
<a id="c22274"></a><blockquote class="code"><p class="quoted">
The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22275" -->
<a id="c22275"></a><blockquote class="code"><p class="quoted">
Instead of waiting, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22276" -->
<a id="c22276"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get ruby / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_23_13.html#e422" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Rubies</span></b></a><br />A scoreboard that keeps track of the ten highest-scoring players from one playthrough to the next, adding the player's name if he has done well enough.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example422">
<p>The trick here is that we need a table with text in order to keep track of the players' names.</p>
<p>Part 1 largely replicates the source from &quot;Identity Theft&quot;; new material starts at Part 2.</p>
<!-- START CODE "c22277" -->
<a id="c22277"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Rubies[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Part 1 - Collecting Names[=0x000A=][=0x000A=]The player[=0x0027=]s forename is a text that varies. The player[=0x0027=]s full name is a text that varies.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=].[=0x000A=][=0x000A=]To decide whether collecting names:[=0x000A=][=0x0009=]if the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=], yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]After reading a command when collecting names:[=0x000A=][=0x0009=]if the number of words in the player[=0x0027=]s command is greater than 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][paragraph break]Who are you, a member of the British royal family? No one has that many names. Let[=0x0027=]s try this again.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s full name is the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s forename is word number 1 in the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the command prompt is [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]Hi, [player[=0x0027=]s forename]![=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][banner text][=0x0022=];[=0x000A=][=0x0009=]move the player to the location;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]Instead of looking when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for printing the banner text when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for constructing the status line when collecting names: do nothing.[=0x000A=][=0x000A=]Part 2 - Adding the Leaderboard[=0x000A=][=0x000A=]File of Leaderboard is called [=0x0022=]leaderboard[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Leaderboard exists:[=0x000A=][=0x0009=][=0x0009=]read File of Leaderboard into the Table of Leaders;[=0x000A=][=0x0009=][=0x0009=]sort the Table of Leaders in reverse scored amount order.[=0x000A=][=0x000A=]When play ends:[=0x000A=][=0x0009=]choose row 10 in the Table of Leaders; [we[=0x0027=]ve sorted the table, so the lowest score will be the one at the bottom][=0x000A=][=0x0009=]if the score is greater than scored amount entry:[=0x000A=][=0x0009=][=0x0009=]now name entry is the player[=0x0027=]s forename;[=0x000A=][=0x0009=][=0x0009=]now the scored amount entry is the score;[=0x000A=][=0x0009=]show leaderboard;[=0x000A=][=0x0009=]write the File of Leaderboard from the Table of Leaders.[=0x000A=][=0x000A=]To show leaderboard:[=0x000A=][=0x0009=]sort the Table of Leaders in reverse scored amount order;[=0x000A=][=0x0009=]say [=0x0022=]Current leading scores: [paragraph break][=0x0022=];[=0x000A=][=0x0009=]say fixed letter spacing;[=0x000A=][=0x0009=]repeat through Table of Leaders:[=0x000A=][=0x0009=][=0x0009=]if scored amount entry is greater than 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]  [name entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column][=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is less than 1, now N is 1;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say N spaces;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][scored amount entry][line break][=0x0022=];[=0x000A=][=0x0009=]say variable letter spacing.[=0x000A=][=0x000A=]To say (N - a number) spaces:[=0x000A=][=0x0009=]repeat with index running from 1 to N:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [=0x0022=].[=0x000A=][=0x000A=]Table of Leaders[=0x000A=]scored amount[=0x0009=]name[=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=][=0x000A=][And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:][=0x000A=][=0x000A=]Part 3 - Scenario[=0x000A=][=0x000A=]Carry out taking something which is not handled:[=0x000A=][=0x0009=]increment score.[=0x000A=][=0x000A=]The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.[=0x000A=][=0x000A=]Instead of waiting, end the story finally.[=0x000A=][=0x000A=]Test me with [=0x0022=]get ruby / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Rubies&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22278" -->
<a id="c22278"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22279" -->
<a id="c22279"></a><blockquote class="code"><p class="quoted">
Part 1 - Collecting Names
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22280" -->
<a id="c22280"></a><blockquote class="code"><p class="quoted">
The player's forename is a text that varies. The player's full name is a text that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22281" -->
<a id="c22281"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;What is your name? &gt; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22282" -->
<a id="c22282"></a><blockquote class="code"><p class="quoted">
To decide whether collecting names:
<br />&#160;&#160;&#160;&#160;if the command prompt is &quot;What is your name? &gt; &quot;, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22283" -->
<a id="c22283"></a><blockquote class="code"><p class="quoted">
After reading a command when collecting names:
<br />&#160;&#160;&#160;&#160;if the number of words in the player's command is greater than 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[paragraph break]Who are you, a member of the British royal family? No one has that many names. Let's try this again.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;now the player's full name is the player's command;
<br />&#160;&#160;&#160;&#160;now the player's forename is word number 1 in the player's command;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;&gt;&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;Hi, [player's forename]!&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[banner text]&quot;;
<br />&#160;&#160;&#160;&#160;move the player to the location;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22284" -->
<a id="c22284"></a><blockquote class="code"><p class="quoted">
Instead of looking when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22285" -->
<a id="c22285"></a><blockquote class="code"><p class="quoted">
Rule for printing the banner text when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22286" -->
<a id="c22286"></a><blockquote class="code"><p class="quoted">
Rule for constructing the status line when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22287" -->
<a id="c22287"></a><blockquote class="code"><p class="quoted">
Part 2 - Adding the Leaderboard
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22288" -->
<a id="c22288"></a><blockquote class="code"><p class="quoted">
File of Leaderboard is called &quot;leaderboard&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22289" -->
<a id="c22289"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;if the File of Leaderboard exists:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read File of Leaderboard into the Table of Leaders;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22290" -->
<a id="c22290"></a><blockquote class="code"><p class="quoted">
When play ends:
<br />&#160;&#160;&#160;&#160;choose row 10 in the Table of Leaders; [we've sorted the table, so the lowest score will be the one at the bottom]
<br />&#160;&#160;&#160;&#160;if the score is greater than scored amount entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now name entry is the player's forename;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the scored amount entry is the score;
<br />&#160;&#160;&#160;&#160;show leaderboard;
<br />&#160;&#160;&#160;&#160;write the File of Leaderboard from the Table of Leaders.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22291" -->
<a id="c22291"></a><blockquote class="code"><p class="quoted">
To show leaderboard:
<br />&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order;
<br />&#160;&#160;&#160;&#160;say &quot;Current leading scores: [paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say fixed letter spacing;
<br />&#160;&#160;&#160;&#160;repeat through Table of Leaders:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if scored amount entry is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [name entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is less than 1, now N is 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say N spaces;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[scored amount entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say variable letter spacing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22292" -->
<a id="c22292"></a><blockquote class="code"><p class="quoted">
To say (N - a number) spaces:
<br />&#160;&#160;&#160;&#160;repeat with index running from 1 to N:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22293" -->
<a id="c22293"></a><blockquote class="code"><p class="quoted">
Table of Leaders
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">scored amount</p></td><td class="quotedtablecell"><p class="quoted">name</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:</p>
<!-- START CODE "c22294" -->
<a id="c22294"></a><blockquote class="code"><p class="quoted">
Part 3 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22295" -->
<a id="c22295"></a><blockquote class="code"><p class="quoted">
Carry out taking something which is not handled:
<br />&#160;&#160;&#160;&#160;increment score.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22296" -->
<a id="c22296"></a><blockquote class="code"><p class="quoted">
The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22297" -->
<a id="c22297"></a><blockquote class="code"><p class="quoted">
Instead of waiting, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22298" -->
<a id="c22298"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get ruby / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex422.html#e422"><i>RB</i></a></div>
<div class="egpanel" id="example422">
<p>The trick here is that we need a table with text in order to keep track of the players' names.</p>
<p>Part 1 largely replicates the source from &quot;Identity Theft&quot;; new material starts at Part 2.</p>
<!-- START CODE "c22299" -->
<a id="c22299"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Rubies[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Part 1 - Collecting Names[=0x000A=][=0x000A=]The player[=0x0027=]s forename is a text that varies. The player[=0x0027=]s full name is a text that varies.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=].[=0x000A=][=0x000A=]To decide whether collecting names:[=0x000A=][=0x0009=]if the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=], yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]After reading a command when collecting names:[=0x000A=][=0x0009=]if the number of words in the player[=0x0027=]s command is greater than 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][paragraph break]Who are you, a member of the British royal family? No one has that many names. Let[=0x0027=]s try this again.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s full name is the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s forename is word number 1 in the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the command prompt is [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]Hi, [player[=0x0027=]s forename]![=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][banner text][=0x0022=];[=0x000A=][=0x0009=]move the player to the location;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]Instead of looking when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for printing the banner text when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for constructing the status line when collecting names: do nothing.[=0x000A=][=0x000A=]Part 2 - Adding the Leaderboard[=0x000A=][=0x000A=]File of Leaderboard is called [=0x0022=]leaderboard[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Leaderboard exists:[=0x000A=][=0x0009=][=0x0009=]read File of Leaderboard into the Table of Leaders;[=0x000A=][=0x0009=][=0x0009=]sort the Table of Leaders in reverse scored amount order.[=0x000A=][=0x000A=]When play ends:[=0x000A=][=0x0009=]choose row 10 in the Table of Leaders; [we[=0x0027=]ve sorted the table, so the lowest score will be the one at the bottom][=0x000A=][=0x0009=]if the score is greater than scored amount entry:[=0x000A=][=0x0009=][=0x0009=]now name entry is the player[=0x0027=]s forename;[=0x000A=][=0x0009=][=0x0009=]now the scored amount entry is the score;[=0x000A=][=0x0009=]show leaderboard;[=0x000A=][=0x0009=]write the File of Leaderboard from the Table of Leaders.[=0x000A=][=0x000A=]To show leaderboard:[=0x000A=][=0x0009=]sort the Table of Leaders in reverse scored amount order;[=0x000A=][=0x0009=]say [=0x0022=]Current leading scores: [paragraph break][=0x0022=];[=0x000A=][=0x0009=]say fixed letter spacing;[=0x000A=][=0x0009=]repeat through Table of Leaders:[=0x000A=][=0x0009=][=0x0009=]if scored amount entry is greater than 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]  [name entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column][=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is less than 1, now N is 1;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say N spaces;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][scored amount entry][line break][=0x0022=];[=0x000A=][=0x0009=]say variable letter spacing.[=0x000A=][=0x000A=]To say (N - a number) spaces:[=0x000A=][=0x0009=]repeat with index running from 1 to N:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [=0x0022=].[=0x000A=][=0x000A=]Table of Leaders[=0x000A=]scored amount[=0x0009=]name[=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=]0[=0x0009=][=0x0022=]Smithee[=0x0022=][=0x000A=][=0x000A=][And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:][=0x000A=][=0x000A=]Part 3 - Scenario[=0x000A=][=0x000A=]Carry out taking something which is not handled:[=0x000A=][=0x0009=]increment score.[=0x000A=][=0x000A=]The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.[=0x000A=][=0x000A=]Instead of waiting, end the story finally.[=0x000A=][=0x000A=]Test me with [=0x0022=]get ruby / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;Rubies&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22300" -->
<a id="c22300"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22301" -->
<a id="c22301"></a><blockquote class="code"><p class="quoted">
Part 1 - Collecting Names
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22302" -->
<a id="c22302"></a><blockquote class="code"><p class="quoted">
The player's forename is a text that varies. The player's full name is a text that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22303" -->
<a id="c22303"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;What is your name? &gt; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22304" -->
<a id="c22304"></a><blockquote class="code"><p class="quoted">
To decide whether collecting names:
<br />&#160;&#160;&#160;&#160;if the command prompt is &quot;What is your name? &gt; &quot;, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22305" -->
<a id="c22305"></a><blockquote class="code"><p class="quoted">
After reading a command when collecting names:
<br />&#160;&#160;&#160;&#160;if the number of words in the player's command is greater than 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[paragraph break]Who are you, a member of the British royal family? No one has that many names. Let's try this again.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;now the player's full name is the player's command;
<br />&#160;&#160;&#160;&#160;now the player's forename is word number 1 in the player's command;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;&gt;&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;Hi, [player's forename]!&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[banner text]&quot;;
<br />&#160;&#160;&#160;&#160;move the player to the location;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22306" -->
<a id="c22306"></a><blockquote class="code"><p class="quoted">
Instead of looking when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22307" -->
<a id="c22307"></a><blockquote class="code"><p class="quoted">
Rule for printing the banner text when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22308" -->
<a id="c22308"></a><blockquote class="code"><p class="quoted">
Rule for constructing the status line when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22309" -->
<a id="c22309"></a><blockquote class="code"><p class="quoted">
Part 2 - Adding the Leaderboard
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22310" -->
<a id="c22310"></a><blockquote class="code"><p class="quoted">
File of Leaderboard is called &quot;leaderboard&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22311" -->
<a id="c22311"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;if the File of Leaderboard exists:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;read File of Leaderboard into the Table of Leaders;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22312" -->
<a id="c22312"></a><blockquote class="code"><p class="quoted">
When play ends:
<br />&#160;&#160;&#160;&#160;choose row 10 in the Table of Leaders; [we've sorted the table, so the lowest score will be the one at the bottom]
<br />&#160;&#160;&#160;&#160;if the score is greater than scored amount entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now name entry is the player's forename;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the scored amount entry is the score;
<br />&#160;&#160;&#160;&#160;show leaderboard;
<br />&#160;&#160;&#160;&#160;write the File of Leaderboard from the Table of Leaders.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22313" -->
<a id="c22313"></a><blockquote class="code"><p class="quoted">
To show leaderboard:
<br />&#160;&#160;&#160;&#160;sort the Table of Leaders in reverse scored amount order;
<br />&#160;&#160;&#160;&#160;say &quot;Current leading scores: [paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say fixed letter spacing;
<br />&#160;&#160;&#160;&#160;repeat through Table of Leaders:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if scored amount entry is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [name entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be 25 minus the number of characters in name entry; [here we want to space out the scores so they make a neat column]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is less than 1, now N is 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say N spaces;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[scored amount entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say variable letter spacing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22314" -->
<a id="c22314"></a><blockquote class="code"><p class="quoted">
To say (N - a number) spaces:
<br />&#160;&#160;&#160;&#160;repeat with index running from 1 to N:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22315" -->
<a id="c22315"></a><blockquote class="code"><p class="quoted">
Table of Leaders
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">scored amount</p></td><td class="quotedtablecell"><p class="quoted">name</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">0</p></td><td class="quotedtablecell"><p class="quoted">&quot;Smithee&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>And now we introduce a scenario that allows different players to come up with different scores -- admittedly not a very interesting scenario, but it will do for now:</p>
<!-- START CODE "c22316" -->
<a id="c22316"></a><blockquote class="code"><p class="quoted">
Part 3 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22317" -->
<a id="c22317"></a><blockquote class="code"><p class="quoted">
Carry out taking something which is not handled:
<br />&#160;&#160;&#160;&#160;increment score.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22318" -->
<a id="c22318"></a><blockquote class="code"><p class="quoted">
The Big Treasure Chamber is a room. It contains a ruby, an emerald, a gold tooth, an antique katana, and a silver coin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22319" -->
<a id="c22319"></a><blockquote class="code"><p class="quoted">
Instead of waiting, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c22320" -->
<a id="c22320"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get ruby / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
