<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>27.20. Primitive Inform 6 declarations of rules</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง27.20. Primitive Inform 6 declarations of rules</p>
<p>By writing a sentence like this:</p>
<!-- START CODE "c2119" -->
<a id="c2119"></a><blockquote class="code"><p class="quoted">
The underground rule translates into I6 as &quot;UNDERGROUND_R&quot;.
</p></blockquote>
<!-- END CODE -->
<p>we create a new rule, the &quot;underground rule&quot;, and also notify Inform that it will have no definition as I7 source text: instead, it will be provided as an I6 routine called &quot;UNDERGROUND_R&quot;. We can define this with an Include like so:</p>
<!-- START CODE "c2120" -->
<a id="c2120"></a><blockquote class="code"><p class="quoted">
Include (-
<br />[ UNDERGROUND_R;
<br />&#160;&#160;&#160;&#160;if (real_location hasnt light) { RulebookSucceeds(); rtrue; }
<br />&#160;&#160;&#160;&#160;rfalse;
<br />];
<br />-).
</p></blockquote>
<!-- END CODE -->
<p>The rule should return false if it wants to make no decision, but call either RulebookSucceeds or RulebookFails and return true if it does. These routines can optionally take an argument: which will be the return value from the rulebook.</p>
<p>Note that UNDERGROUND_R itself has no arguments. In the case of an action based rulebook, the I6 variables noun, second and actor can be referred to, while for a value based rulebook the parameter is stored in the I6 global variable parameter_object (which is not necessarily an object, in spite of the name).</p>
<p>We can put this rule into a rulebook in the same way that any named rule can be:</p>
<!-- START CODE "c2121" -->
<a id="c2121"></a><blockquote class="code"><p class="quoted">
The underground rule is listed in the spot danger rules.
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_27_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_27_1.html" class="standardlink">Start of Chapter 27: Extensions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_27_19.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_27_19.html" class="standardlink">Back to ยง27.19. Longer extracts of Inform 6 code</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_27_21.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_27_21.html" class="standardlink">Onward to ยง27.21. Inform 6 objects and classes</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
