<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>22.7. Kind variables</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง22.7. Kind variables</p>
<p>The examples of generic phrases in the previous section were really only toy examples. Suppose we want a phrase which will take any arithmetic value and triple it. We could do something like this:</p>
<!-- START CODE "c1885" -->
<a id="c1885"></a><blockquote class="code"><p class="quoted">
To triple (V - arithmetic value): say &quot;[V times 3].&quot;
</p></blockquote>
<!-- END CODE -->
<p>But this only prints the answer. Suppose we want to be given the value back, instead: how can we write the phrase? The trouble is that, not knowing the kind of V, we can't say what kind will be produced. We need a way of saying &quot;the same kind comes out as went in&quot;. Inform expresses that using kind variables:</p>
<!-- START CODE "c1886" -->
<a id="c1886"></a><blockquote class="code"><p class="quoted">
To decide which K is triple (original - arithmetic value of kind K):
<br />&#160;&#160;&#160;&#160;decide on 3 times the original.
</p></blockquote>
<!-- END CODE -->
<p>Here, K stands for any kind which matches &quot;arithmetic value&quot;. Inform supports exactly 26 of these symbols, which are written A to Z, but it's customary to use K and L. (They can be written in the plural if we like: e.g., &quot;list of Ks&quot;. But they must always use a capital letter: &quot;list of k&quot; is not allowed.)</p>
<p>Each symbol we use has to be declared in exactly one of the bracketed ingredients for the phrase - here, the declaration is &quot;arithmetic value of kind K&quot;. That creates K and says that it has to be arithmetic; if we'd just said &quot;value of kind K&quot;, it could have been anything. (Alternatively, we could use any of the kinds of kind in the previous section.)</p>
<p>For a more ambitious example, here is one way to define the mapping operation described earlier in the chapter:</p>
<!-- START CODE "c1887" -->
<a id="c1887"></a><blockquote class="code"><p class="quoted">
To decide what list of L is (function - phrase K -&gt; value of kind L)
<br />&#160;&#160;&#160;&#160;applied to (original list - list of values of kind K):
<br />&#160;&#160;&#160;&#160;let the result be a list of Ls;
<br />&#160;&#160;&#160;&#160;repeat with item running through the original list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the mapped item be the function applied to the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add the mapped item to the result;
<br />&#160;&#160;&#160;&#160;decide on the result.
</p></blockquote>
<!-- END CODE -->
<p>Here we need two symbols to explain the complicated way that the values going in and out have to match up to each other. Note also the way that the temporary variable &quot;result&quot; is created:</p>
<!-- START CODE "c1888" -->
<a id="c1888"></a><blockquote class="code"><p class="quoted">
let the result be a list of Ls;
</p></blockquote>
<!-- END CODE -->
<p>Ordinarily, of course, &quot;L&quot; is not a kind. But within the body of a phrase definition, it means whatever kind L matched against.</p>
<p>When a symbol occurs several times in the same definition, subtle differences can arise according to which appearance is the declaration. These are not quite the same:</p>
<!-- START CODE "c1889" -->
<a id="c1889"></a><blockquote class="code"><p class="quoted">
To hunt for (V - value of kind K) in (L - list of Ks): ...
<br />To hunt for (V - K) in (L - list of values of kind K): ...
</p></blockquote>
<!-- END CODE -->
<p>The difference arises - though very rarely - if V has some different kind compared to the list entries, but which can be used as if it were of that kind. For example,</p>
<!-- START CODE "c1890" -->
<a id="c1890"></a><blockquote class="code"><p class="quoted">
hunt for the player's command in {&quot;take all&quot;, &quot;wait&quot;};
</p></blockquote>
<!-- END CODE -->
<p>Here V is a snippet, but L is a list of texts; and a snippet can be used in place of a text, but not vice versa. So this will match the second definition, because K is set to &quot;text&quot;, but it won't match the first, where K is set to &quot;snippet&quot;.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_22_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_22_1.html" class="standardlink">Start of Chapter 22: Advanced Phrases</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_22_6.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_22_6.html" class="standardlink">Back to ยง22.6. Generic phrases</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_22_8.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_22_8.html" class="standardlink">Onward to ยง22.8. Matching the names of kinds</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
