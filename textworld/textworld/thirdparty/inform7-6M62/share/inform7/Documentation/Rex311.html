<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>3.5. Doors, Staircases, and Bridges</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง3.5. Doors, Staircases, and Bridges</p>
<p>Inform's &quot;door&quot; kind provides for a tangible thing which comes between one room and another. A door can be open or closed, and openable or not: it can be locked or unlocked, and lockable or not. Here we create a conventional door, a natural gap in the rocks, and a (fixed in place) wooden ladder:</p>
<!-- START CODE "c23604" -->
<a id="c23604"></a><blockquote class="code"><p class="quoted">
The fire door is an open door. The fire door is east of the Projection Booth and west of the Fire Escape.
<br />The narrow crevice is an open unopenable door. The crevice is east of the Col du Prafleuri and west of Rocky Knoll Above Arolla.
<br />The wooden ladder is an open unopenable door. The ladder is above the Stableyard and below the Hay Loft.
</p></blockquote>
<!-- END CODE -->
<p>Most doors are visible from both sides: they are single objects but present in two rooms at once, which raises a number of complications. Inform normally uses the same description looking from each way, which is not very interesting: <span class="boldface">When?</span> and <span class="boldface">Whence?</span> demonstrate neat ways to describe the two sides differently, and <span class="boldface">Whither?</span> adds the option for the player to refer to doors as &quot;the west door&quot; and &quot;the east door&quot; automatically.</p>
<p><span class="boldface">Neighbourhood Watch</span> goes further by making a door behave differently on each side: from the &quot;outside&quot; you need a key, but &quot;inside&quot; it opens on a latch. Finally, <span class="boldface">Garibaldi 1</span> shows how to access information about the two sides of a door.</p>
<p><span class="boldface">Higher Calling</span> demonstrates doors which automatically open as needed: though using the Inform extension Locksmith by Emily Short is probably easier and better. <span class="boldface">Elsie</span>, conversely, demonstrates a door that closes one turn after the player has opened it.</p>
<p>Certain complications apply when characters other than the player have to see and interact with doors that exist in other rooms. <span class="boldface">Wainwright Acts</span> demonstrates the syntax needed to handle this technically quirky situation.</p>
<p><span class="boldface">Something Narsty</span> and <span class="boldface">Hayseed</span> provide a &quot;staircase&quot; kind useful for vertically arranged, always-open doors like staircases and (fixed in place) ladders.</p>
<p><span class="boldface">One Short Plank</span> implements a precarious plank bridge across a chasm as an open unopenable door.</p>
<p class="crossreference"><a href="RB_3_6.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Windows</b></a><i> for climbing through a window from one room to another</i></p><p class="crossreference"><a href="RB_10_6.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Ropes</b></a><i> for portable connections between rooms, much of the development of which could be adapted to handle portable ladders. &quot;Doors&quot; are never allowed to move</i></p><p class="crossreference"><a href="RB_10_10.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Magic (Breaking the Laws of Physics)</b></a><i> for a hat that lets the player walk through closed doors</i></p><p class="crossreference"><a href="RB_6_3.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Modifying Existing Commands</b></a><i> for ways to allow the player to unlock with a key he isn't currently holding</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_3_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="RB_3_1.html" class="standardlink">Start of Chapter 3: Place</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_3_4.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="RB_3_4.html" class="standardlink">Back to ยง3.4. Continuous Spaces and The Outdoors</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_3_6.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="RB_3_6.html" class="standardlink">Onward to ยง3.6. Windows</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e44"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex44.html#e44" class="eglink"><b>44</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex44.html#e44" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Something Narsty</span></b></a><br />A staircase always open and never openable.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex44.html#e44"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e286"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex286.html#e286" class="eglink"><b>63</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex286.html#e286" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">When?</span></b></a><br />A door whose description says "...leads east" in one place and "...leads west" in the other.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex286.html#e286"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e271"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex271.html#e271" class="eglink"><b>89</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex271.html#e271" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Hayseed</span></b></a><br />A refinement of our staircase kind which can be climbed.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex271.html#e271"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e404"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex404.html#e404" class="eglink"><b>128</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex404.html#e404" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Higher Calling</span></b></a><br />All doors in the game automatically attempt to open if the player approaches them when they are closed.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex404.html#e404"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e54"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex54.html#e54" class="eglink"><b>236</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex54.html#e54" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Wainwright Acts</span></b></a><br />A technical note about checking the location of door objects when characters other than the player are interacting with them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex54.html#e54"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e132"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex132.html#e132" class="eglink"><b>319</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex132.html#e132" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Whither?</span></b></a><br />A door whose description says where it leads; and which automatically understands references such as "the west door" and "the east door" depending on which direction it leads from the location.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex132.html#e132"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e311"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="RB_3_5.html#e311" class="eglink"><b>24</b></a></div>
<div class="egpanel" id="example311">
<p>Suppose we want a locked door that can be opened with a key, but is also openable by hand without a key from one side only. We start by defining an ordinary lockable door and the key that controls it:</p>
<!-- START CODE "c33109" -->
<a id="c33109"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Neighborhood Watch[=0x0022=][=0x000A=][=0x000A=]The shabby door is a door. It is outside from the Studio Apartment and inside from the Rickety Stairwell. The shabby door is locked.[=0x000A=][=0x000A=]The brass key is carried by the player. It unlocks the shabby door.[=0x000A=][=0x000A=][The next part is going to require that we modify the normal operation of the [=0x0022=]lock[=0x0022=] command. [=0x0022=]Lock[=0x0022=] ordinarily requires that the player supply two objects: a thing he wants to unlock, and the key he wants to use on it. The full command is LOCK DOOR WITH THE KEY, and Inform will not accept simply LOCK DOOR as locking.][=0x000A=][=0x000A=][Therefore, we[=0x0027=]re going to need to create our own new variant on the lock verb (and the unlock verb, while we[=0x0027=]re at it). The full procedure for this is laid out in the chapters on Action and Understanding, but here is an example:][=0x000A=][=0x000A=]Understand [=0x0022=]lock [something][=0x0022=] as locking keylessly. Locking keylessly is an action applying to one thing.[=0x000A=][=0x000A=][Here we[=0x0027=]ve created a new action -- locking something without a key -- and we[=0x0027=]ve told Inform to understand LOCK DOOR as this action, rather than an incomplete command to LOCK DOOR WITH SOMETHING.][=0x000A=][=0x000A=][Now we add some instructions so that the game will not let us use this keyless unlocking command unless we[=0x0027=]re in the right place or are properly equipped:][=0x000A=][=0x000A=]Check locking keylessly:[=0x000A=][=0x0009=]if the noun is not a door, say [=0x0022=][The noun] is not something you can lock.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is locked, say [=0x0022=][The noun] is already locked.[=0x0022=] instead;[=0x000A=][=0x0009=]if the player carries the brass key and the player is in the Stairwell, try locking the noun with the brass key instead;[=0x000A=][=0x0009=]if the player is in the Stairwell, say [=0x0022=]You can[=0x0027=]t lock the door from this side without the key.[=0x0022=] instead.[=0x000A=][=0x000A=][This check rule is performed before the keyless locking action succeeds. The first thing we do is try to use the key if the player is outside and has the key: this way, LOCK DOOR will turn automatically into LOCK DOOR WITH THE KEY, under circumstances where that is both possible and necessary.][=0x000A=][=0x000A=][The second thing is to check whether the player is outside but keyless, and, if so stop the action from being performed successfully. Here we print a failure message followed by the word [=0x0022=]instead[=0x0022=], which tells Inform that we[=0x0027=]ve substituted some other outcome for the usual performance of the action.][=0x000A=][=0x000A=][Now we[=0x0027=]re reasonably sure that the player is only locking keylessly in the case that he is inside the Studio. (We might have to do a more thorough check for this if there were more than two rooms, but as it is, the player can only be in the Stairwell or in the Studio, so if we have ruled out the Stairwell, we are safe.) So now we want to add what happens when locking-without-a-key command succeeds:][=0x000A=][=0x000A=]Carry out locking keylessly:[=0x000A=][=0x0009=]now the noun is locked.[=0x000A=][=0x000A=][That[=0x0027=]s it. We[=0x0027=]ve just told Inform to make the door be locked. [=0x0022=]Now...[=0x0022=] syntax will be explained more thoroughly in the chapter on change. But we still haven[=0x0027=]t described to the player what just happened, so let[=0x0027=]s provide a description of that, too:][=0x000A=][=0x000A=]Report locking keylessly:[=0x000A=][=0x0009=]say [=0x0022=]You flip over the deadbolt to lock [the noun].[=0x0022=][=0x000A=][=0x000A=][And now we have to do a similar set of things for unlocking:][=0x000A=][=0x000A=]Understand [=0x0022=]unlock [something][=0x0022=] as unlocking keylessly. Unlocking keylessly is an action applying to one thing.[=0x000A=][=0x000A=]Check unlocking keylessly:[=0x000A=][=0x0009=]if the noun is not a door, say [=0x0022=][The noun] is not something you can lock.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is unlocked, say [=0x0022=][The noun] is already unlocked.[=0x0022=] instead;[=0x000A=][=0x0009=]if the player carries the brass key and the player is in the Stairwell, try unlocking the noun with the brass key instead;[=0x000A=][=0x0009=]if the player is in the Stairwell, say [=0x0022=]You can[=0x0027=]t unlock the door from this side without the key.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out unlocking keylessly:[=0x000A=][=0x0009=]now the noun is unlocked.[=0x000A=][=0x000A=]Report unlocking keylessly:[=0x000A=][=0x0009=]say [=0x0022=]You flip over the deadbolt to unlock [the noun].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]unlock door / drop key / open door / out / close door / lock door / open door / in / get key / out / close door / lock door / unlock door[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Neighborhood Watch&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33110" -->
<a id="c33110"></a><blockquote class="code"><p class="quoted">
The shabby door is a door. It is outside from the Studio Apartment and inside from the Rickety Stairwell. The shabby door is locked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33111" -->
<a id="c33111"></a><blockquote class="code"><p class="quoted">
The brass key is carried by the player. It unlocks the shabby door.
</p></blockquote>
<!-- END CODE -->
<p>The next part is going to require that we modify the normal operation of the &quot;lock&quot; command. &quot;Lock&quot; ordinarily requires that the player supply two objects: a thing he wants to unlock, and the key he wants to use on it. The full command is LOCK DOOR WITH THE KEY, and Inform will not accept simply LOCK DOOR as locking.</p>
<p>Therefore, we're going to need to create our own new variant on the lock verb (and the unlock verb, while we're at it). The full procedure for this is laid out in the chapters on Action and Understanding, but here is an example:</p>
<!-- START CODE "c33112" -->
<a id="c33112"></a><blockquote class="code"><p class="quoted">
Understand &quot;lock [something]&quot; as locking keylessly. Locking keylessly is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<p>Here we've created a new action -- locking something without a key -- and we've told Inform to understand LOCK DOOR as this action, rather than an incomplete command to LOCK DOOR WITH SOMETHING.</p>
<p>Now we add some instructions so that the game will not let us use this keyless unlocking command unless we're in the right place or are properly equipped:</p>
<!-- START CODE "c33113" -->
<a id="c33113"></a><blockquote class="code"><p class="quoted">
Check locking keylessly:
<br />&#160;&#160;&#160;&#160;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is locked, say &quot;[The noun] is already locked.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player carries the brass key and the player is in the Stairwell, try locking the noun with the brass key instead;
<br />&#160;&#160;&#160;&#160;if the player is in the Stairwell, say &quot;You can't lock the door from this side without the key.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>This check rule is performed before the keyless locking action succeeds. The first thing we do is try to use the key if the player is outside and has the key: this way, LOCK DOOR will turn automatically into LOCK DOOR WITH THE KEY, under circumstances where that is both possible and necessary.</p>
<p>The second thing is to check whether the player is outside but keyless, and, if so stop the action from being performed successfully. Here we print a failure message followed by the word &quot;instead&quot;, which tells Inform that we've substituted some other outcome for the usual performance of the action.</p>
<p>Now we're reasonably sure that the player is only locking keylessly in the case that he is inside the Studio. (We might have to do a more thorough check for this if there were more than two rooms, but as it is, the player can only be in the Stairwell or in the Studio, so if we have ruled out the Stairwell, we are safe.) So now we want to add what happens when locking-without-a-key command succeeds:</p>
<!-- START CODE "c33114" -->
<a id="c33114"></a><blockquote class="code"><p class="quoted">
Carry out locking keylessly:
<br />&#160;&#160;&#160;&#160;now the noun is locked.
</p></blockquote>
<!-- END CODE -->
<p>That's it. We've just told Inform to make the door be locked. &quot;Now...&quot; syntax will be explained more thoroughly in the chapter on change. But we still haven't described to the player what just happened, so let's provide a description of that, too:</p>
<!-- START CODE "c33115" -->
<a id="c33115"></a><blockquote class="code"><p class="quoted">
Report locking keylessly:
<br />&#160;&#160;&#160;&#160;say &quot;You flip over the deadbolt to lock [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And now we have to do a similar set of things for unlocking:</p>
<!-- START CODE "c33116" -->
<a id="c33116"></a><blockquote class="code"><p class="quoted">
Understand &quot;unlock [something]&quot; as unlocking keylessly. Unlocking keylessly is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33117" -->
<a id="c33117"></a><blockquote class="code"><p class="quoted">
Check unlocking keylessly:
<br />&#160;&#160;&#160;&#160;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is unlocked, say &quot;[The noun] is already unlocked.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player carries the brass key and the player is in the Stairwell, try unlocking the noun with the brass key instead;
<br />&#160;&#160;&#160;&#160;if the player is in the Stairwell, say &quot;You can't unlock the door from this side without the key.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33118" -->
<a id="c33118"></a><blockquote class="code"><p class="quoted">
Carry out unlocking keylessly:
<br />&#160;&#160;&#160;&#160;now the noun is unlocked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33119" -->
<a id="c33119"></a><blockquote class="code"><p class="quoted">
Report unlocking keylessly:
<br />&#160;&#160;&#160;&#160;say &quot;You flip over the deadbolt to unlock [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33120" -->
<a id="c33120"></a><blockquote class="code"><p class="quoted">
Test me with &quot;unlock door / drop key / open door / out / close door / lock door / open door / in / get key / out / close door / lock door / unlock door&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Some (but not all) of this work is done for you if you like by the Locksmith extension. If you prefer, you can include that extension, then follow the documentation in order to implement the remainder of the scenario. Locksmith takes care of implementing the additional locking and unlocking actions, and provides some other conveniences.</p>
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_3_5.html#e311" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Neighborhood Watch</span></b></a><br />A locked door that can be locked or unlocked without a key from one side, but not from the other.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example311">
<p>Suppose we want a locked door that can be opened with a key, but is also openable by hand without a key from one side only. We start by defining an ordinary lockable door and the key that controls it:</p>
<!-- START CODE "c33121" -->
<a id="c33121"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Neighborhood Watch[=0x0022=][=0x000A=][=0x000A=]The shabby door is a door. It is outside from the Studio Apartment and inside from the Rickety Stairwell. The shabby door is locked.[=0x000A=][=0x000A=]The brass key is carried by the player. It unlocks the shabby door.[=0x000A=][=0x000A=][The next part is going to require that we modify the normal operation of the [=0x0022=]lock[=0x0022=] command. [=0x0022=]Lock[=0x0022=] ordinarily requires that the player supply two objects: a thing he wants to unlock, and the key he wants to use on it. The full command is LOCK DOOR WITH THE KEY, and Inform will not accept simply LOCK DOOR as locking.][=0x000A=][=0x000A=][Therefore, we[=0x0027=]re going to need to create our own new variant on the lock verb (and the unlock verb, while we[=0x0027=]re at it). The full procedure for this is laid out in the chapters on Action and Understanding, but here is an example:][=0x000A=][=0x000A=]Understand [=0x0022=]lock [something][=0x0022=] as locking keylessly. Locking keylessly is an action applying to one thing.[=0x000A=][=0x000A=][Here we[=0x0027=]ve created a new action -- locking something without a key -- and we[=0x0027=]ve told Inform to understand LOCK DOOR as this action, rather than an incomplete command to LOCK DOOR WITH SOMETHING.][=0x000A=][=0x000A=][Now we add some instructions so that the game will not let us use this keyless unlocking command unless we[=0x0027=]re in the right place or are properly equipped:][=0x000A=][=0x000A=]Check locking keylessly:[=0x000A=][=0x0009=]if the noun is not a door, say [=0x0022=][The noun] is not something you can lock.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is locked, say [=0x0022=][The noun] is already locked.[=0x0022=] instead;[=0x000A=][=0x0009=]if the player carries the brass key and the player is in the Stairwell, try locking the noun with the brass key instead;[=0x000A=][=0x0009=]if the player is in the Stairwell, say [=0x0022=]You can[=0x0027=]t lock the door from this side without the key.[=0x0022=] instead.[=0x000A=][=0x000A=][This check rule is performed before the keyless locking action succeeds. The first thing we do is try to use the key if the player is outside and has the key: this way, LOCK DOOR will turn automatically into LOCK DOOR WITH THE KEY, under circumstances where that is both possible and necessary.][=0x000A=][=0x000A=][The second thing is to check whether the player is outside but keyless, and, if so stop the action from being performed successfully. Here we print a failure message followed by the word [=0x0022=]instead[=0x0022=], which tells Inform that we[=0x0027=]ve substituted some other outcome for the usual performance of the action.][=0x000A=][=0x000A=][Now we[=0x0027=]re reasonably sure that the player is only locking keylessly in the case that he is inside the Studio. (We might have to do a more thorough check for this if there were more than two rooms, but as it is, the player can only be in the Stairwell or in the Studio, so if we have ruled out the Stairwell, we are safe.) So now we want to add what happens when locking-without-a-key command succeeds:][=0x000A=][=0x000A=]Carry out locking keylessly:[=0x000A=][=0x0009=]now the noun is locked.[=0x000A=][=0x000A=][That[=0x0027=]s it. We[=0x0027=]ve just told Inform to make the door be locked. [=0x0022=]Now...[=0x0022=] syntax will be explained more thoroughly in the chapter on change. But we still haven[=0x0027=]t described to the player what just happened, so let[=0x0027=]s provide a description of that, too:][=0x000A=][=0x000A=]Report locking keylessly:[=0x000A=][=0x0009=]say [=0x0022=]You flip over the deadbolt to lock [the noun].[=0x0022=][=0x000A=][=0x000A=][And now we have to do a similar set of things for unlocking:][=0x000A=][=0x000A=]Understand [=0x0022=]unlock [something][=0x0022=] as unlocking keylessly. Unlocking keylessly is an action applying to one thing.[=0x000A=][=0x000A=]Check unlocking keylessly:[=0x000A=][=0x0009=]if the noun is not a door, say [=0x0022=][The noun] is not something you can lock.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is unlocked, say [=0x0022=][The noun] is already unlocked.[=0x0022=] instead;[=0x000A=][=0x0009=]if the player carries the brass key and the player is in the Stairwell, try unlocking the noun with the brass key instead;[=0x000A=][=0x0009=]if the player is in the Stairwell, say [=0x0022=]You can[=0x0027=]t unlock the door from this side without the key.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out unlocking keylessly:[=0x000A=][=0x0009=]now the noun is unlocked.[=0x000A=][=0x000A=]Report unlocking keylessly:[=0x000A=][=0x0009=]say [=0x0022=]You flip over the deadbolt to unlock [the noun].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]unlock door / drop key / open door / out / close door / lock door / open door / in / get key / out / close door / lock door / unlock door[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Neighborhood Watch&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33122" -->
<a id="c33122"></a><blockquote class="code"><p class="quoted">
The shabby door is a door. It is outside from the Studio Apartment and inside from the Rickety Stairwell. The shabby door is locked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33123" -->
<a id="c33123"></a><blockquote class="code"><p class="quoted">
The brass key is carried by the player. It unlocks the shabby door.
</p></blockquote>
<!-- END CODE -->
<p>The next part is going to require that we modify the normal operation of the &quot;lock&quot; command. &quot;Lock&quot; ordinarily requires that the player supply two objects: a thing he wants to unlock, and the key he wants to use on it. The full command is LOCK DOOR WITH THE KEY, and Inform will not accept simply LOCK DOOR as locking.</p>
<p>Therefore, we're going to need to create our own new variant on the lock verb (and the unlock verb, while we're at it). The full procedure for this is laid out in the chapters on Action and Understanding, but here is an example:</p>
<!-- START CODE "c33124" -->
<a id="c33124"></a><blockquote class="code"><p class="quoted">
Understand &quot;lock [something]&quot; as locking keylessly. Locking keylessly is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<p>Here we've created a new action -- locking something without a key -- and we've told Inform to understand LOCK DOOR as this action, rather than an incomplete command to LOCK DOOR WITH SOMETHING.</p>
<p>Now we add some instructions so that the game will not let us use this keyless unlocking command unless we're in the right place or are properly equipped:</p>
<!-- START CODE "c33125" -->
<a id="c33125"></a><blockquote class="code"><p class="quoted">
Check locking keylessly:
<br />&#160;&#160;&#160;&#160;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is locked, say &quot;[The noun] is already locked.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player carries the brass key and the player is in the Stairwell, try locking the noun with the brass key instead;
<br />&#160;&#160;&#160;&#160;if the player is in the Stairwell, say &quot;You can't lock the door from this side without the key.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>This check rule is performed before the keyless locking action succeeds. The first thing we do is try to use the key if the player is outside and has the key: this way, LOCK DOOR will turn automatically into LOCK DOOR WITH THE KEY, under circumstances where that is both possible and necessary.</p>
<p>The second thing is to check whether the player is outside but keyless, and, if so stop the action from being performed successfully. Here we print a failure message followed by the word &quot;instead&quot;, which tells Inform that we've substituted some other outcome for the usual performance of the action.</p>
<p>Now we're reasonably sure that the player is only locking keylessly in the case that he is inside the Studio. (We might have to do a more thorough check for this if there were more than two rooms, but as it is, the player can only be in the Stairwell or in the Studio, so if we have ruled out the Stairwell, we are safe.) So now we want to add what happens when locking-without-a-key command succeeds:</p>
<!-- START CODE "c33126" -->
<a id="c33126"></a><blockquote class="code"><p class="quoted">
Carry out locking keylessly:
<br />&#160;&#160;&#160;&#160;now the noun is locked.
</p></blockquote>
<!-- END CODE -->
<p>That's it. We've just told Inform to make the door be locked. &quot;Now...&quot; syntax will be explained more thoroughly in the chapter on change. But we still haven't described to the player what just happened, so let's provide a description of that, too:</p>
<!-- START CODE "c33127" -->
<a id="c33127"></a><blockquote class="code"><p class="quoted">
Report locking keylessly:
<br />&#160;&#160;&#160;&#160;say &quot;You flip over the deadbolt to lock [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And now we have to do a similar set of things for unlocking:</p>
<!-- START CODE "c33128" -->
<a id="c33128"></a><blockquote class="code"><p class="quoted">
Understand &quot;unlock [something]&quot; as unlocking keylessly. Unlocking keylessly is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33129" -->
<a id="c33129"></a><blockquote class="code"><p class="quoted">
Check unlocking keylessly:
<br />&#160;&#160;&#160;&#160;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is unlocked, say &quot;[The noun] is already unlocked.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player carries the brass key and the player is in the Stairwell, try unlocking the noun with the brass key instead;
<br />&#160;&#160;&#160;&#160;if the player is in the Stairwell, say &quot;You can't unlock the door from this side without the key.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33130" -->
<a id="c33130"></a><blockquote class="code"><p class="quoted">
Carry out unlocking keylessly:
<br />&#160;&#160;&#160;&#160;now the noun is unlocked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33131" -->
<a id="c33131"></a><blockquote class="code"><p class="quoted">
Report unlocking keylessly:
<br />&#160;&#160;&#160;&#160;say &quot;You flip over the deadbolt to unlock [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c33132" -->
<a id="c33132"></a><blockquote class="code"><p class="quoted">
Test me with &quot;unlock door / drop key / open door / out / close door / lock door / open door / in / get key / out / close door / lock door / unlock door&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Some (but not all) of this work is done for you if you like by the Locksmith extension. If you prefer, you can include that extension, then follow the documentation in order to implement the remainder of the scenario. Locksmith takes care of implementing the additional locking and unlocking actions, and provides some other conveniences.</p>
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<a  href="ex311.html#e311"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e79"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex79.html#e79" class="eglink"><b>106</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex79.html#e79" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">One Short Plank</span></b></a><br />A plank bridge which breaks if the player is carrying something when he goes across it. Pushing anything over the bridge is forbidden outright.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex79.html#e79"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e17"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex17.html#e17" class="eglink"><b>150</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex17.html#e17" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Elsie</span></b></a><br />A door that closes automatically one turn after the player opens it.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex17.html#e17"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e65"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex65.html#e65" class="eglink"><b>22</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex65.html#e65" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Garibaldi 1</span></b></a><br />Providing a security readout device by which the player can check on the status of all doors in the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex65.html#e65"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e240"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex240.html#e240" class="eglink"><b>64</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex240.html#e240" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Whence?</span></b></a><br />A kind of door that always automatically describes the direction it opens and what lies on the far side (if that other room has been visited).</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex240.html#e240"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
