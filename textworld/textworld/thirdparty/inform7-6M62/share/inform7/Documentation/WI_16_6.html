<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>16.6. Repeating through tables</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง16.6. Repeating through tables</p>
<p>We very often want to run through a table doing something to, or with, each row in turn, so a special loop is provided for this. Rather than having to write all this out:</p>
<!-- START CODE "c1257" -->
<a id="c1257"></a><blockquote class="code"><p class="quoted">
To list the succession:
<br />&#160;&#160;&#160;&#160;say &quot;The Succession List runs as follows...&quot;;
<br />&#160;&#160;&#160;&#160;repeat with N running from 1 to the number of rows in the Table of Recent Monarchs:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row N in the Table of Recent Monarchs;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[accession entry]: [name entry] ([family entry]).&quot;
</p></blockquote>
<!-- END CODE -->
<p>We can simply use this instead:</p>
<!-- START PHRASE "defn228" -->
<div class="definition"><a id="defn228"></a><p class="defnprototype"><b>repeat through </b>(table name)<b>:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattable -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, from top to bottom. Blank rows are skipped. Example:</p>
<!-- START CODE "c1258" -->
<a id="c1258"></a><blockquote class="code"><p class="quoted">
To list the succession:
<br />&#160;&#160;&#160;&#160;say &quot;The Succession List runs as follows...&quot;;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Recent Monarchs:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[accession entry]: [name entry] ([family entry]).&quot;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>Note that there is no loop variable here, unlike in other forms of &quot;repeat&quot;, because it's the choice of row which keeps track of how far we have got.</p>
<p>We can alternatively go backwards:</p>
<!-- START PHRASE "defn229" -->
<div class="definition"><a id="defn229"></a><p class="defnprototype"><b>repeat through </b>(table name)<b> in reverse order:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattablereverse -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, from bottom to top. Blank rows are skipped.</p>

<!-- end definition -->
</div>

<p>More often we want a sequence which is neither forwards nor backwards, but which depends on the actual values in the table.</p>
<!-- START PHRASE "defn230" -->
<div class="definition"><a id="defn230"></a><p class="defnprototype"><b>repeat through </b>(table name)<b> in </b>(table column)<b> order:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattablecol -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, in order of the values in the given column. Blank rows are skipped. Example:</p>
<!-- START CODE "c1259" -->
<a id="c1259"></a><blockquote class="code"><p class="quoted">
repeat through the Table of Recent Monarchs in name order: ...
<br />repeat through the Table of Recent Monarchs in accession order: ...
</p></blockquote>
<!-- END CODE -->
<p>work through the same table in rather different orders. The sequence is lower to higher (small numbers to high numbers, A to Z, and so on); insert &quot;reverse&quot; after &quot;in&quot; to reverse this.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn231" -->
<div class="definition"><a id="defn231"></a><p class="defnprototype"><b>repeat through </b>(table name)<b> in reverse </b>(table column)<b> order:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattablecolreverse -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, in order of the values in the given column. Blank rows are skipped. Example:</p>
<!-- START CODE "c1260" -->
<a id="c1260"></a><blockquote class="code"><p class="quoted">
repeat through the Table of Recent Monarchs in reverse name order: ...
<br />repeat through the Table of Recent Monarchs in reverse accession order: ...
</p></blockquote>
<!-- END CODE -->
<p>work through the same table in rather different orders. The sequence is higher to lower (high numbers to small numbers, Z to A, and so on); delete the &quot;reverse&quot; after &quot;in&quot; to reverse this.</p>

<!-- end definition -->
</div>

<p>In a loop like this, the data is not searched very efficiently, which is fine for modest-sized tables like the examples in this chapter, but might be a problem for much larger tables: see the later section on sorting.</p>
<p>These definitions mentioned blankness several times, and that's the topic to cover in the next section.</p>
<p class="crossreference"><a href="WI_16_11.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Sorting</b></a><i> for reordering a table to put it into increasing or decreasing order of the entries in any column</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_16_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_16_1.html" class="standardlink">Start of Chapter 16: Tables</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_16_5.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_16_5.html" class="standardlink">Back to ยง16.5. Choosing rows</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_16_7.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_16_7.html" class="standardlink">Onward to ยง16.7. Blank entries</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e392"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex392.html#e392" class="eglink"><b>272</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex392.html#e392" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Port Royal 4</span></b></a><br />A cell window through which the player can see people who were in Port Royal in the current year of game-time.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex392.html#e392"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
