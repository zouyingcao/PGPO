<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>20.7. Making new text with text substitutions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง20.7. Making new text with text substitutions</p>
<p>Substitutions are most often used just for printing, like so:</p>
<!-- START CODE "c1714" -->
<a id="c1714"></a><blockquote class="code"><p class="quoted">
say &quot;The clock reads [time of day].&quot;;
</p></blockquote>
<!-- END CODE -->
<p>But they can also produce text which can be stored up or used in other ways. For example, defining</p>
<!-- START CODE "c1715" -->
<a id="c1715"></a><blockquote class="code"><p class="quoted">
To decide what text is (T - text) doubled:
<br />&#160;&#160;&#160;&#160;decide on &quot;[T][T]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>makes</p>
<!-- START CODE "c1716" -->
<a id="c1716"></a><blockquote class="code"><p class="quoted">
let the Gerard Kenny reference be &quot;NewYork&quot; doubled;
</p></blockquote>
<!-- END CODE -->
<p>set this temporary variable to &quot;NewYorkNewYork&quot;.</p>
<p>There is, however, a subtlety here. A text with a substitution in it, like:</p>
<!-- START CODE "c1717" -->
<a id="c1717"></a><blockquote class="code"><p class="quoted">
&quot;The clock reads [time of day].&quot;
</p></blockquote>
<!-- END CODE -->
<p>is always waiting to be substituted, that is, to become something like:</p>
<!-- START CODE "c1718" -->
<a id="c1718"></a><blockquote class="code"><p class="quoted">
&quot;The clock reads 11:12 AM.&quot;
</p></blockquote>
<!-- END CODE -->
<p>If all we do with text is to print it, there's nothing to worry about. But if we're storing it up, especially for multiple turns, there are ambiguities. For example, suppose we're changing the look of the black status line bar at the top of the text window:</p>
<!-- START CODE "c1719" -->
<a id="c1719"></a><blockquote class="code"><p class="quoted">
now the left hand status line is &quot;[time of day]&quot;;
</p></blockquote>
<!-- END CODE -->
<p>Just copying &quot;[time of day]&quot; to the &quot;left hand status line&quot; variable doesn't make it substitute - which is just as well, or the top of the screen would perpetually show &quot;9:00 AM&quot;.</p>
<p>On the other hand, looking back at the phrase example:</p>
<!-- START CODE "c1720" -->
<a id="c1720"></a><blockquote class="code"><p class="quoted">
To decide what text is (T - text) doubled:
<br />&#160;&#160;&#160;&#160;decide on &quot;[T][T]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>&quot;[T][T]&quot; is substituted immediately it's formed. That's also a good thing, because &quot;T&quot; loses its meaning the moment the phrase finishes, which would make &quot;[T][T]&quot; meaningless anywhere else.</p>
<p>What's going on here is this: Inform substitutes text immediately if it contains references to a temporary value such as &quot;T&quot;, and otherwise only if it needs to access the contents. This is why &quot;[time of day]&quot; isn't substituted until we need to print it out (or, say, access the third character): &quot;time of day&quot; is a value which always exists, not a temporary one.</p>
<p>Using the adjectives &quot;substituted&quot; and &quot;unsubstituted&quot;, it's always possible to test whether a given text is in either state, should this ever be useful. For example,</p>
<!-- START CODE "c1721" -->
<a id="c1721"></a><blockquote class="code"><p class="quoted">
now the left hand status line is &quot;[time of day]&quot;;
<br />if the left hand status line is unsubstituted, say &quot;Yes!&quot;;
</p></blockquote>
<!-- END CODE -->
<p>will say &quot;Yes!&quot;: the LHSL is like a bomb waiting to go off. Speaking of which:</p>
<!-- START CODE "c1722" -->
<a id="c1722"></a><blockquote class="code"><p class="quoted">
The player is holding a temporal bomb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1723" -->
<a id="c1723"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;Clock reads: [time of day]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1724" -->
<a id="c1724"></a><blockquote class="code"><p class="quoted">
After dropping the temporal bomb:
<br />&#160;&#160;&#160;&#160;now the left hand status line is the substituted form of the left hand status line;
<br />&#160;&#160;&#160;&#160;say &quot;Time itself is now broken. Well done.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This is making use of:</p>
<!-- START PHRASE "defn313" -->
<div class="definition"><a id="defn313"></a><p class="defnprototype"><b>substituted form of </b>(text)<b> ... text</b></p>
<!-- END PHRASE -->
<!-- definition of ph_subform -->

<p>This takes a text and makes substitution occur immediately. For example,</p>
<!-- START CODE "c1725" -->
<a id="c1725"></a><blockquote class="code"><p class="quoted">
substituted form of &quot;time of death, [time of day]&quot;
</p></blockquote>
<!-- END CODE -->
<p>produces something like &quot;time of death, 9:15 AM&quot; rather than &quot;time of death, [time of day]&quot;. It's entirely legal to apply this to text which never had any substitutions in, so</p>
<!-- START CODE "c1726" -->
<a id="c1726"></a><blockquote class="code"><p class="quoted">
substituted form of &quot;balloon&quot;
</p></blockquote>
<!-- END CODE -->
<p>produces &quot;balloon&quot;.</p>

<!-- end definition -->
</div>

<p>Note that there's no analogous phrase for &quot;unsubstituted form of...&quot;, because once text has substituted, there's no way to go back.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_20_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="WI_20_1.html" class="standardlink">Start of Chapter 20: Advanced Text</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_20_6.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="WI_20_6.html" class="standardlink">Back to ยง20.6. Regular expression matching</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_20_8.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="WI_20_8.html" class="standardlink">Onward to ยง20.8. Replacements</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e278"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex278.html#e278" class="eglink"><b>416</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex278.html#e278" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mirror, Mirror</span></b></a><br />The sorcerer's mirror can, when held up high, form an impression of its surroundings which it then preserves.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex278.html#e278"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e376"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="ex376.html#e376" class="eglink"><b>417</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="ex376.html#e376" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Identity Theft</span></b></a><br />Allowing the player to enter a name to be used for the player character during the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rex376.html#e376"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e15"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="WI_20_7.html#e15" class="eglink"><b>418</b></a></div>
<div class="egpanel" id="example15">
<p>Here we create a class of matches that can be used to burn other objects. Our objectives are as follow:</p>
<p>Burned objects other than matches should be removed from play instantly (just as edible objects are instantly eaten). We could give everything its own burning duration, but that complicates matters and allows for fire to spread from one object to another; for an example of how to do that, see the example &quot;In Fire or in Flood&quot;.</p>
<p>Matches should be described to show whether they are burning or extinguished, and when the parser chooses one of several identical matches, it should make very clear which match it has selected.</p>
<p>The game must sensibly select and, if necessary, automatically light new matches to carry out a &gt;BURN THING command.</p>
<p>The matches must burn for a set number of turns before going out, never to be used again.</p>
<p>And finally, the part for which the text will be useful: when several matches go out in the same turn, we want the game to print</p>
<!-- START CODE "c3022" -->
<a id="c3022"></a><blockquote class="code"><p class="quoted">
Four matches go out.
</p></blockquote>
<!-- END CODE -->
<p>rather than</p>
<!-- START CODE "c3023" -->
<a id="c3023"></a><blockquote class="code"><p class="quoted">
A match goes out.
<br />A match goes out.
<br />A match goes out.
<br />A match goes out.
</p></blockquote>
<!-- END CODE -->
<p>This last function appears down in Section 3, if we wish to skip ahead and look at it.</p>
<!-- START CODE "c3024" -->
<a id="c3024"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]The Cow Exonerated[=0x0022=][=0x000A=][=0x000A=]Section 1 - Simple Burning[=0x000A=][=0x000A=]Understand the commands [=0x0022=]light[=0x0022=] and [=0x0022=]burn[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [something] with [strikable-match][=0x0022=] as burning it with. Understand [=0x0022=]burn [something] with [something preferably held][=0x0022=] as burning it with. Burning it with is an action applying to one thing and one carried thing.[=0x000A=][=0x000A=]Understand the command [=0x0022=]light[=0x0022=] as [=0x0022=]burn[=0x0022=].[=0x000A=][=0x000A=]A thing can be flammable or impervious. A thing is usually impervious.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only with flaming matches rule):[=0x000A=][=0x0009=]if the second noun is not a strikable-match, say [=0x0022=]You can only light things with matches.[=0x0022=] instead;[=0x000A=][=0x0009=]if the second noun is not flaming, say [=0x0022=][The second noun] needs to be burning first.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only flammable things rule):[=0x000A=][=0x0009=]if the noun is impervious, say [=0x0022=][The noun] cannot be burned.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only things not held rule):[=0x000A=][=0x0009=]say [=0x0022=][one of]It occurs to you to set down [the noun] before burning, just for safety[=0x0027=]s sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on][=0x0022=];[=0x000A=][=0x0009=]silently try the player dropping the noun;[=0x000A=][=0x0009=]if the player encloses the noun, stop the action.[=0x000A=][=0x000A=]Carry out burning something with something (this is the simplistic burning rule):[=0x000A=][=0x0009=]now the noun is nowhere.[=0x000A=][=0x000A=]Report burning something with something:[=0x000A=][=0x0009=]say [=0x0022=]You burn up [the noun].[=0x0022=][=0x000A=][=0x000A=]Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:[=0x000A=][=0x0009=]say [=0x0022=]You can only light things with matches.[=0x0022=];[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Section 2 - Matches[=0x000A=][=0x000A=][The word [=0x0022=]matches[=0x0022=] is used by Inform to compare snippets of text (see [=0x0022=]Reading a command[=0x0022=] in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called [=0x0022=]match[=0x0022=], so for the occasion we will give our matches a more specialized name, never visible to the player:][=0x000A=][=0x000A=]A strikable-match is a kind of thing. The plural of strikable-match is s-matches.[=0x000A=][=0x000A=]A strikable-match has a number called duration. The duration of a strikable-match is usually 3.[=0x000A=][=0x000A=]Rule for printing the name of a strikable-match: say [=0x0022=]match[=0x0022=].[=0x000A=]Rule for printing the plural name of a strikable-match: say [=0x0022=]matches[=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]match[=0x0022=] as a strikable-match. Understand [=0x0022=]matches[=0x0022=] as a strikable-match.[=0x000A=][=0x000A=]Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand [=0x0022=]burning[=0x0022=] or [=0x0022=]lit[=0x0022=] as flaming. Understand [=0x0022=]unused[=0x0022=] as new.[=0x000A=][=0x000A=]A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.[=0x000A=][=0x000A=]Before printing the name of a strikable-match while asking which do you mean:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=]Before printing the plural name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if not taking inventory, say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]After printing the name of a strikable-match (called special-target) while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if the player carries the special-target:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] you[=0x0027=]re carrying[=0x0022=];[=0x000A=][=0x0009=]otherwise if the special-target is in the location:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] on the ground[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target][=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]strike [something][=0x0022=] as attacking.[=0x000A=][=0x000A=]Understand [=0x0022=]strike [strikable-match][=0x0022=] as striking. Striking is an action applying to one carried thing.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [strikable-match][=0x0022=] as striking.[=0x000A=][=0x000A=]Does the player mean striking a new strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean striking a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Check striking a strikable-match (this is the strike only new matches rule):[=0x000A=][=0x0009=]if the noun is burnt, say [=0x0022=][The noun] has already burnt down and cannot be relit.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is flaming, say [=0x0022=][The noun] is already burning.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out striking a strikable-match (this is the standard striking rule):[=0x000A=][=0x0009=]now the noun is flaming;[=0x000A=][=0x0009=]now the noun is lit.[=0x000A=][=0x000A=]Report striking a strikable-match (this is the standard report striking rule):[=0x000A=][=0x0009=]say [=0x0022=]You light [the noun].[=0x0022=][=0x000A=][=0x000A=]Before burning something with a new strikable-match (this is the prior lighting rule):[=0x000A=][=0x0009=]say [=0x0022=](first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]silently try striking the second noun;[=0x000A=][=0x0009=]if the second noun is not flaming, stop the action.[=0x000A=][=0x000A=]Rule for implicitly taking a strikable-match (called target) while striking:[=0x000A=][=0x0009=]try silently taking the target.[=0x000A=][=0x000A=]Does the player mean burning something with a flaming strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean burning something with a new strikable-match:[=0x000A=][=0x0009=]it is likely.[=0x000A=][=0x000A=]Does the player mean burning something with a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Instead of burning a burnt strikable-match with something:[=0x000A=][=0x0009=]say [=0x0022=][The noun] is completely consumed and cannot be relit.[=0x0022=][=0x000A=][=0x000A=]Section 3 - Putting the Matches Out[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let N be 0; [here we track how many matches are being put out during this turn, so that we don[=0x0027=]t have to mention each match individually if several go out during the same move][=0x000A=][=0x0009=]repeat with item running through flaming s-matches:[=0x000A=][=0x0009=][=0x0009=]decrement the duration of the item;[=0x000A=][=0x0009=][=0x0009=]if the duration of the item is 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is burnt;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is unlit;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the item is visible, increment N;[=0x000A=][=0x0009=]if N is 1:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.[=0x0022=];[=0x000A=][=0x0009=]otherwise if N is greater than 1:[=0x000A=][=0x0009=][=0x0009=]let enumeration be [=0x0022=][N in words][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if N is the number of visible s-matches:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is two, say [=0x0022=]Both[=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]otherwise say [=0x0022=]All [enumeration][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][enumeration in title case][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].[=0x0022=][=0x000A=][=0x000A=]Section 4 - Scenario[=0x000A=][=0x000A=]Old Chicago is a room.[=0x000A=][=0x000A=]The player carries a flammable thing called a log. Understand [=0x0022=]wooden[=0x0022=] and [=0x0022=]wood[=0x0022=] as the log.[=0x000A=][=0x000A=]The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now every strikable-match carried by the player is flaming;[=0x000A=][=0x0009=]now every strikable-match carried by the player is lit.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / burn match / i / i / burn log with match / burn matchbox with match / i[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;The Cow Exonerated&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3025" -->
<a id="c3025"></a><blockquote class="code"><p class="quoted">
Section 1 - Simple Burning
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3026" -->
<a id="c3026"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;light&quot; and &quot;burn&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3027" -->
<a id="c3027"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [something] with [strikable-match]&quot; as burning it with. Understand &quot;burn [something] with [something preferably held]&quot; as burning it with. Burning it with is an action applying to one thing and one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3028" -->
<a id="c3028"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;light&quot; as &quot;burn&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3029" -->
<a id="c3029"></a><blockquote class="code"><p class="quoted">
A thing can be flammable or impervious. A thing is usually impervious.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3030" -->
<a id="c3030"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only with flaming matches rule):
<br />&#160;&#160;&#160;&#160;if the second noun is not a strikable-match, say &quot;You can only light things with matches.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, say &quot;[The second noun] needs to be burning first.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3031" -->
<a id="c3031"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only flammable things rule):
<br />&#160;&#160;&#160;&#160;if the noun is impervious, say &quot;[The noun] cannot be burned.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3032" -->
<a id="c3032"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only things not held rule):
<br />&#160;&#160;&#160;&#160;say &quot;[one of]It occurs to you to set down [the noun] before burning, just for safety's sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;silently try the player dropping the noun;
<br />&#160;&#160;&#160;&#160;if the player encloses the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3033" -->
<a id="c3033"></a><blockquote class="code"><p class="quoted">
Carry out burning something with something (this is the simplistic burning rule):
<br />&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3034" -->
<a id="c3034"></a><blockquote class="code"><p class="quoted">
Report burning something with something:
<br />&#160;&#160;&#160;&#160;say &quot;You burn up [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3035" -->
<a id="c3035"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:
<br />&#160;&#160;&#160;&#160;say &quot;You can only light things with matches.&quot;;
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3036" -->
<a id="c3036"></a><blockquote class="code"><p class="quoted">
Section 2 - Matches
</p></blockquote>
<!-- END CODE -->
<p>The word &quot;matches&quot; is used by Inform to compare snippets of text (see &quot;Reading a command&quot; in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called &quot;match&quot;, so for the occasion we will give our matches a more specialized name, never visible to the player:</p>
<!-- START CODE "c3037" -->
<a id="c3037"></a><blockquote class="code"><p class="quoted">
A strikable-match is a kind of thing. The plural of strikable-match is s-matches.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3038" -->
<a id="c3038"></a><blockquote class="code"><p class="quoted">
A strikable-match has a number called duration. The duration of a strikable-match is usually 3.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3039" -->
<a id="c3039"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a strikable-match: say &quot;match&quot;.
<br />Rule for printing the plural name of a strikable-match: say &quot;matches&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3040" -->
<a id="c3040"></a><blockquote class="code"><p class="quoted">
Understand &quot;match&quot; as a strikable-match. Understand &quot;matches&quot; as a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3041" -->
<a id="c3041"></a><blockquote class="code"><p class="quoted">
Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand &quot;burning&quot; or &quot;lit&quot; as flaming. Understand &quot;unused&quot; as new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3042" -->
<a id="c3042"></a><blockquote class="code"><p class="quoted">
A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3043" -->
<a id="c3043"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while asking which do you mean:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3044" -->
<a id="c3044"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
<br />Before printing the plural name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3045" -->
<a id="c3045"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if not taking inventory, say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3046" -->
<a id="c3046"></a><blockquote class="code"><p class="quoted">
After printing the name of a strikable-match (called special-target) while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if the player carries the special-target:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; you're carrying&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the special-target is in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; on the ground&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3047" -->
<a id="c3047"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [something]&quot; as attacking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3048" -->
<a id="c3048"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [strikable-match]&quot; as striking. Striking is an action applying to one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3049" -->
<a id="c3049"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [strikable-match]&quot; as striking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3050" -->
<a id="c3050"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3051" -->
<a id="c3051"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3052" -->
<a id="c3052"></a><blockquote class="code"><p class="quoted">
Check striking a strikable-match (this is the strike only new matches rule):
<br />&#160;&#160;&#160;&#160;if the noun is burnt, say &quot;[The noun] has already burnt down and cannot be relit.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is flaming, say &quot;[The noun] is already burning.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3053" -->
<a id="c3053"></a><blockquote class="code"><p class="quoted">
Carry out striking a strikable-match (this is the standard striking rule):
<br />&#160;&#160;&#160;&#160;now the noun is flaming;
<br />&#160;&#160;&#160;&#160;now the noun is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3054" -->
<a id="c3054"></a><blockquote class="code"><p class="quoted">
Report striking a strikable-match (this is the standard report striking rule):
<br />&#160;&#160;&#160;&#160;say &quot;You light [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3055" -->
<a id="c3055"></a><blockquote class="code"><p class="quoted">
Before burning something with a new strikable-match (this is the prior lighting rule):
<br />&#160;&#160;&#160;&#160;say &quot;(first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try striking the second noun;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3056" -->
<a id="c3056"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking a strikable-match (called target) while striking:
<br />&#160;&#160;&#160;&#160;try silently taking the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3057" -->
<a id="c3057"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a flaming strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3058" -->
<a id="c3058"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3059" -->
<a id="c3059"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3060" -->
<a id="c3060"></a><blockquote class="code"><p class="quoted">
Instead of burning a burnt strikable-match with something:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is completely consumed and cannot be relit.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3061" -->
<a id="c3061"></a><blockquote class="code"><p class="quoted">
Section 3 - Putting the Matches Out
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3062" -->
<a id="c3062"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let N be 0; [here we track how many matches are being put out during this turn, so that we don't have to mention each match individually if several go out during the same move]
<br />&#160;&#160;&#160;&#160;repeat with item running through flaming s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrement the duration of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the duration of the item is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is burnt;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is unlit;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is visible, increment N;
<br />&#160;&#160;&#160;&#160;if N is 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if N is greater than 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let enumeration be &quot;[N in words]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is the number of visible s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is two, say &quot;Both&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;All [enumeration]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[enumeration in title case]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3063" -->
<a id="c3063"></a><blockquote class="code"><p class="quoted">
Section 4 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3064" -->
<a id="c3064"></a><blockquote class="code"><p class="quoted">
Old Chicago is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3065" -->
<a id="c3065"></a><blockquote class="code"><p class="quoted">
The player carries a flammable thing called a log. Understand &quot;wooden&quot; and &quot;wood&quot; as the log.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3066" -->
<a id="c3066"></a><blockquote class="code"><p class="quoted">
The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3067" -->
<a id="c3067"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is flaming;
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3068" -->
<a id="c3068"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / burn match / i / i / burn log with match / burn matchbox with match / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_20_7.html#e15" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">The Cow Exonerated</span></b></a><br />Creating a class of matches that burn for a time and then go out, with elegant reporting when several matches go out at once.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example15">
<p>Here we create a class of matches that can be used to burn other objects. Our objectives are as follow:</p>
<p>Burned objects other than matches should be removed from play instantly (just as edible objects are instantly eaten). We could give everything its own burning duration, but that complicates matters and allows for fire to spread from one object to another; for an example of how to do that, see the example &quot;In Fire or in Flood&quot;.</p>
<p>Matches should be described to show whether they are burning or extinguished, and when the parser chooses one of several identical matches, it should make very clear which match it has selected.</p>
<p>The game must sensibly select and, if necessary, automatically light new matches to carry out a &gt;BURN THING command.</p>
<p>The matches must burn for a set number of turns before going out, never to be used again.</p>
<p>And finally, the part for which the text will be useful: when several matches go out in the same turn, we want the game to print</p>
<!-- START CODE "c3069" -->
<a id="c3069"></a><blockquote class="code"><p class="quoted">
Four matches go out.
</p></blockquote>
<!-- END CODE -->
<p>rather than</p>
<!-- START CODE "c3070" -->
<a id="c3070"></a><blockquote class="code"><p class="quoted">
A match goes out.
<br />A match goes out.
<br />A match goes out.
<br />A match goes out.
</p></blockquote>
<!-- END CODE -->
<p>This last function appears down in Section 3, if we wish to skip ahead and look at it.</p>
<!-- START CODE "c3071" -->
<a id="c3071"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]The Cow Exonerated[=0x0022=][=0x000A=][=0x000A=]Section 1 - Simple Burning[=0x000A=][=0x000A=]Understand the commands [=0x0022=]light[=0x0022=] and [=0x0022=]burn[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [something] with [strikable-match][=0x0022=] as burning it with. Understand [=0x0022=]burn [something] with [something preferably held][=0x0022=] as burning it with. Burning it with is an action applying to one thing and one carried thing.[=0x000A=][=0x000A=]Understand the command [=0x0022=]light[=0x0022=] as [=0x0022=]burn[=0x0022=].[=0x000A=][=0x000A=]A thing can be flammable or impervious. A thing is usually impervious.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only with flaming matches rule):[=0x000A=][=0x0009=]if the second noun is not a strikable-match, say [=0x0022=]You can only light things with matches.[=0x0022=] instead;[=0x000A=][=0x0009=]if the second noun is not flaming, say [=0x0022=][The second noun] needs to be burning first.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only flammable things rule):[=0x000A=][=0x0009=]if the noun is impervious, say [=0x0022=][The noun] cannot be burned.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only things not held rule):[=0x000A=][=0x0009=]say [=0x0022=][one of]It occurs to you to set down [the noun] before burning, just for safety[=0x0027=]s sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on][=0x0022=];[=0x000A=][=0x0009=]silently try the player dropping the noun;[=0x000A=][=0x0009=]if the player encloses the noun, stop the action.[=0x000A=][=0x000A=]Carry out burning something with something (this is the simplistic burning rule):[=0x000A=][=0x0009=]now the noun is nowhere.[=0x000A=][=0x000A=]Report burning something with something:[=0x000A=][=0x0009=]say [=0x0022=]You burn up [the noun].[=0x0022=][=0x000A=][=0x000A=]Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:[=0x000A=][=0x0009=]say [=0x0022=]You can only light things with matches.[=0x0022=];[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Section 2 - Matches[=0x000A=][=0x000A=][The word [=0x0022=]matches[=0x0022=] is used by Inform to compare snippets of text (see [=0x0022=]Reading a command[=0x0022=] in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called [=0x0022=]match[=0x0022=], so for the occasion we will give our matches a more specialized name, never visible to the player:][=0x000A=][=0x000A=]A strikable-match is a kind of thing. The plural of strikable-match is s-matches.[=0x000A=][=0x000A=]A strikable-match has a number called duration. The duration of a strikable-match is usually 3.[=0x000A=][=0x000A=]Rule for printing the name of a strikable-match: say [=0x0022=]match[=0x0022=].[=0x000A=]Rule for printing the plural name of a strikable-match: say [=0x0022=]matches[=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]match[=0x0022=] as a strikable-match. Understand [=0x0022=]matches[=0x0022=] as a strikable-match.[=0x000A=][=0x000A=]Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand [=0x0022=]burning[=0x0022=] or [=0x0022=]lit[=0x0022=] as flaming. Understand [=0x0022=]unused[=0x0022=] as new.[=0x000A=][=0x000A=]A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.[=0x000A=][=0x000A=]Before printing the name of a strikable-match while asking which do you mean:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=]Before printing the plural name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if not taking inventory, say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]After printing the name of a strikable-match (called special-target) while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if the player carries the special-target:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] you[=0x0027=]re carrying[=0x0022=];[=0x000A=][=0x0009=]otherwise if the special-target is in the location:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] on the ground[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target][=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]strike [something][=0x0022=] as attacking.[=0x000A=][=0x000A=]Understand [=0x0022=]strike [strikable-match][=0x0022=] as striking. Striking is an action applying to one carried thing.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [strikable-match][=0x0022=] as striking.[=0x000A=][=0x000A=]Does the player mean striking a new strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean striking a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Check striking a strikable-match (this is the strike only new matches rule):[=0x000A=][=0x0009=]if the noun is burnt, say [=0x0022=][The noun] has already burnt down and cannot be relit.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is flaming, say [=0x0022=][The noun] is already burning.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out striking a strikable-match (this is the standard striking rule):[=0x000A=][=0x0009=]now the noun is flaming;[=0x000A=][=0x0009=]now the noun is lit.[=0x000A=][=0x000A=]Report striking a strikable-match (this is the standard report striking rule):[=0x000A=][=0x0009=]say [=0x0022=]You light [the noun].[=0x0022=][=0x000A=][=0x000A=]Before burning something with a new strikable-match (this is the prior lighting rule):[=0x000A=][=0x0009=]say [=0x0022=](first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]silently try striking the second noun;[=0x000A=][=0x0009=]if the second noun is not flaming, stop the action.[=0x000A=][=0x000A=]Rule for implicitly taking a strikable-match (called target) while striking:[=0x000A=][=0x0009=]try silently taking the target.[=0x000A=][=0x000A=]Does the player mean burning something with a flaming strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean burning something with a new strikable-match:[=0x000A=][=0x0009=]it is likely.[=0x000A=][=0x000A=]Does the player mean burning something with a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Instead of burning a burnt strikable-match with something:[=0x000A=][=0x0009=]say [=0x0022=][The noun] is completely consumed and cannot be relit.[=0x0022=][=0x000A=][=0x000A=]Section 3 - Putting the Matches Out[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let N be 0; [here we track how many matches are being put out during this turn, so that we don[=0x0027=]t have to mention each match individually if several go out during the same move][=0x000A=][=0x0009=]repeat with item running through flaming s-matches:[=0x000A=][=0x0009=][=0x0009=]decrement the duration of the item;[=0x000A=][=0x0009=][=0x0009=]if the duration of the item is 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is burnt;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is unlit;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the item is visible, increment N;[=0x000A=][=0x0009=]if N is 1:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.[=0x0022=];[=0x000A=][=0x0009=]otherwise if N is greater than 1:[=0x000A=][=0x0009=][=0x0009=]let enumeration be [=0x0022=][N in words][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if N is the number of visible s-matches:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is two, say [=0x0022=]Both[=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]otherwise say [=0x0022=]All [enumeration][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][enumeration in title case][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].[=0x0022=][=0x000A=][=0x000A=]Section 4 - Scenario[=0x000A=][=0x000A=]Old Chicago is a room.[=0x000A=][=0x000A=]The player carries a flammable thing called a log. Understand [=0x0022=]wooden[=0x0022=] and [=0x0022=]wood[=0x0022=] as the log.[=0x000A=][=0x000A=]The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now every strikable-match carried by the player is flaming;[=0x000A=][=0x0009=]now every strikable-match carried by the player is lit.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / burn match / i / i / burn log with match / burn matchbox with match / i[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;The Cow Exonerated&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3072" -->
<a id="c3072"></a><blockquote class="code"><p class="quoted">
Section 1 - Simple Burning
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3073" -->
<a id="c3073"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;light&quot; and &quot;burn&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3074" -->
<a id="c3074"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [something] with [strikable-match]&quot; as burning it with. Understand &quot;burn [something] with [something preferably held]&quot; as burning it with. Burning it with is an action applying to one thing and one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3075" -->
<a id="c3075"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;light&quot; as &quot;burn&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3076" -->
<a id="c3076"></a><blockquote class="code"><p class="quoted">
A thing can be flammable or impervious. A thing is usually impervious.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3077" -->
<a id="c3077"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only with flaming matches rule):
<br />&#160;&#160;&#160;&#160;if the second noun is not a strikable-match, say &quot;You can only light things with matches.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, say &quot;[The second noun] needs to be burning first.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3078" -->
<a id="c3078"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only flammable things rule):
<br />&#160;&#160;&#160;&#160;if the noun is impervious, say &quot;[The noun] cannot be burned.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3079" -->
<a id="c3079"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only things not held rule):
<br />&#160;&#160;&#160;&#160;say &quot;[one of]It occurs to you to set down [the noun] before burning, just for safety's sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;silently try the player dropping the noun;
<br />&#160;&#160;&#160;&#160;if the player encloses the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3080" -->
<a id="c3080"></a><blockquote class="code"><p class="quoted">
Carry out burning something with something (this is the simplistic burning rule):
<br />&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3081" -->
<a id="c3081"></a><blockquote class="code"><p class="quoted">
Report burning something with something:
<br />&#160;&#160;&#160;&#160;say &quot;You burn up [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3082" -->
<a id="c3082"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:
<br />&#160;&#160;&#160;&#160;say &quot;You can only light things with matches.&quot;;
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3083" -->
<a id="c3083"></a><blockquote class="code"><p class="quoted">
Section 2 - Matches
</p></blockquote>
<!-- END CODE -->
<p>The word &quot;matches&quot; is used by Inform to compare snippets of text (see &quot;Reading a command&quot; in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called &quot;match&quot;, so for the occasion we will give our matches a more specialized name, never visible to the player:</p>
<!-- START CODE "c3084" -->
<a id="c3084"></a><blockquote class="code"><p class="quoted">
A strikable-match is a kind of thing. The plural of strikable-match is s-matches.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3085" -->
<a id="c3085"></a><blockquote class="code"><p class="quoted">
A strikable-match has a number called duration. The duration of a strikable-match is usually 3.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3086" -->
<a id="c3086"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a strikable-match: say &quot;match&quot;.
<br />Rule for printing the plural name of a strikable-match: say &quot;matches&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3087" -->
<a id="c3087"></a><blockquote class="code"><p class="quoted">
Understand &quot;match&quot; as a strikable-match. Understand &quot;matches&quot; as a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3088" -->
<a id="c3088"></a><blockquote class="code"><p class="quoted">
Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand &quot;burning&quot; or &quot;lit&quot; as flaming. Understand &quot;unused&quot; as new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3089" -->
<a id="c3089"></a><blockquote class="code"><p class="quoted">
A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3090" -->
<a id="c3090"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while asking which do you mean:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3091" -->
<a id="c3091"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
<br />Before printing the plural name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3092" -->
<a id="c3092"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if not taking inventory, say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3093" -->
<a id="c3093"></a><blockquote class="code"><p class="quoted">
After printing the name of a strikable-match (called special-target) while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if the player carries the special-target:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; you're carrying&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the special-target is in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; on the ground&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3094" -->
<a id="c3094"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [something]&quot; as attacking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3095" -->
<a id="c3095"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [strikable-match]&quot; as striking. Striking is an action applying to one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3096" -->
<a id="c3096"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [strikable-match]&quot; as striking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3097" -->
<a id="c3097"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3098" -->
<a id="c3098"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3099" -->
<a id="c3099"></a><blockquote class="code"><p class="quoted">
Check striking a strikable-match (this is the strike only new matches rule):
<br />&#160;&#160;&#160;&#160;if the noun is burnt, say &quot;[The noun] has already burnt down and cannot be relit.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is flaming, say &quot;[The noun] is already burning.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3100" -->
<a id="c3100"></a><blockquote class="code"><p class="quoted">
Carry out striking a strikable-match (this is the standard striking rule):
<br />&#160;&#160;&#160;&#160;now the noun is flaming;
<br />&#160;&#160;&#160;&#160;now the noun is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3101" -->
<a id="c3101"></a><blockquote class="code"><p class="quoted">
Report striking a strikable-match (this is the standard report striking rule):
<br />&#160;&#160;&#160;&#160;say &quot;You light [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3102" -->
<a id="c3102"></a><blockquote class="code"><p class="quoted">
Before burning something with a new strikable-match (this is the prior lighting rule):
<br />&#160;&#160;&#160;&#160;say &quot;(first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try striking the second noun;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3103" -->
<a id="c3103"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking a strikable-match (called target) while striking:
<br />&#160;&#160;&#160;&#160;try silently taking the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3104" -->
<a id="c3104"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a flaming strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3105" -->
<a id="c3105"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3106" -->
<a id="c3106"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3107" -->
<a id="c3107"></a><blockquote class="code"><p class="quoted">
Instead of burning a burnt strikable-match with something:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is completely consumed and cannot be relit.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3108" -->
<a id="c3108"></a><blockquote class="code"><p class="quoted">
Section 3 - Putting the Matches Out
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3109" -->
<a id="c3109"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let N be 0; [here we track how many matches are being put out during this turn, so that we don't have to mention each match individually if several go out during the same move]
<br />&#160;&#160;&#160;&#160;repeat with item running through flaming s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrement the duration of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the duration of the item is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is burnt;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is unlit;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is visible, increment N;
<br />&#160;&#160;&#160;&#160;if N is 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if N is greater than 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let enumeration be &quot;[N in words]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is the number of visible s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is two, say &quot;Both&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;All [enumeration]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[enumeration in title case]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3110" -->
<a id="c3110"></a><blockquote class="code"><p class="quoted">
Section 4 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3111" -->
<a id="c3111"></a><blockquote class="code"><p class="quoted">
Old Chicago is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3112" -->
<a id="c3112"></a><blockquote class="code"><p class="quoted">
The player carries a flammable thing called a log. Understand &quot;wooden&quot; and &quot;wood&quot; as the log.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3113" -->
<a id="c3113"></a><blockquote class="code"><p class="quoted">
The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3114" -->
<a id="c3114"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is flaming;
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3115" -->
<a id="c3115"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / burn match / i / i / burn log with match / burn matchbox with match / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<!-- EXAMPLE START -->
<a  href="Rex15.html#e15"><i>RB</i></a></div>
<div class="egpanel" id="example15">
<p>Here we create a class of matches that can be used to burn other objects. Our objectives are as follow:</p>
<p>Burned objects other than matches should be removed from play instantly (just as edible objects are instantly eaten). We could give everything its own burning duration, but that complicates matters and allows for fire to spread from one object to another; for an example of how to do that, see the example &quot;In Fire or in Flood&quot;.</p>
<p>Matches should be described to show whether they are burning or extinguished, and when the parser chooses one of several identical matches, it should make very clear which match it has selected.</p>
<p>The game must sensibly select and, if necessary, automatically light new matches to carry out a &gt;BURN THING command.</p>
<p>The matches must burn for a set number of turns before going out, never to be used again.</p>
<p>And finally, the part for which the text will be useful: when several matches go out in the same turn, we want the game to print</p>
<!-- START CODE "c3116" -->
<a id="c3116"></a><blockquote class="code"><p class="quoted">
Four matches go out.
</p></blockquote>
<!-- END CODE -->
<p>rather than</p>
<!-- START CODE "c3117" -->
<a id="c3117"></a><blockquote class="code"><p class="quoted">
A match goes out.
<br />A match goes out.
<br />A match goes out.
<br />A match goes out.
</p></blockquote>
<!-- END CODE -->
<p>This last function appears down in Section 3, if we wish to skip ahead and look at it.</p>
<!-- START CODE "c3118" -->
<a id="c3118"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]The Cow Exonerated[=0x0022=][=0x000A=][=0x000A=]Section 1 - Simple Burning[=0x000A=][=0x000A=]Understand the commands [=0x0022=]light[=0x0022=] and [=0x0022=]burn[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [something] with [strikable-match][=0x0022=] as burning it with. Understand [=0x0022=]burn [something] with [something preferably held][=0x0022=] as burning it with. Burning it with is an action applying to one thing and one carried thing.[=0x000A=][=0x000A=]Understand the command [=0x0022=]light[=0x0022=] as [=0x0022=]burn[=0x0022=].[=0x000A=][=0x000A=]A thing can be flammable or impervious. A thing is usually impervious.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only with flaming matches rule):[=0x000A=][=0x0009=]if the second noun is not a strikable-match, say [=0x0022=]You can only light things with matches.[=0x0022=] instead;[=0x000A=][=0x0009=]if the second noun is not flaming, say [=0x0022=][The second noun] needs to be burning first.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only flammable things rule):[=0x000A=][=0x0009=]if the noun is impervious, say [=0x0022=][The noun] cannot be burned.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only things not held rule):[=0x000A=][=0x0009=]say [=0x0022=][one of]It occurs to you to set down [the noun] before burning, just for safety[=0x0027=]s sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on][=0x0022=];[=0x000A=][=0x0009=]silently try the player dropping the noun;[=0x000A=][=0x0009=]if the player encloses the noun, stop the action.[=0x000A=][=0x000A=]Carry out burning something with something (this is the simplistic burning rule):[=0x000A=][=0x0009=]now the noun is nowhere.[=0x000A=][=0x000A=]Report burning something with something:[=0x000A=][=0x0009=]say [=0x0022=]You burn up [the noun].[=0x0022=][=0x000A=][=0x000A=]Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:[=0x000A=][=0x0009=]say [=0x0022=]You can only light things with matches.[=0x0022=];[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Section 2 - Matches[=0x000A=][=0x000A=][The word [=0x0022=]matches[=0x0022=] is used by Inform to compare snippets of text (see [=0x0022=]Reading a command[=0x0022=] in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called [=0x0022=]match[=0x0022=], so for the occasion we will give our matches a more specialized name, never visible to the player:][=0x000A=][=0x000A=]A strikable-match is a kind of thing. The plural of strikable-match is s-matches.[=0x000A=][=0x000A=]A strikable-match has a number called duration. The duration of a strikable-match is usually 3.[=0x000A=][=0x000A=]Rule for printing the name of a strikable-match: say [=0x0022=]match[=0x0022=].[=0x000A=]Rule for printing the plural name of a strikable-match: say [=0x0022=]matches[=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]match[=0x0022=] as a strikable-match. Understand [=0x0022=]matches[=0x0022=] as a strikable-match.[=0x000A=][=0x000A=]Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand [=0x0022=]burning[=0x0022=] or [=0x0022=]lit[=0x0022=] as flaming. Understand [=0x0022=]unused[=0x0022=] as new.[=0x000A=][=0x000A=]A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.[=0x000A=][=0x000A=]Before printing the name of a strikable-match while asking which do you mean:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=]Before printing the plural name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if not taking inventory, say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]After printing the name of a strikable-match (called special-target) while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if the player carries the special-target:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] you[=0x0027=]re carrying[=0x0022=];[=0x000A=][=0x0009=]otherwise if the special-target is in the location:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] on the ground[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target][=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]strike [something][=0x0022=] as attacking.[=0x000A=][=0x000A=]Understand [=0x0022=]strike [strikable-match][=0x0022=] as striking. Striking is an action applying to one carried thing.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [strikable-match][=0x0022=] as striking.[=0x000A=][=0x000A=]Does the player mean striking a new strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean striking a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Check striking a strikable-match (this is the strike only new matches rule):[=0x000A=][=0x0009=]if the noun is burnt, say [=0x0022=][The noun] has already burnt down and cannot be relit.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is flaming, say [=0x0022=][The noun] is already burning.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out striking a strikable-match (this is the standard striking rule):[=0x000A=][=0x0009=]now the noun is flaming;[=0x000A=][=0x0009=]now the noun is lit.[=0x000A=][=0x000A=]Report striking a strikable-match (this is the standard report striking rule):[=0x000A=][=0x0009=]say [=0x0022=]You light [the noun].[=0x0022=][=0x000A=][=0x000A=]Before burning something with a new strikable-match (this is the prior lighting rule):[=0x000A=][=0x0009=]say [=0x0022=](first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]silently try striking the second noun;[=0x000A=][=0x0009=]if the second noun is not flaming, stop the action.[=0x000A=][=0x000A=]Rule for implicitly taking a strikable-match (called target) while striking:[=0x000A=][=0x0009=]try silently taking the target.[=0x000A=][=0x000A=]Does the player mean burning something with a flaming strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean burning something with a new strikable-match:[=0x000A=][=0x0009=]it is likely.[=0x000A=][=0x000A=]Does the player mean burning something with a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Instead of burning a burnt strikable-match with something:[=0x000A=][=0x0009=]say [=0x0022=][The noun] is completely consumed and cannot be relit.[=0x0022=][=0x000A=][=0x000A=]Section 3 - Putting the Matches Out[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let N be 0; [here we track how many matches are being put out during this turn, so that we don[=0x0027=]t have to mention each match individually if several go out during the same move][=0x000A=][=0x0009=]repeat with item running through flaming s-matches:[=0x000A=][=0x0009=][=0x0009=]decrement the duration of the item;[=0x000A=][=0x0009=][=0x0009=]if the duration of the item is 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is burnt;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is unlit;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the item is visible, increment N;[=0x000A=][=0x0009=]if N is 1:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.[=0x0022=];[=0x000A=][=0x0009=]otherwise if N is greater than 1:[=0x000A=][=0x0009=][=0x0009=]let enumeration be [=0x0022=][N in words][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if N is the number of visible s-matches:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is two, say [=0x0022=]Both[=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]otherwise say [=0x0022=]All [enumeration][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][enumeration in title case][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].[=0x0022=][=0x000A=][=0x000A=]Section 4 - Scenario[=0x000A=][=0x000A=]Old Chicago is a room.[=0x000A=][=0x000A=]The player carries a flammable thing called a log. Understand [=0x0022=]wooden[=0x0022=] and [=0x0022=]wood[=0x0022=] as the log.[=0x000A=][=0x000A=]The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now every strikable-match carried by the player is flaming;[=0x000A=][=0x0009=]now every strikable-match carried by the player is lit.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / burn match / i / i / burn log with match / burn matchbox with match / i[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a>  &quot;The Cow Exonerated&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3119" -->
<a id="c3119"></a><blockquote class="code"><p class="quoted">
Section 1 - Simple Burning
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3120" -->
<a id="c3120"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;light&quot; and &quot;burn&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3121" -->
<a id="c3121"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [something] with [strikable-match]&quot; as burning it with. Understand &quot;burn [something] with [something preferably held]&quot; as burning it with. Burning it with is an action applying to one thing and one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3122" -->
<a id="c3122"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;light&quot; as &quot;burn&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3123" -->
<a id="c3123"></a><blockquote class="code"><p class="quoted">
A thing can be flammable or impervious. A thing is usually impervious.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3124" -->
<a id="c3124"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only with flaming matches rule):
<br />&#160;&#160;&#160;&#160;if the second noun is not a strikable-match, say &quot;You can only light things with matches.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, say &quot;[The second noun] needs to be burning first.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3125" -->
<a id="c3125"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only flammable things rule):
<br />&#160;&#160;&#160;&#160;if the noun is impervious, say &quot;[The noun] cannot be burned.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3126" -->
<a id="c3126"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only things not held rule):
<br />&#160;&#160;&#160;&#160;say &quot;[one of]It occurs to you to set down [the noun] before burning, just for safety's sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;silently try the player dropping the noun;
<br />&#160;&#160;&#160;&#160;if the player encloses the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3127" -->
<a id="c3127"></a><blockquote class="code"><p class="quoted">
Carry out burning something with something (this is the simplistic burning rule):
<br />&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3128" -->
<a id="c3128"></a><blockquote class="code"><p class="quoted">
Report burning something with something:
<br />&#160;&#160;&#160;&#160;say &quot;You burn up [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3129" -->
<a id="c3129"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:
<br />&#160;&#160;&#160;&#160;say &quot;You can only light things with matches.&quot;;
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3130" -->
<a id="c3130"></a><blockquote class="code"><p class="quoted">
Section 2 - Matches
</p></blockquote>
<!-- END CODE -->
<p>The word &quot;matches&quot; is used by Inform to compare snippets of text (see &quot;Reading a command&quot; in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called &quot;match&quot;, so for the occasion we will give our matches a more specialized name, never visible to the player:</p>
<!-- START CODE "c3131" -->
<a id="c3131"></a><blockquote class="code"><p class="quoted">
A strikable-match is a kind of thing. The plural of strikable-match is s-matches.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3132" -->
<a id="c3132"></a><blockquote class="code"><p class="quoted">
A strikable-match has a number called duration. The duration of a strikable-match is usually 3.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3133" -->
<a id="c3133"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a strikable-match: say &quot;match&quot;.
<br />Rule for printing the plural name of a strikable-match: say &quot;matches&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3134" -->
<a id="c3134"></a><blockquote class="code"><p class="quoted">
Understand &quot;match&quot; as a strikable-match. Understand &quot;matches&quot; as a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3135" -->
<a id="c3135"></a><blockquote class="code"><p class="quoted">
Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand &quot;burning&quot; or &quot;lit&quot; as flaming. Understand &quot;unused&quot; as new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3136" -->
<a id="c3136"></a><blockquote class="code"><p class="quoted">
A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3137" -->
<a id="c3137"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while asking which do you mean:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3138" -->
<a id="c3138"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
<br />Before printing the plural name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3139" -->
<a id="c3139"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if not taking inventory, say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3140" -->
<a id="c3140"></a><blockquote class="code"><p class="quoted">
After printing the name of a strikable-match (called special-target) while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if the player carries the special-target:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; you're carrying&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the special-target is in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; on the ground&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3141" -->
<a id="c3141"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [something]&quot; as attacking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3142" -->
<a id="c3142"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [strikable-match]&quot; as striking. Striking is an action applying to one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3143" -->
<a id="c3143"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [strikable-match]&quot; as striking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3144" -->
<a id="c3144"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3145" -->
<a id="c3145"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3146" -->
<a id="c3146"></a><blockquote class="code"><p class="quoted">
Check striking a strikable-match (this is the strike only new matches rule):
<br />&#160;&#160;&#160;&#160;if the noun is burnt, say &quot;[The noun] has already burnt down and cannot be relit.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is flaming, say &quot;[The noun] is already burning.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3147" -->
<a id="c3147"></a><blockquote class="code"><p class="quoted">
Carry out striking a strikable-match (this is the standard striking rule):
<br />&#160;&#160;&#160;&#160;now the noun is flaming;
<br />&#160;&#160;&#160;&#160;now the noun is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3148" -->
<a id="c3148"></a><blockquote class="code"><p class="quoted">
Report striking a strikable-match (this is the standard report striking rule):
<br />&#160;&#160;&#160;&#160;say &quot;You light [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3149" -->
<a id="c3149"></a><blockquote class="code"><p class="quoted">
Before burning something with a new strikable-match (this is the prior lighting rule):
<br />&#160;&#160;&#160;&#160;say &quot;(first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try striking the second noun;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3150" -->
<a id="c3150"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking a strikable-match (called target) while striking:
<br />&#160;&#160;&#160;&#160;try silently taking the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3151" -->
<a id="c3151"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a flaming strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3152" -->
<a id="c3152"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3153" -->
<a id="c3153"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3154" -->
<a id="c3154"></a><blockquote class="code"><p class="quoted">
Instead of burning a burnt strikable-match with something:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is completely consumed and cannot be relit.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3155" -->
<a id="c3155"></a><blockquote class="code"><p class="quoted">
Section 3 - Putting the Matches Out
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3156" -->
<a id="c3156"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let N be 0; [here we track how many matches are being put out during this turn, so that we don't have to mention each match individually if several go out during the same move]
<br />&#160;&#160;&#160;&#160;repeat with item running through flaming s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrement the duration of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the duration of the item is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is burnt;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is unlit;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is visible, increment N;
<br />&#160;&#160;&#160;&#160;if N is 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if N is greater than 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let enumeration be &quot;[N in words]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is the number of visible s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is two, say &quot;Both&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;All [enumeration]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[enumeration in title case]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3157" -->
<a id="c3157"></a><blockquote class="code"><p class="quoted">
Section 4 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3158" -->
<a id="c3158"></a><blockquote class="code"><p class="quoted">
Old Chicago is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3159" -->
<a id="c3159"></a><blockquote class="code"><p class="quoted">
The player carries a flammable thing called a log. Understand &quot;wooden&quot; and &quot;wood&quot; as the log.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3160" -->
<a id="c3160"></a><blockquote class="code"><p class="quoted">
The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3161" -->
<a id="c3161"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is flaming;
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3162" -->
<a id="c3162"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / burn match / i / i / burn log with match / burn matchbox with match / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
