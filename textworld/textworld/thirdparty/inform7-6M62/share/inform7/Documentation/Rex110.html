<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>6.15. Actions on Multiple Objects</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง6.15. Actions on Multiple Objects</p>
<p>Inform allows a handful of actions - TAKE, DROP, PUT, INSERT - to apply to more than one item at a time, so that the player can move things around easily.</p>
<p>The general principle is that multiple objects are allowed if the actions are likely to be successful but not interesting most of the time, and if they're things that the player could plausibly do all at once. For most actions, the use of ALL would seem weirdly indiscriminate: EAT ALL, say, describes very implausible behavior, and EXAMINE ALL would likely generate a screenful of text at once.</p>
<p>But this is all under our control. To create an action that uses multiples, or to allow the use of multiple objects with an already-existing action, we need to create an understand statement that uses the &quot;[things]&quot; token (note the plural). For instance:</p>
<!-- START CODE "c23685" -->
<a id="c23685"></a><blockquote class="code"><p class="quoted">
Understand &quot;give [things] to [someone]&quot; as giving it to.
</p></blockquote>
<!-- END CODE -->
<p>This would let the existing give action apply to multiple objects, in just the same way that &quot;take&quot; does. <span class="boldface">Shawn's Bad Day</span> demonstrates how we might allow EXAMINE ALL to print descriptions of every visible item.</p>
<p>Alternatively, we could generate a new action:</p>
<!-- START CODE "c23686" -->
<a id="c23686"></a><blockquote class="code"><p class="quoted">
Understand &quot;give [things] to [someone]&quot; as multiply-giving it to. Multiply-giving it to is an action applying to one carried thing and one thing.
</p></blockquote>
<!-- END CODE -->
<p>(In theory the language here should perhaps be &quot;several carried things&quot; -- but Inform is still going to process multiply-giving item by item, unless we redirect it. More about this in a moment.)</p>
<p>When handling an action that uses the &quot;[things]&quot; token, the parser makes a list of every item to which it is going to apply the action: this is called the multiple objects list. The multiple objects list can be the result of a vague request (GET ALL) or a specific one involving identical multiples (GET PENNIES, GET THREE APPLES) or a very specific one involving unique, named nouns (GET GERBIL, APPLE, AND POMEGRANATE).</p>
<p>We can manipulate what Inform includes in &quot;ALL&quot; in sentences like TAKE ALL with the &quot;deciding whether all includes...&quot; activity; for instance</p>
<!-- START CODE "c23687" -->
<a id="c23687"></a><blockquote class="code"><p class="quoted">
Rule for deciding whether all includes scenery: it does not.
</p></blockquote>
<!-- END CODE -->
<p>prevents TAKE ALL from applying to things that can't be moved anyway, avoiding lots of lines like</p>
<!-- START CODE "c23688" -->
<a id="c23688"></a><blockquote class="code"><p class="quoted">
tree: That's hardly portable.
<br />swing set: That's hardly portable.
</p></blockquote>
<!-- END CODE -->
<p>A slightly tedious technical note: the multiple objects list is not strictly a list in the standard Inform sense, because it is used so frequently in parsing that it would be cumbersome to handle it with the more flexible but less efficient structure used for lists. However, if we want to manipulate the multiple objects list as though it were an ordinary list -- that is, sort it, rotate it, truncate it, remove entries from it, etc -- we may do so by creating a list like this:</p>
<!-- START CODE "c23689" -->
<a id="c23689"></a><blockquote class="code"><p class="quoted">
let L be the multiple object list.
</p></blockquote>
<!-- END CODE -->
<p>and later after making L conform to our desires:</p>
<!-- START CODE "c23690" -->
<a id="c23690"></a><blockquote class="code"><p class="quoted">
alter the multiple object list to L.
</p></blockquote>
<!-- END CODE -->
<p>Inform next repeatedly runs the action rulebook for the action generated, using each item from the multiple object list as &quot;noun&quot; in turn (or as &quot;second noun&quot;, if that's where the [things] token appeared in the understand line). Since it is possible to alter the multiple object list before the &quot;generate action rule&quot; portion of the turn sequence consults the rulebooks, we can also affect the order in which the player's matched objects are handled; see <span class="boldface">Formicidae</span>. We should not attempt to change the multiple object list after this point, because this is likely to introduce bugs.</p>
<p>Each time Inform tries the action on a new noun, it prefixes the action-attempt with the name of the item it's currently working on. This is where we get such output as &quot;frog eyeballs:&quot; and &quot;newt toes:&quot; in long lists like</p>
<!-- START CODE "c23691" -->
<a id="c23691"></a><blockquote class="code"><p class="quoted">
frog eyeballs: Taken.
<br />newt toes: Taken.
</p></blockquote>
<!-- END CODE -->
<p>These names are generated by the &quot;announce items from multiple object lists rule&quot; in the action-handling rules; <span class="boldface">Escape from the Seraglio</span> shows how to alter them. In the context of this rule, the thing we are currently printing the name of can be called &quot;the current item from the multiple object list&quot;.</p>
<p>Suppressing names of objects entirely, while occasionally tempting, may have unintended consequences, especially if some of the attempted actions are prevented by check rules that themselves print things. It is safest to suppress the multiple object names in the case where we already know that the action will succeed wherever it is attempted (more often for observational actions like examining than for manipulative actions like taking, or where we mean to completely override default handling).</p>
<p>Given that our hypothetical &quot;multiply-giving&quot; applies to each given object in turn, it might seem to be useless to create &quot;multiply-giving&quot; as an action different from &quot;giving&quot; -- but the convenience is that manipulating the multiple object list makes it possible to group behavior artificially. The trick here is that, on the first pass of the multiply-giving rulebook, we look at the entire multiple object list, perform actions, print output, and set a flag saying that the action has been handled. The flag tells Inform not to do or print anything for any of the subsequent passes through that action rulebook; thus we artificially create a situation where, instead of performing an action on each object in turn, Inform acts once on the entire group. That allows us to assess the cumulative qualities of the group and have the action respond differently than it might when assessing each item individually.</p>
<p><span class="boldface">The Facts Were These</span> demonstrates how we might write an action for GIVE THREE DOLLARS TO MAN or GIVE PIE AND HAT TO MAN where the man would only accept the collective gift when its total proved satisfactory.</p>
<p><span class="boldface">Western Art History 305</span> demonstrates how we might allow EXAMINE, which doesn't normally permit multiple objects, to take them, but to give vaguer responses to a mass examination than an individual one.</p>
<p class="crossreference"><a href="RB_6_5.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Examining</b></a><i> for groups of objects that have a collective description different from their individual descriptions, and for commands that search multiple things at once</i></p><p class="crossreference"><a href="RB_10_3.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Dispensers and Supplies of Small Objects</b></a><i> for ways to let the player pick up a number of identical items from a dispenser or supply</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="RB_6_1.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6_14.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="RB_6_14.html" class="standardlink">Back to ยง6.14. Remembering, Converting and Combining Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6_16.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="RB_6_16.html" class="standardlink">Onward to ยง6.16. Alternate Default Messages</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e11"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex11.html#e11" class="eglink"><b>294</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex11.html#e11" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Shawn's Bad Day</span></b></a><br />Allowing the player to EXAMINE ALL.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex11.html#e11"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e296"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex296.html#e296" class="eglink"><b>327</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex296.html#e296" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Western Art History 305</span></b></a><br />Allowing EXAMINE to see multiple objects with a single command.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex296.html#e296"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e367"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex367.html#e367" class="eglink"><b>328</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex367.html#e367" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Best Till Last</span></b></a><br />Reordering multiple objects for dramatic effect.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex367.html#e367"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e261"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex261.html#e261" class="eglink"><b>410</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex261.html#e261" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Escape from the Seraglio</span></b></a><br />Replacing the usual response to TAKE ALL so that instead of output such as "grapes: Taken. orange: Taken.", Inform produces variable responses in place of "grapes:".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex261.html#e261"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e110"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="RB_6_15.html#e110" class="eglink"><b>428</b></a></div>
<div class="egpanel" id="example110">
<p>Suppose we have an item that produces an interesting result the first time the player lifts it -- a rock with dangerous ants revealed underneath. The effect of the surprise is a little weakened, though, if the player sees that response as the result of a TAKE ALL, when it might be printed like this:</p>
<!-- START CODE "c27087" -->
<a id="c27087"></a><blockquote class="code"><p class="quoted">
&gt;[3] get all
<br />tent peg: Taken.
<br />water flask: Taken.
<br />trading permit: Taken.
<br />innocent-looking rock: You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.
<br />rusty nail: Taken.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27088" -->
<a id="c27088"></a><blockquote class="code"><p class="quoted">
[Your score has just gone down by two points.]
</p></blockquote>
<!-- END CODE -->
<p>The calm response to &quot;rusty nail&quot; looks odd now, and the score change is disconnected from the event that caused it.</p>
<p>To manage this, we might institute a system so that interesting objects are handled last in their list, like so:</p>
<!-- START CODE "c27089" -->
<a id="c27089"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Formicidae[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The magic rule is listed before the generate action rule in the turn sequence rules.[=0x000A=][=0x000A=]A thing has a number called dramatic potential.[=0x000A=][=0x000A=]This is the magic rule:[=0x000A=][=0x0009=]let L be the multiple object list;[=0x000A=][=0x0009=]if the number of entries in L is greater than 1:[=0x000A=][=0x0009=][=0x0009=]sort L in dramatic potential order;[=0x000A=][=0x0009=][=0x0009=]alter the multiple object list to L.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Foothills is a room. [=0x0022=]The land has become hilly; though the soil is still mostly coarse yellow sand, clumps of grass are able to grow in the shadier places. Deep wagon ruts running from the southwest towards the mountains in the northeast show where generations of caravans have already passed.[=0x0022=][=0x000A=][=0x000A=]The water flask, the tent peg, and the trading permit are things in Foothills.[=0x000A=][=0x000A=]The rock is a thing in Foothills. Before printing the name of the rock when the rock is not handled: say [=0x0022=]innocent-looking [=0x0022=]. The dramatic potential of the rock is 10.[=0x000A=][=0x000A=]The rusty nail is a thing in Foothills.[=0x000A=][=0x000A=]The ant colony is a fixed in place thing. [=0x0022=]A busy group of ants are crawling to and fro in the unaccustomed sun.[=0x0022=] Rule for deciding whether all includes the ant colony while taking: it does not.[=0x000A=][=0x000A=]Instead of taking the rock when the rock is handled:[=0x000A=][=0x0009=]say [=0x0022=]It might still have a stray ant or two on it.[=0x0022=][=0x000A=][=0x000A=]After taking the rock:[=0x000A=][=0x0009=]now the rock is handled;[=0x000A=][=0x0009=]move ant colony to the location;[=0x000A=][=0x0009=]move the rock to the location;[=0x000A=][=0x0009=]say [=0x0022=]You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.[=0x0022=];[=0x000A=][=0x0009=]decrease score by 2.[=0x000A=][=0x000A=]Test me with [=0x0022=]get peg / drop peg / get all / get rock[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Formicidae&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27090" -->
<a id="c27090"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27091" -->
<a id="c27091"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27092" -->
<a id="c27092"></a><blockquote class="code"><p class="quoted">
The magic rule is listed before the generate action rule in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27093" -->
<a id="c27093"></a><blockquote class="code"><p class="quoted">
A thing has a number called dramatic potential.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27094" -->
<a id="c27094"></a><blockquote class="code"><p class="quoted">
This is the magic rule:
<br />&#160;&#160;&#160;&#160;let L be the multiple object list;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is greater than 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort L in dramatic potential order;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;alter the multiple object list to L.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27095" -->
<a id="c27095"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27096" -->
<a id="c27096"></a><blockquote class="code"><p class="quoted">
The Foothills is a room. &quot;The land has become hilly; though the soil is still mostly coarse yellow sand, clumps of grass are able to grow in the shadier places. Deep wagon ruts running from the southwest towards the mountains in the northeast show where generations of caravans have already passed.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27097" -->
<a id="c27097"></a><blockquote class="code"><p class="quoted">
The water flask, the tent peg, and the trading permit are things in Foothills.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27098" -->
<a id="c27098"></a><blockquote class="code"><p class="quoted">
The rock is a thing in Foothills. Before printing the name of the rock when the rock is not handled: say &quot;innocent-looking &quot;. The dramatic potential of the rock is 10.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27099" -->
<a id="c27099"></a><blockquote class="code"><p class="quoted">
The rusty nail is a thing in Foothills.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27100" -->
<a id="c27100"></a><blockquote class="code"><p class="quoted">
The ant colony is a fixed in place thing. &quot;A busy group of ants are crawling to and fro in the unaccustomed sun.&quot; Rule for deciding whether all includes the ant colony while taking: it does not.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27101" -->
<a id="c27101"></a><blockquote class="code"><p class="quoted">
Instead of taking the rock when the rock is handled:
<br />&#160;&#160;&#160;&#160;say &quot;It might still have a stray ant or two on it.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27102" -->
<a id="c27102"></a><blockquote class="code"><p class="quoted">
After taking the rock:
<br />&#160;&#160;&#160;&#160;now the rock is handled;
<br />&#160;&#160;&#160;&#160;move ant colony to the location;
<br />&#160;&#160;&#160;&#160;move the rock to the location;
<br />&#160;&#160;&#160;&#160;say &quot;You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.&quot;;
<br />&#160;&#160;&#160;&#160;decrease score by 2.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27103" -->
<a id="c27103"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get peg / drop peg / get all / get rock&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that while one could also manipulate the object list to add or remove items at this stage, there's a simpler way to control what Inform considers &quot;ALL&quot; to mean in commands: see the activity &quot;Deciding whether all includes&quot; in the activities chapter.</p>
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6_15.html#e110" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">Formicidae</span></b></a><br />Manipulating the order in which items are handled after TAKE ALL.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example110">
<p>Suppose we have an item that produces an interesting result the first time the player lifts it -- a rock with dangerous ants revealed underneath. The effect of the surprise is a little weakened, though, if the player sees that response as the result of a TAKE ALL, when it might be printed like this:</p>
<!-- START CODE "c27104" -->
<a id="c27104"></a><blockquote class="code"><p class="quoted">
&gt;[3] get all
<br />tent peg: Taken.
<br />water flask: Taken.
<br />trading permit: Taken.
<br />innocent-looking rock: You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.
<br />rusty nail: Taken.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27105" -->
<a id="c27105"></a><blockquote class="code"><p class="quoted">
[Your score has just gone down by two points.]
</p></blockquote>
<!-- END CODE -->
<p>The calm response to &quot;rusty nail&quot; looks odd now, and the score change is disconnected from the event that caused it.</p>
<p>To manage this, we might institute a system so that interesting objects are handled last in their list, like so:</p>
<!-- START CODE "c27106" -->
<a id="c27106"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Formicidae[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The magic rule is listed before the generate action rule in the turn sequence rules.[=0x000A=][=0x000A=]A thing has a number called dramatic potential.[=0x000A=][=0x000A=]This is the magic rule:[=0x000A=][=0x0009=]let L be the multiple object list;[=0x000A=][=0x0009=]if the number of entries in L is greater than 1:[=0x000A=][=0x0009=][=0x0009=]sort L in dramatic potential order;[=0x000A=][=0x0009=][=0x0009=]alter the multiple object list to L.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Foothills is a room. [=0x0022=]The land has become hilly; though the soil is still mostly coarse yellow sand, clumps of grass are able to grow in the shadier places. Deep wagon ruts running from the southwest towards the mountains in the northeast show where generations of caravans have already passed.[=0x0022=][=0x000A=][=0x000A=]The water flask, the tent peg, and the trading permit are things in Foothills.[=0x000A=][=0x000A=]The rock is a thing in Foothills. Before printing the name of the rock when the rock is not handled: say [=0x0022=]innocent-looking [=0x0022=]. The dramatic potential of the rock is 10.[=0x000A=][=0x000A=]The rusty nail is a thing in Foothills.[=0x000A=][=0x000A=]The ant colony is a fixed in place thing. [=0x0022=]A busy group of ants are crawling to and fro in the unaccustomed sun.[=0x0022=] Rule for deciding whether all includes the ant colony while taking: it does not.[=0x000A=][=0x000A=]Instead of taking the rock when the rock is handled:[=0x000A=][=0x0009=]say [=0x0022=]It might still have a stray ant or two on it.[=0x0022=][=0x000A=][=0x000A=]After taking the rock:[=0x000A=][=0x0009=]now the rock is handled;[=0x000A=][=0x0009=]move ant colony to the location;[=0x000A=][=0x0009=]move the rock to the location;[=0x000A=][=0x0009=]say [=0x0022=]You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.[=0x0022=];[=0x000A=][=0x0009=]decrease score by 2.[=0x000A=][=0x000A=]Test me with [=0x0022=]get peg / drop peg / get all / get rock[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;Formicidae&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27107" -->
<a id="c27107"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27108" -->
<a id="c27108"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27109" -->
<a id="c27109"></a><blockquote class="code"><p class="quoted">
The magic rule is listed before the generate action rule in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27110" -->
<a id="c27110"></a><blockquote class="code"><p class="quoted">
A thing has a number called dramatic potential.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27111" -->
<a id="c27111"></a><blockquote class="code"><p class="quoted">
This is the magic rule:
<br />&#160;&#160;&#160;&#160;let L be the multiple object list;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is greater than 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort L in dramatic potential order;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;alter the multiple object list to L.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27112" -->
<a id="c27112"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27113" -->
<a id="c27113"></a><blockquote class="code"><p class="quoted">
The Foothills is a room. &quot;The land has become hilly; though the soil is still mostly coarse yellow sand, clumps of grass are able to grow in the shadier places. Deep wagon ruts running from the southwest towards the mountains in the northeast show where generations of caravans have already passed.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27114" -->
<a id="c27114"></a><blockquote class="code"><p class="quoted">
The water flask, the tent peg, and the trading permit are things in Foothills.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27115" -->
<a id="c27115"></a><blockquote class="code"><p class="quoted">
The rock is a thing in Foothills. Before printing the name of the rock when the rock is not handled: say &quot;innocent-looking &quot;. The dramatic potential of the rock is 10.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27116" -->
<a id="c27116"></a><blockquote class="code"><p class="quoted">
The rusty nail is a thing in Foothills.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27117" -->
<a id="c27117"></a><blockquote class="code"><p class="quoted">
The ant colony is a fixed in place thing. &quot;A busy group of ants are crawling to and fro in the unaccustomed sun.&quot; Rule for deciding whether all includes the ant colony while taking: it does not.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27118" -->
<a id="c27118"></a><blockquote class="code"><p class="quoted">
Instead of taking the rock when the rock is handled:
<br />&#160;&#160;&#160;&#160;say &quot;It might still have a stray ant or two on it.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27119" -->
<a id="c27119"></a><blockquote class="code"><p class="quoted">
After taking the rock:
<br />&#160;&#160;&#160;&#160;now the rock is handled;
<br />&#160;&#160;&#160;&#160;move ant colony to the location;
<br />&#160;&#160;&#160;&#160;move the rock to the location;
<br />&#160;&#160;&#160;&#160;say &quot;You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.&quot;;
<br />&#160;&#160;&#160;&#160;decrease score by 2.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c27120" -->
<a id="c27120"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get peg / drop peg / get all / get rock&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that while one could also manipulate the object list to add or remove items at this stage, there's a simpler way to control what Inform considers &quot;ALL&quot; to mean in commands: see the activity &quot;Deciding whether all includes&quot; in the activities chapter.</p>
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<a  href="ex110.html#e110"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e294"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex294.html#e294" class="eglink"><b>431</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex294.html#e294" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Facts Were These</span></b></a><br />Creating a variant GIVE action that lets the player give multiple objects simultaneously with commands like GIVE ALL TO ATTENDANT or GIVE THREE DOLLARS TO ATTENDANT or GIVE PIE AND HAT TO ATTENDANT. The attendant accepts the gifts only if their total combined value matches some minimum amount.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex294.html#e294"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
