<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 29 May 2018 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>7.15. Goal-Seeking Characters</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'Documentation/Images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'Documentation/Images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'Documentation/Images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>
<p class="sectionheading">ยง7.15. Goal-Seeking Characters</p>
<p>Goal-seeking characters are the most advanced IF life-form: they want to achieve specific outcomes, and they are able to work out plans of approach in order to bring these things about. They walk to rooms, open containers to search for things, use keys and tools, and ask leading questions in conversation.</p>
<p>A really advanced implementation of goal-seeking behavior is beyond the scope of our examples (though extensions exist that treat the problem more thoroughly). We can accomplish a surprising amount without heavy customization, though, if we keep in mind three points of technique:</p>
<p>First: it helps to think abstractly and to create broadly-defined actions as a first step to more specific tasks. For instance, a character's goal might be to eat some dinner. He'd be equally satisfied with spaghetti carbonara or with braised lamb shanks, but he needs to figure out which is available. So we might have our every turn rule (or whatever we're using to activate the character) say something like</p>
<!-- START CODE "c23710" -->
<a id="c23710"></a><blockquote class="code"><p class="quoted">
Every turn when Clark is hungry:
<br />&#160;&#160;&#160;&#160;try Clark dining.
</p></blockquote>
<!-- END CODE -->
<p>Dining would then be an action we've defined specially, which looks around Clark's environment for suitable food; if it finds food, it issues a</p>
<!-- START CODE "c23711" -->
<a id="c23711"></a><blockquote class="code"><p class="quoted">
try Clark eating the suitable food;
</p></blockquote>
<!-- END CODE -->
<p>command; but if not, it sends Clark off to look for something likely. <span class="boldface">The Man of Steel</span> demonstrates the use of this.</p>
<p>Second: though it doesn't actually contribute to the goal-seeking per se, lively reporting brings characters' generated behavior to life.</p>
<!-- START CODE "c23712" -->
<a id="c23712"></a><blockquote class="code"><p class="quoted">
Clark eats a donut.
</p></blockquote>
<!-- END CODE -->
<p>doesn't characterize Clark very much, even though the eating may be part of a subtle, intelligent plan to seduce Lois Lane. We'll do better if we replace a lot of the character reporting rules: to that end, see the example <span class="boldface">The Man of Steel Excuses Himself</span>.</p>
<p>Third: goal-seeking characters notice when something is in the way of the action they want to perform. When that happens, they form a plan about how to remove the obstacle. We've already seen this kind of implementation on the player's behalf: the player will pick up items before eating them, say. We can use Before rules to do similar things for other characters, as in</p>
<!-- START CODE "c23713" -->
<a id="c23713"></a><blockquote class="code"><p class="quoted">
Before Clark eating the wrapped candy:
<br />&#160;&#160;&#160;&#160;try Clark unwrapping the candy;
<br />&#160;&#160;&#160;&#160;if the candy is wrapped, stop the action.
</p></blockquote>
<!-- END CODE -->
<p>Here we've set things up so that if Clark tries to eat the wrapped candy, he'll be interrupted by this other command; and if his unwrapping-the-candy attempt fails, he won't go on and eat the thing. <span class="boldface">IQ Test</span> demonstrates a character who shows this kind of planning intelligence.</p>
<p>Because before-rules chain neatly, we can trigger whole plans of behavior if we have a sensible set, as in</p>
<!-- START CODE "c23714" -->
<a id="c23714"></a><blockquote class="code"><p class="quoted">
Before someone entering a closed container: try the person asked opening the noun.
<br />Before someone opening a locked container: try the person asked unlocking the noun.
<br />Before someone unlocking a locked container: ...
</p></blockquote>
<!-- END CODE -->
<p>We must exercise a little bit of care if it is possible for the chain of actions to produce an endless loop - e.g., the character trying to take a key that is inside the transparent, locked box that it opens might repeatedly try to open the box, first unlocking the box, first taking the key, first opening the box, ... <span class="boldface">Boston Cream</span> is a fully-worked scenario that deals with such a set of conundra.</p>
<p class="crossreference"><a href="RB_7_13.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Traveling Characters</b></a><i> for characters who plan routes to locations and travel towards them</i></p><p class="crossreference"><a href="RB_4_3.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Event Scheduling</b></a><i> for characters who follow a pre-written schedule of activities</i></p><p class="crossreference"><a href="RB_4_6.html" class="xreflink"><img class="asterisk" alt="*" src="Documentation/Images/xref.png" />&#160;<i>See </i><b>Plot Management</b></a><i> for having a central function direct all the characters in order to further the plot</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_7_1.html" class="standardlink"><img alt="arrow-up.png" src="Documentation/Images/arrow-up.png" /></a></td><td><a href="RB_7_1.html" class="standardlink">Start of Chapter 7: Other Characters</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_7_14.html" class="standardlink"><img alt="arrow-left.png" src="Documentation/Images/arrow-left.png" /></a></td><td><a href="RB_7_14.html" class="standardlink">Back to ยง7.14. Obedient Characters</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_7_16.html" class="standardlink"><img alt="arrow-right.png" src="Documentation/Images/arrow-right.png" /></a></td><td><a href="RB_7_16.html" class="standardlink">Onward to ยง7.16. Social Groups</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading"></p><a id="e371"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex371.html#e371" class="eglink"><b>189</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex371.html#e371" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">IQ Test</span></b></a><br />Introducing Ogg, a person who will unlock and open a container when the player tells him to get something inside.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex371.html#e371"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e215"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<!-- EXAMPLE START -->
<a href="RB_7_15.html#e215" class="eglink"><b>203</b></a></div>
<div class="egpanel" id="example215">
<p>It will sometimes be handy to write actions that are only available to the non-player characters and not to the player. To do this, we just define an action which has no &quot;understand&quot;: the player will never be able to specify this command himself, but other characters can try it.</p>
<p>This is particularly useful for creating abstract or general actions for when we want a character to eat something, wear something, or go somewhere, but aren't too particular as to what the object is; as here, where we just want Clark to move away from the kryptonite, regardless of direction:</p>
<!-- START CODE "c30267" -->
<a id="c30267"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Man of Steel[=0x0022=][=0x000A=][=0x000A=]Escaping is an action applying to nothing.[=0x000A=][=0x000A=]Carry out someone escaping:[=0x000A=][=0x0009=]let space be the holder of the person asked;[=0x000A=][=0x0009=]let place be a random room which is adjacent to the space;[=0x000A=][=0x0009=]let way be the best route from the space to the place;[=0x000A=][=0x0009=]try the person asked going way.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]if Clark Kent can see kryptonite, try Clark Kent escaping.[=0x000A=][=0x000A=]The Daily Planet Newsroom is a room.[=0x000A=][=0x000A=]Perry White[=0x0027=]s Office is west of the Newsroom. In Perry White[=0x0027=]s Office are a desk and a poster of Elvis. On the desk is a lead-lined box. The box is openable. In the box is the green kryptonite crystal.[=0x000A=][=0x000A=]The Supply Closet is east of the Newsroom. The Elevator Bank is north of the Newsroom.[=0x000A=][=0x000A=]Clark Kent is a man in the Newsroom. [=0x0022=]Clark [if Clark can see the kryptonite]looks a bit ill[otherwise]is here, frowning as he revises his latest article[end if].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]west / get box / east / close box / east / west / north / south / west[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Man of Steel&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30268" -->
<a id="c30268"></a><blockquote class="code"><p class="quoted">
Escaping is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30269" -->
<a id="c30269"></a><blockquote class="code"><p class="quoted">
Carry out someone escaping:
<br />&#160;&#160;&#160;&#160;let space be the holder of the person asked;
<br />&#160;&#160;&#160;&#160;let place be a random room which is adjacent to the space;
<br />&#160;&#160;&#160;&#160;let way be the best route from the space to the place;
<br />&#160;&#160;&#160;&#160;try the person asked going way.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30270" -->
<a id="c30270"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if Clark Kent can see kryptonite, try Clark Kent escaping.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30271" -->
<a id="c30271"></a><blockquote class="code"><p class="quoted">
The Daily Planet Newsroom is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30272" -->
<a id="c30272"></a><blockquote class="code"><p class="quoted">
Perry White's Office is west of the Newsroom. In Perry White's Office are a desk and a poster of Elvis. On the desk is a lead-lined box. The box is openable. In the box is the green kryptonite crystal.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30273" -->
<a id="c30273"></a><blockquote class="code"><p class="quoted">
The Supply Closet is east of the Newsroom. The Elevator Bank is north of the Newsroom.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30274" -->
<a id="c30274"></a><blockquote class="code"><p class="quoted">
Clark Kent is a man in the Newsroom. &quot;Clark [if Clark can see the kryptonite]looks a bit ill[otherwise]is here, frowning as he revises his latest article[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30275" -->
<a id="c30275"></a><blockquote class="code"><p class="quoted">
Test me with &quot;west / get box / east / close box / east / west / north / south / west&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<!-- EXAMPLE START -->
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_7_15.html#e215" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner"><b>Example</b></span><span class="egname">The Man of Steel</span></b></a><br />An escaping action which means "go to any room you can reach from here", and is only useful to non-player characters.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egpanel" id="example215">
<p>It will sometimes be handy to write actions that are only available to the non-player characters and not to the player. To do this, we just define an action which has no &quot;understand&quot;: the player will never be able to specify this command himself, but other characters can try it.</p>
<p>This is particularly useful for creating abstract or general actions for when we want a character to eat something, wear something, or go somewhere, but aren't too particular as to what the object is; as here, where we just want Clark to move away from the kryptonite, regardless of direction:</p>
<!-- START CODE "c30276" -->
<a id="c30276"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]The Man of Steel[=0x0022=][=0x000A=][=0x000A=]Escaping is an action applying to nothing.[=0x000A=][=0x000A=]Carry out someone escaping:[=0x000A=][=0x0009=]let space be the holder of the person asked;[=0x000A=][=0x0009=]let place be a random room which is adjacent to the space;[=0x000A=][=0x0009=]let way be the best route from the space to the place;[=0x000A=][=0x0009=]try the person asked going way.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]if Clark Kent can see kryptonite, try Clark Kent escaping.[=0x000A=][=0x000A=]The Daily Planet Newsroom is a room.[=0x000A=][=0x000A=]Perry White[=0x0027=]s Office is west of the Newsroom. In Perry White[=0x0027=]s Office are a desk and a poster of Elvis. On the desk is a lead-lined box. The box is openable. In the box is the green kryptonite crystal.[=0x000A=][=0x000A=]The Supply Closet is east of the Newsroom. The Elevator Bank is north of the Newsroom.[=0x000A=][=0x000A=]Clark Kent is a man in the Newsroom. [=0x0022=]Clark [if Clark can see the kryptonite]looks a bit ill[otherwise]is here, frowning as he revises his latest article[end if].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]west / get box / east / close box / east / west / north / south / west[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="Documentation/Images/paste.png" /></a> &quot;The Man of Steel&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30277" -->
<a id="c30277"></a><blockquote class="code"><p class="quoted">
Escaping is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30278" -->
<a id="c30278"></a><blockquote class="code"><p class="quoted">
Carry out someone escaping:
<br />&#160;&#160;&#160;&#160;let space be the holder of the person asked;
<br />&#160;&#160;&#160;&#160;let place be a random room which is adjacent to the space;
<br />&#160;&#160;&#160;&#160;let way be the best route from the space to the place;
<br />&#160;&#160;&#160;&#160;try the person asked going way.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30279" -->
<a id="c30279"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if Clark Kent can see kryptonite, try Clark Kent escaping.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30280" -->
<a id="c30280"></a><blockquote class="code"><p class="quoted">
The Daily Planet Newsroom is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30281" -->
<a id="c30281"></a><blockquote class="code"><p class="quoted">
Perry White's Office is west of the Newsroom. In Perry White's Office are a desk and a poster of Elvis. On the desk is a lead-lined box. The box is openable. In the box is the green kryptonite crystal.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30282" -->
<a id="c30282"></a><blockquote class="code"><p class="quoted">
The Supply Closet is east of the Newsroom. The Elevator Bank is north of the Newsroom.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30283" -->
<a id="c30283"></a><blockquote class="code"><p class="quoted">
Clark Kent is a man in the Newsroom. &quot;Clark [if Clark can see the kryptonite]looks a bit ill[otherwise]is here, frowning as he revises his latest article[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c30284" -->
<a id="c30284"></a><blockquote class="code"><p class="quoted">
Test me with &quot;west / get box / east / close box / east / west / north / south / west&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<!-- EXAMPLE END -->
<div class="egovalforxref overstruckimage">
<a  href="ex215.html#e215"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e401"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex401.html#e401" class="eglink"><b>208</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex401.html#e401" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Man of Steel Excuses Himself</span></b></a><br />Elaborating the report rules to be more interesting than "Clark goes west."</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex401.html#e401"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<a id="e131"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="Rex131.html#e131" class="eglink"><b>190</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="Rex131.html#e131" class="eglink"><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><img class="asterisk" alt="*" src="Documentation/Images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Boston Cream</span></b></a><br />A fuller implementation of Ogg, giving him a motivation of his own and allowing him to react to the situation created by the player.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="ex131.html#e131"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
